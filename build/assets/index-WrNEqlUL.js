import{r as ys,a as cl,g as ul,b as C,u as Ys,L as dt,e as Ct,c as ym,N as vm,d as vs,f as bm,O as wm,B as _m,R as Em,h as Pe}from"./vendor-BZKKJenW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var Jo={exports:{}},gr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mc;function Nm(){if(Mc)return gr;Mc=1;var n=ys(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,d){var f,m={},g=null,v=null;d!==void 0&&(g=""+d),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(v=u.ref);for(f in u)s.call(u,f)&&!o.hasOwnProperty(f)&&(m[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)m[f]===void 0&&(m[f]=u[f]);return{$$typeof:e,type:c,key:g,ref:v,props:m,_owner:r.current}}return gr.Fragment=t,gr.jsx=a,gr.jsxs=a,gr}var Vc;function Sm(){return Vc||(Vc=1,Jo.exports=Nm()),Jo.exports}var i=Sm(),di={},Bc;function Tm(){if(Bc)return di;Bc=1;var n=cl();return di.createRoot=n.createRoot,di.hydrateRoot=n.hydrateRoot,di}var Im=Tm(),Qo={exports:{}},Xo,Uc;function Cm(){if(Uc)return Xo;Uc=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Xo=n,Xo}var Zo,$c;function jm(){if($c)return Zo;$c=1;var n=Cm();function e(){}function t(){}return t.resetWarningCache=e,Zo=function(){function s(a,c,u,d,f,m){if(m!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}s.isRequired=s;function r(){return s}var o={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Zo}var qc;function Or(){return qc||(qc=1,Qo.exports=jm()()),Qo.exports}var Am=Or();const je=ul(Am),nh=C.createContext({user:null,updateUser:()=>{},logout:()=>{}}),sh=({children:n})=>{const[e,t]=C.useState(()=>{const a=localStorage.getItem("userData");if(a)try{return JSON.parse(a)}catch(c){return console.error("Error parsing user data:",c),null}return null});C.useEffect(()=>{if(e)try{localStorage.setItem("userData",JSON.stringify(e))}catch(a){console.error("Error storing user data:",a)}else localStorage.removeItem("userData"),localStorage.removeItem("token")},[e]);const o={user:e,updateUser:a=>{if(a)try{t(a)}catch(c){console.error("Error updating user:",c)}else t(null)},logout:()=>{try{t(null),localStorage.removeItem("userData"),localStorage.removeItem("token"),localStorage.removeItem("savedEmail")}catch(a){console.error("Error during logout:",a)}}};return i.jsx(nh.Provider,{value:o,children:n})};sh.propTypes={children:je.node.isRequired};const Lr=()=>{const n=C.useContext(nh);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n},Rm=()=>{const n=Ys();return i.jsx("header",{className:"bg-Bbackground py-4 sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-[1440px] h-14 mx-auto w-full flex justify-between items-center px-4",children:[i.jsxs(dt,{to:"/home/announcement",className:"flex items-center group hover:opacity-80 transition-opacity",children:[i.jsx("img",{src:"/assets/image/LV_logo.png",alt:"LV logo",className:"w-20 h-20 mr-2 mb-1"}),i.jsx("span",{className:"font-regular text-2xl text-LBackground",children:"LVCC"}),i.jsx("span",{className:"font-LatoRegular text-[26px] text-[#252F6A] pl-2 mb-1 ",children:"AppointEase"})]}),i.jsx("nav",{children:i.jsxs("ul",{className:"flex space-x-10 text-[26px] text-[#000] relative left-[14rem]",children:[i.jsx("li",{className:`text-lg font-LatoRegular hover:text-LBackground ${n.pathname.startsWith("/home")?"border-b-4 border-Gold":""}`,children:i.jsx(dt,{to:"/home/announcement",children:"HOME"})}),i.jsx("li",{className:`text-lg font-LatoRegular hover:text-LBackground ${n.pathname.startsWith("/about")?"border-b-4 border-Gold":""}`,children:i.jsx(dt,{to:"/about",children:"ABOUT"})}),i.jsx("li",{className:`text-lg font-LatoRegular hover:text-LBackground ${n.pathname.startsWith("/faqs")?"border-b-4 border-Gold":""}`,children:i.jsx(dt,{to:"/faqs",children:"FAQs"})}),i.jsx("li",{className:`text-lg font-LatoRegular hover:text-LBackground ${n.pathname.startsWith("/contact")?"border-b-4 border-Gold":""}`,children:i.jsx(dt,{to:"/contact",children:"CONTACT"})})]})}),i.jsx("button",{className:"px-6 py-3 bg-[#252F6A] text-[#FAFAFA] text-sm uppercase rounded-[10px] hover:bg-blue-700 relative right-3",children:i.jsx(dt,{to:"/appointmentForm?step=1",children:"Appoint Now"})})]})})};var rh={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zc=Ct.createContext&&Ct.createContext(rh),Pm=["attr","size","title"];function km(n,e){if(n==null)return{};var t=Dm(n,e),s,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)s=o[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Dm(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function $i(){return $i=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},$i.apply(this,arguments)}function Hc(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,s)}return t}function qi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hc(Object(t),!0).forEach(function(s){Om(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hc(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Om(n,e,t){return e=Lm(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lm(n){var e=Fm(n,"string");return typeof e=="symbol"?e:e+""}function Fm(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ih(n){return n&&n.map((e,t)=>Ct.createElement(e.tag,qi({key:t},e.attr),ih(e.child)))}function we(n){return e=>Ct.createElement(Mm,$i({attr:qi({},n.attr)},e),ih(n.child))}function Mm(n){var e=t=>{var{attr:s,size:r,title:o}=n,a=km(n,Pm),c=r||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),Ct.createElement("svg",$i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,a,{className:u,style:qi(qi({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Ct.createElement("title",null,o),n.children)};return zc!==void 0?Ct.createElement(zc.Consumer,null,t=>e(t)):e(rh)}function Vm(n){return we({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Facebook"},child:[{tag:"path",attr:{d:"M19.02,4.975A9.93,9.93,0,0,0,2.07,12,9.935,9.935,0,0,0,12,21.935a9.98,9.98,0,0,0,3.8-.75,10.189,10.189,0,0,0,3.22-2.16,9.934,9.934,0,0,0,0-14.05Zm-.7,13.34A8.921,8.921,0,0,1,13,20.885v-6.56h1.88a1,1,0,0,0,0-2H13V9.585a1,1,0,0,1,1-1h1.2a1,1,0,0,0,0-2H13.5a2.5,2.5,0,0,0-2.5,2.5v3.24H9.13a1,1,0,1,0,0,2H11v6.56a8.919,8.919,0,1,1,9.26-5.47A9.061,9.061,0,0,1,18.32,18.315Z"},child:[]}]}]})(n)}function Bm(n){return we({attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M0 2v13h17v-13h-17zM8.494 9.817l-6.896-6.817h13.82l-6.924 6.817zM5.755 8.516l-4.755 4.682v-9.383l4.755 4.701zM6.466 9.219l2.026 2.003 1.996-1.966 4.8 4.744h-13.677l4.855-4.781zM11.201 8.555l4.799-4.725v9.467l-4.799-4.742z"},child:[]}]})(n)}const Um=()=>i.jsxs("footer",{className:"bg-Footer",children:[i.jsxs("div",{className:"flex justify-between items-center h-[200px] px-12",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"flex items-center font-regular ml-8 text-[32px] text-LBackground",children:[i.jsx("img",{src:"/assets/image/LV_logo.png",alt:"LV Logo",className:"w-20 h-20 mr-2 mb-1"}),"LA VERDAD CHRISTIAN COLLEGE"]}),i.jsx("p",{className:"text-[14px] w-[510px] font-LatoRegular text-LBackground ml-[7.5rem]",children:"Seamless appointment management—stay organized, save time, and never miss an appointment with ease and efficiency."})]}),i.jsxs("div",{className:"flex flex-col items-center space-y-3 ml-52",children:[i.jsx("p",{className:"font-LatoRegular text-[24px] text-LBackground",children:"FOLLOW US"}),i.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[i.jsx("a",{href:"https://www.facebook.com/lvcc.apalit",target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Facebook page",children:i.jsx(Vm,{className:"text-Primary w-10 h-10 hover:text-PrimaryDark transition-colors"})}),i.jsx("a",{href:"mailto:support@laverdad.edu.ph","aria-label":"Send us an email",children:i.jsx(Bm,{className:"text-Primary w-8 h-8 hover:text-PrimaryDark transition-colors"})})]})]}),i.jsxs("div",{className:"flex flex-col items-center space-y-3 pr-12 mt-14",children:[i.jsx("p",{className:"font-LatoRegular text-[24px] text-LBackground",children:"CONTACT US"}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[14px] font-LatoRegular text-LBackground",children:"support@laverdad.edu.ph"}),i.jsx("p",{className:"text-[14px] font-LatoRegular text-LBackground",children:"+639479998499"}),i.jsx("p",{className:"text-[14px] w-[200px] font-LatoRegular text-LBackground",children:"Mac Arthur High-way, Sampaloc, Apalit, Pampanga"})]})]})]}),i.jsx("div",{className:"border-b-2 border-Primary opacity-50 w-[90%] m-auto p-4"}),i.jsx("p",{className:"text-center py-8",children:"© 2024 . La Verdad Christian College, Inc."})]}),dl=()=>{const n=Ys(),[e,t]=C.useState("");return C.useEffect(()=>{const s=n.pathname.split("/")[2];t(s)},[n]),i.jsx("div",{className:"relative",children:i.jsx("div",{className:"flex items-center justify-center flex-col max-w-[1297px] mx-auto",children:i.jsxs("div",{className:"absolute z-10 text-[27px] flex justify-around w-full",children:[i.jsx(dt,{to:"/home/announcement",className:`pt-7 rounded-sm w-[399px] h-[104px] flex flex-col items-center ${e==="announcement"?"bg-[#FEFEFE]":"bg-[#D2D2D2]"}`,children:i.jsxs("div",{className:"flex items-center ",children:[i.jsx("img",{src:"/assets/icons/announcement.svg",alt:"Announcement Icon",className:"mr-2 w-10 h-10"}),i.jsxs("span",{className:`relative ${e==="announcement"?"text-[#161F55]":"text-gray-600"}`,children:["Announcement",e==="announcement"&&i.jsx("span",{className:"absolute left-0 right-0 bottom-0 border-b-4 border-[#F3BC62]"})]})]})}),i.jsx(dt,{to:"/home/hta",className:`pt-7 rounded-sm w-[399px] h-[104px] flex flex-col items-center ${e==="hta"?"bg-[#FEFEFE]":"bg-[#D2D2D2]"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:"/assets/icons/howtoappoint.svg",alt:"How to Appoint Icon",className:"mr-2 w-10 h-10"}),i.jsxs("span",{className:`relative ${e==="hta"?"text-[#161F55]":"text-gray-600"}`,children:["How to Appoint",e==="hta"&&i.jsx("span",{className:"absolute left-0 right-0 bottom-0 border-b-4 border-[#F3BC62]"})]})]})}),i.jsx(dt,{to:"/home/guidelines",className:`pt-7 rounded-sm w-[399px] h-[104px] flex flex-col items-center ${e==="guidelines"?"bg-[#FEFEFE]":"bg-[#D2D2D2]"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:"/assets/icons/guidelines.svg",alt:"Guidelines Icon",className:"mr-2 w-10 h-10"}),i.jsxs("span",{className:`relative ${e==="guidelines"?"text-[#161F55]":"text-gray-600"}`,children:["Guidelines",e==="guidelines"&&i.jsx("span",{className:"absolute left-0 right-0 bottom-0 border-b-4 border-[#F3BC62]"})]})]})})]})})})};function $m(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(n)}function qm(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function zm(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(n)}function Hm(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(n)}function Gm(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function Wm(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function hi(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(n)}function oh(n){return we({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function Km(n){return we({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(n)}function Fr(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function Ym(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function Gc(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}function Jm(n){return we({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(n)}function Qm(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function Xm(n){return we({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h274.9c-2.4-6.8-3.4-14-2.6-21.3l6.8-60.9 1.2-11.1 7.9-7.9 77.3-77.3c-24.5-27.7-60-45.5-99.9-45.5zm45.3 145.3l-6.8 61c-1.1 10.2 7.5 18.8 17.6 17.6l60.9-6.8 137.9-137.9-71.7-71.7-137.9 137.8zM633 268.9L595.1 231c-9.3-9.3-24.5-9.3-33.8 0l-37.8 37.8-4.1 4.1 71.8 71.7 41.8-41.8c9.3-9.4 9.3-24.5 0-33.9z"},child:[]}]})(n)}function Zm(n){return we({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}function eg(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"},child:[]}]})(n)}const tg=()=>{const[n,e]=C.useState(0),t=[{title:"Requesting and releasing of documents general guidelines.",description:"To ensure efficient and orderly processing of document requests, the following regulations have been established for both Basic Education and Higher Education. Please be guided accordingly."},{title:"Objectives",description:["La Verdad Christian College, Inc. aims to provide help through educational assistance to poor but deserving students from different parts of the country so that they may acquire quality education without the worries of high cost of education.","It also aims to alleviate poverty by offering opportunities to poor but determined students to acquire higher quality education to fulfill their dreams and succeed with God's help and mercy."]},{title:"College Program Offered",description:["CHED PROGRAMS","• 4-Year Bachelor of Science in Accountancy","• 4-Year Bachelor of Science in Accounting Info. Systems","• 4-Year Bachelor of Science in Social Work","• 4-Year Bachelor of Arts in Broadcasting","• 4-Year Bachelor of Science in Information Systems","• 2-Year Associate in Computer Technology"]}],s=()=>{e(o=>o===0?t.length-1:o-1)},r=()=>{e(o=>o===t.length-1?0:o+1)};return i.jsxs("div",{className:"relative w-full h-screen mx-auto bg-[#161f55] text-white p-6 flex flex-col items-center justify-center pt-10 font-lato",children:[i.jsxs("div",{className:"text-center max-w-[1000px] flex flex-col justify-center items-center h-screen",children:[i.jsx("h2",{className:"text-[36px] font-semibold w-[800px]",children:t[n].title}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[50%] my-5"}),i.jsx("div",{className:`text-[30px] pb-10 ${Array.isArray(t[n].description)?" max-h-[350px]":""} ${t[n].title==="Objectives"?"text-center ":t[n].title==="College Program Offered"?"text-start leading-tight":""}`,children:Array.isArray(t[n].description)?t[n].description.map((o,a)=>i.jsx("p",{className:"mb-4",children:o},a)):i.jsx("p",{children:t[n].description})}),n===0&&i.jsx(dt,{to:"/home/guidelines",children:i.jsx("button",{className:"text-[25px] border border-white px-4 py-2 my-4 rounded hover:bg-white hover:text-[#2A3064] transition",children:"See more"})})]}),i.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-2xl font-bold hover:text-gray-400",children:i.jsx("button",{onClick:s,children:i.jsx(qm,{className:"w-10 h-10"})})}),i.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-2xl font-bold hover:text-gray-400",children:i.jsx("button",{onClick:r,children:i.jsx(zm,{className:"w-10 h-10"})})}),i.jsx("div",{className:"flex justify-center",children:t.map((o,a)=>i.jsx("span",{onClick:()=>e(a),className:`w-6 h-6 rounded-full cursor-pointer mx-5 ${n===a?"bg-white":"bg-gray-500 hover:bg-white"}`},a))})]})},ea=()=>{const n=(t,s)=>i.jsxs("div",{className:"relative min-w-[420px] h-[420px] flex-shrink-0 borders font-LatoRegular",children:[i.jsx("img",{src:"/assets/image/calendar.png",alt:"calendar icon",className:"w-full h-full"}),i.jsx("div",{className:"absolute inset-0 flex  justify-center bg-opacity-70 p-2 rounded-md",children:i.jsxs("div",{className:"text-center p-1 w-[350px] text-[#161F55] tracking-wide  bg-[#E4E4E4] absolute top-[140px] h-[58%] bg-opacity-40 rounded-3xl",children:[i.jsx("h3",{className:"text-[32px] font-bold",children:t}),i.jsx("div",{className:"border-b-8 border-[#F3BC62] w-[250px] my-4 text-center mx-auto"}),i.jsx("p",{className:"text-[50px]",children:s})]})})]}),e=()=>i.jsx("div",{className:"absolute top-[130px] right-0 w-[1500px] z-20 pl-[900px] pointer-events-none",children:i.jsx("img",{src:"/assets/image/mobile.png",alt:"mobile icon",className:"w-full object-contain"})});return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"font-LatoRegular",children:[i.jsxs("div",{className:"relative w-full h-[900px] bg-cover bg-center flex items-center justify-center text-white text-center",style:{backgroundImage:"url('/assets/image/JPampangaBarangays0646dfvf_11.JPG')"},children:[i.jsx("div",{className:"absolute inset-0 bg-custom-gradient_announcement z-10 pb-10"}),i.jsxs("div",{className:"relative z-10 px-4 max-w-[900px] ",children:[i.jsxs("h1",{className:`text-[50px] font-LatoSemiBold\r
             uppercase tracking-widest`,children:["La Verdad ",i.jsx("br",{}),"Christian College"]}),i.jsx("div",{className:"border-b-8 border-white my-4"}),i.jsxs("p",{className:"text-[30px] ",children:["Simplifying appointment scheduling. ",i.jsx("br",{}),"Stay organized, save time, and never miss an appointment. ",i.jsx("br",{}),"Easy, fast, and hassle-free."]})]})]}),i.jsx(dl,{}),i.jsx("div",{children:i.jsx(tg,{})}),i.jsx("div",{className:" flex items-center justify-center min-h-screen max-w-[1440px]  mx-auto p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:" font-normal text-[#161F55] text-[35px]",children:"Face-to-Face Transaction"}),i.jsx("div",{className:"w-[500px] h-1 bg-yellow-500 mx-auto my-2"}),i.jsx("h1",{className:"text-[50px] font-bold text-[#161F55] mb-8",children:"REGISTRAR OFFICE HOURS"})]}),i.jsx("div",{className:"flex flex-col items-center mx-auto ml-10",children:i.jsxs("div",{className:"flex justify-center items-center gap-20",children:[i.jsx("div",{children:n("MONDAY","7:00 AM to 4:00 PM")}),i.jsx("div",{children:n("TUESDAY - FRIDAY","8:00 AM to 5:00 PM")})]})}),i.jsx("p",{className:"text-[#161F55] italic text-[25px] pt-20 text-start",children:"Note: The registrar's office hours of operation may be subject to change due to unforeseen circumstances or institutional events. Please check the announcement board for updates."})]})}),i.jsxs("div",{className:"text-white h-[500px] relative",children:[i.jsxs("div",{className:"relative w-full h-[400px]",children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center h-[500px]",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')"},children:i.jsx("div",{className:"absolute inset-0 bg-[#0D1858] opacity-50"})}),i.jsxs("div",{className:"absolute inset-0 flex flex-col items-start justify-center max-w-[900px] pl-10 pt-[95px] z-10",children:[i.jsx("h1",{className:"text-[40px] font-bold text-center tracking-[5px]",children:"REGISTRAR OFFICE APPOINTMENT"}),i.jsx("p",{className:"text-[30px] text-start mt-4",children:"For a more secure and efficient process of requesting and claiming student's credentials for everyone"})]})]}),i.jsx("div",{children:e()})]}),i.jsx("div",{className:"bg-[#161F55] h-[600px] text-white text-[30px] flex items-start justify-center flex-col relative z-0 text-left",children:i.jsxs("div",{className:"max-w-[900px] pl-[90px] p-10 ",children:[i.jsx("h2",{className:"mb-8 tracking-[7px] text-start",children:"VISIT OUR FACEBOOK PAGE FOR LATEST UPDATES AND INFORMATION"}),i.jsx("a",{href:"https://www.facebook.com/lvcc.apalit",target:"_blank",className:"underline text-blue-300 z-50 relative pr-70 hover:text-white",children:"https://www.facebook.com/lvcc.apalit"}),i.jsx("div",{className:"border-b-8 border-[#F3BC62] h-1 w-full pt-20"})]})})]})})},ng=()=>{const[n,e]=C.useState([]),t=[{id:1,Title:"Certificate of Enrollment",ProcessingDays:"1 working day",Conditions:["A maximum of 3 request per school year is allowed.","Must attach proof indicating where the certificate will be used (e.g., scholarship applications, transfer requirements. etc.)."]},{id:2,Title:"Good Moral Certificate",ProcessingDays:"2 working days",Conditions:["This document can only be requested once.","Must attach a request letter when submitting their application"]},{id:3,Title:"Certified True Copy of Documents",ProcessingDays:"Immediately",Conditions:["No limitations on the number of requests.","Provide a photocopy of the document that needs to be certified."]},{id:4,Title:"Certificates",ProcessingDays:"2 working days",Conditions:["Applies to various certificates such as academic awards. etc.","Must attach proof indicating where certificate be used (e g. scholarship applications)."]},{id:5,Title:"Form 137",ProcessingDays:"7 working days",Conditions:["This document can only be requested once.","Must attach a request letter when submitting their application.","In case or loss, a notarized Affidavit of Loss must be submitted before a replacement can be issued."]},{id:6,Title:"Transcript of Records",ProcessingDays:"7 working days",Conditions:["Must be officially requested for transfer, or employment purposes.",{main:"The TOR can be requested once for the following purposes:",subtopics:["PRC Licensure Examination - must attach proof.","Employment - must attach proof.","Transfer - A request letter must be provided for processing.","Continuing studies - A request letter must be provided for processing."]},"Students who have recently graduated may request their TOR 20 days after the date of graduation."]},{id:7,Title:"Education Service Contracting (ESC) Certificate",ProcessingDays:"Half a working day",Conditions:["A request letter must be provided for processing."]}],s=r=>{e(o=>o.includes(r)?o.filter(a=>a!==r):[...o,r])};return i.jsx("div",{children:i.jsx("section",{className:"bg-[#161F55] w-full flex justify-center flex-col text-center relative",children:i.jsx("div",{className:"w-full max-w-md mx-auto mt-2 mb-32 flex flex-col items-center",children:t.map(r=>i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{onClick:()=>s(r.id),className:`flex justify-between items-center text-3xl w-[900px] p-4 border-[3px] cursor-pointer ${n.includes(r.id)?"bg-[#D9D9D9] text-[#161f55] font-LatoBold":"hover:bg-white hover:text-black hover:font-LatoBold "}`,children:[i.jsx("span",{className:"flex text-start",children:r.Title}),i.jsx("span",{className:"text-[35px]",children:n.includes(r.id)?"−":"+"})]}),n.includes(r.id)&&i.jsxs("div",{className:"text-white p-8 border-2 cursor-pointer text-start",children:[i.jsxs("p",{className:"text-[24px]  mb-4",children:[i.jsx("strong",{children:"Processing Days:"})," ",r.ProcessingDays]}),i.jsx("p",{className:"text-[24px]  mb-4",children:i.jsx("strong",{children:"Conditions:"})}),i.jsx("ul",{className:"list-disc list-inside",children:r.Conditions.map((o,a)=>i.jsx("li",{className:"text-[24px]",children:typeof o=="string"?i.jsx(i.Fragment,{children:o.includes("3 request per school year")?i.jsxs(i.Fragment,{children:["A maximum of"," ",i.jsx("strong",{children:"3 requests per school year"})," is allowed."]}):o.includes("once")?i.jsxs(i.Fragment,{children:["This document can only be requested"," ",i.jsx("strong",{children:"once"}),"."]}):o.includes("request letter")&&r.Title!=="Form 137"&&r.Title!=="Education Service Contracting (ESC) Certificate"?i.jsxs(i.Fragment,{children:["Must attach a ",i.jsx("strong",{children:"request letter"})," ","when submitting their application."]}):o.includes("notarized Affidavit of Loss")&&r.Title==="Form 137"?i.jsxs(i.Fragment,{children:["In case of loss, a"," ",i.jsx("strong",{children:"notarized Affidavit of Loss"})," ","must be submitted before a replacement can be issued."]}):o.includes("No limitations")?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"No limitations"})," on the number of requests."]}):o.includes("TOR 20 days after the date of graduation")?i.jsxs(i.Fragment,{children:["Students who have recently graduated may request their"," ",i.jsx("strong",{children:"TOR 20 days after the date of graduation"}),"."]}):o}):i.jsxs(i.Fragment,{children:[o.main,i.jsx("ul",{className:"list-disc list-inside ml-8",children:o.subtopics.map((c,u)=>i.jsx("li",{className:"text-[24px]",children:c.includes("PRC Licensure Examination")?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"PRC Licensure Examination"})," ","- must attach proof."]}):c.includes("Employment")?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"Employment"})," - must attach proof."]}):c.includes("Continuing studies")?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"Continuing studies"})," - A request letter must be provided for processing."]}):c.includes("Transfer")?i.jsxs(i.Fragment,{children:[i.jsx("strong",{children:"Transfer"})," - A request letter must be procided for processing."]}):c},u))})]})},a))})]})]},r.id))})})})},Wc=()=>i.jsxs("div",{className:"font-LatoRegular",children:[i.jsxs("div",{className:"relative w-full h-[900px] bg-cover bg-center flex items-center justify-center text-white text-center",style:{backgroundImage:"url('/assets/image/guidelines_bg.JPG')"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#F3BC62]/30 to-[#252F6A]/70 "}),i.jsxs("div",{className:"relative z-10 px-4 max-w-[800px] ",children:[i.jsxs("h1",{className:"text-[50px] font-LatoSemiBold uppercase tracking-widest",children:["La Verdad Christian ",i.jsx("br",{}),"College"]}),i.jsx("div",{className:"border-b-8 border-white my-4"}),i.jsx("p",{className:"text-[30px] ",children:"Promotes a holistic approach to education, emphasizing the development of the intellectual, emotional, social, and spiritual aspects of students."})]})]}),i.jsx(dl,{}),i.jsx("div",{className:"h-[650px] flex justify-center items-center flex-col bg-[#161F55] text-white ",children:i.jsxs("div",{className:"max-w-[1100px] tracking-[0.5px] text-center",children:[i.jsxs("h1",{className:"text-[35px] font-bold",children:["REQUESTING AND RELEASING OF DOCUMENTS ",i.jsx("br",{})," GENERAL GUIDELINES"]}),i.jsx("div",{className:"border-b-8 border-[#F3BC62] h-1 w-full my-4"}),i.jsx("p",{className:"text-[34px]",children:"To ensure efficient and orderly processing of document requests, the following regulations have been established for both Basic Education and Higher Education. Please be guided accordingly"})]})}),i.jsxs("div",{className:"py-20 min-h-screen max-w-[1200px] mx-auto",children:[i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"1"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsxs("p",{children:["All document requests"," ",i.jsx("span",{className:"font-extrabold",children:"must be submitted "})," to the Office of the Registrar via the designated request forms."]})})]}),i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"2"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsx("p",{children:"Processing times for documents exclude weekends and holidays."})})]}),i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"3"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsx("p",{children:"The Registrar reserves the right to extend processing times during peak periods such as enrollment and graduation seasons."})})]}),i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"4"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsx("p",{children:"It is recommended that requests be submitted well in advance of any deadlines to ensure timely processing."})})]}),i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"5"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsx("p",{children:"Students are required to meet specific requirements before their requests can be processed. Failure to comply with the requirements may result in delays or non-issuance of the requested documents."})})]}),i.jsxs("div",{className:"flex items-center mb-20 ",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"6"})}),i.jsx("div",{className:"ml-10 text-[#161F55] text-[30px] flex items-center justify-center",children:i.jsx("p",{children:"A student who is a minor cannot process their own document request. Only a parent or designated guardian can make the request on their behalf."})})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center justify-center  w-[110px] h-[110px] bg-[#161F55] text-white font-bold rounded-lg text-[60px] mr-5",children:"7"})}),i.jsxs("div",{className:"ml-10 text-[#161F55] text-[30px]",children:[i.jsxs("p",{children:["Students of legal age can process their own document requests. If a student or alumnus (if of legal age) cannot process the document personally, only an authorized person can transact on their behalf.",i.jsx("br",{})," The following must be provided:"]}),i.jsxs("ul",{className:"list-disc list-inside mt-8",children:[i.jsx("li",{children:"Authorization Letter indicating the name of the person authorized"}),i.jsx("li",{children:"Photocopy of Valid ID (front and back) of both the student/alumnus, with 3 signatures."}),i.jsx("li",{children:"Photocopy of Valid ID (front and back) of the authorized person processing the request, with 3 signatures."})]})]})]})]}),i.jsxs("div",{className:"bg-[#161F55] min-h-screen text-white",children:[i.jsxs("div",{className:"max-w-[1000px] mx-auto pt-[100px]",children:[i.jsx("h2",{className:"text-[36px] text-center ",children:"CONDITIONS AND PROCESSING DAY(S) OF EACH DOCUMENTS"}),i.jsx("div",{className:"w-[850px] h-2 bg-[#F3BC62] mx-auto my-8"})]}),i.jsx(ng,{})]})]}),sg=()=>i.jsx(i.Fragment,{children:i.jsxs("main",{className:"relative w-full h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("img",{src:"/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg",alt:"La Verdad Christian College",className:"w-full h-full object-cover opacity-90 drop-shadow-2xl"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#F3BC62]/30 to-[#252F6A]/80"})]}),i.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center p-4 sm:p-6",children:[i.jsx("img",{src:"/assets/image/LV_logo.png",alt:"LVCC Logo",className:"w-10 h-10 sm:w-14 sm:h-14 md:w-20 md:h-20 lg:w-24 lg:h-24 mr-2"}),i.jsxs("div",{className:"flex items-baseline tracking-widest",children:[i.jsx("span",{className:"text-Bbackground text-lg sm:text-xl md:text-2xl lg:text-3xl font-regular font-thin",children:"LVCC"}),i.jsx("span",{className:"text-Bbackground text-lg sm:text-xl md:text-2xl lg:text-3xl font-LatoSemiBold pl-1 sm:pl-2",children:"AppointEase"})]})]}),i.jsx("div",{className:"flex-grow flex flex-col items-center justify-center text-center px-4",children:i.jsxs("div",{className:"relative flex flex-col items-center max-w-7xl mx-auto",children:[i.jsxs("h1",{className:"text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-[45px] font-LatoBold uppercase  tracking-[10px] leading-loose",children:["LA VERDAD CHRISTIAN ",i.jsx("br",{})," COLLEGE"]}),i.jsx("div",{className:"relative w-full flex justify-center my-4",children:i.jsx("span",{className:"w-11/12 sm:w-full max-w-5xl h-2 sm:h-2 bg-[#EEF2F7]"})}),i.jsx("p",{className:"text-Fwhite text-xs sm:text-sm md:text-base lg:text-xl xl:text-2xl max-w-xs sm:max-w-lg md:max-w-xl lg:max-w-2xl leading-relaxed  font-LatoRegular",children:"La Verdad Christian School provides students a high-quality and carefully defined educational program emphasizing Christian values, various skills, and vast creative activities."}),i.jsx(dt,{to:"/home/announcement",className:"mt-6 sm:mt-8 bg-LBackground hover:bg-blue-800 text-white py-2 px-4 sm:py-3 sm:px-6 rounded-md shadow-lg text-sm sm:text-base transition-colors duration-200 w-40 h-[50px] tracking-[2px]",children:"Get Started"})]})})]})]})}),Kc=()=>i.jsx(i.Fragment,{children:i.jsxs("section",{className:"mx-auto bg-[#161F55] flex flex-col items-center",children:[i.jsxs("div",{className:"mt-20  ",children:[i.jsx("h2",{className:"text-[48px] font-LatoBold text-Bbackground tracking-widest relative mb-8 text-center ",children:"ABOUT US"}),i.jsx("div",{className:"w-[400px] h-1 bg-[#F3BC62] mx-auto mb-8"}),i.jsxs("p",{className:"font-LatoRegular text-Bbackground text-[35px] tracking-widest w-[1190px] text-center",children:["The La Verdad Christian College or LVCC is a private non-stock, non-sectarian educational institution established in Apalit, Pampanga, Philippines. It is the first private school in the Philippines that",i.jsx("span",{className:" font-LatoBold text-Gold mx-2",children:"GRANTS FULL SCHOLARSHIP PROGRAM"}),"to deserving students by providing tuition-free education and no miscellaneous fees. It is one of the best schools in Pampanga, up to regional and national levels."]})]}),i.jsx("div",{className:" mt-40 relative flex flex-col items-center w-full",children:i.jsxs("div",{className:" relative w-full",children:[i.jsx("img",{src:"/assets/image/about.png",alt:"",className:" w-full max-w[1440px] h-[750px] mx-auto object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#F3BC62]/20 to-[#252F6A]/30"}),i.jsx("h2",{className:"text-[48px] font-LatoBold text-Bbackground tracking-widest mb-8  justify-center flex absolute inset-[35%] ",children:"VISION"}),i.jsx("div",{className:"w-[400px] h-1 bg-[#F3BC62] mx-auto absolute inset-x-0 top-[50%] "}),i.jsx("p",{className:" absolute inset-x-0 top-[57%] text-[35px] font-LatoSemiBold text-Bbackground text-center tracking-widest w-[60rem] m-auto",children:"The institution that ensures quality learning and biblical moral standards."})]})}),i.jsxs("div",{className:"mt-32 h-[550px]",children:[i.jsx("h2",{className:"text-[48px] font-LatoBold text-Bbackground tracking-widest relative mb-8 text-center ",children:"MISSION"}),i.jsx("div",{className:"w-[400px] h-1 bg-[#F3BC62] mx-auto mb-8"}),i.jsx("p",{className:"font-LatoSemiBold text-Bbackground text-[35px] tracking-widest w-[986px] text-center",children:"To be the frontrunner in providing academic excellence and morally upright principles."})]})]})});var Yc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},rg=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[s++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],a=n[t++],c=n[t++],u=((r&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const o=n[t++],a=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},lh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const o=n[r],a=r+1<n.length,c=a?n[r+1]:0,u=r+2<n.length,d=u?n[r+2]:0,f=o>>2,m=(o&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;u||(v=64,a||(g=64)),s.push(t[f],t[m],t[g],t[v])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ah(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rg(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const d=r<n.length?t[n.charAt(r)]:64;++r;const m=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||d==null||m==null)throw new ig;const g=o<<2|c>>4;if(s.push(g),d!==64){const v=c<<4&240|d>>2;if(s.push(v),m!==64){const w=d<<6&192|m;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ig extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const og=function(n){const e=ah(n);return lh.encodeByteArray(e,!0)},zi=function(n){return og(n).replace(/\./g,"")},ch=function(n){try{return lh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=()=>ag().__FIREBASE_DEFAULTS__,cg=()=>{if(typeof process>"u"||typeof Yc>"u")return;const n=Yc.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ug=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ch(n[1]);return e&&JSON.parse(e)},ho=()=>{try{return lg()||cg()||ug()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uh=n=>{var e,t;return(t=(e=ho())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},dg=n=>{const e=uh(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},dh=()=>{var n;return(n=ho())===null||n===void 0?void 0:n.config},hh=n=>{var e;return(e=ho())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zi(JSON.stringify(t)),zi(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function mg(){var n;const e=(n=ho())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gg(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xg(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vg(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bg(){return!mg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wg(){try{return typeof indexedDB=="object"}catch{return!1}}function _g(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="FirebaseError";class _n extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Eg,Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}}class Mr{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?Ng(o,s):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new _n(r,c,s)}}function Ng(n,e){return n.replace(Sg,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Sg=/\{\$([^}]+)}/g;function Tg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hi(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const o=n[r],a=e[r];if(Jc(o)&&Jc(a)){if(!Hi(o,a))return!1}else if(o!==a)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function Jc(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ig(n,e){const t=new Cg(n,e);return t.subscribe.bind(t)}class Cg{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");jg(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=ta),r.error===void 0&&(r.error=ta),r.complete===void 0&&(r.complete=ta);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jg(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ta(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new hg;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pg(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});s.resolve(o)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);s===c&&a.resolve(r)}return r}onInit(e,t){var s;const r=this.normalizeInstanceIdentifier(t),o=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Rg(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rg(n){return n===ns?void 0:n}function Pg(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ag(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ee||(Ee={}));const Dg={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Og=Ee.INFO,Lg={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Fg=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=Lg[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hl{constructor(e){this.name=e,this._logLevel=Og,this._logHandler=Fg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const Mg=(n,e)=>e.some(t=>n instanceof t);let Qc,Xc;function Vg(){return Qc||(Qc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bg(){return Xc||(Xc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fh=new WeakMap,Na=new WeakMap,ph=new WeakMap,na=new WeakMap,fl=new WeakMap;function Ug(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Un(n.result)),r()},a=()=>{s(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&fh.set(t,n)}).catch(()=>{}),fl.set(e,n),e}function $g(n){if(Na.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Na.set(n,e)}let Sa={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Na.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ph.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Un(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qg(n){Sa=n(Sa)}function zg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(sa(this),e,...t);return ph.set(s,e.sort?e.sort():[e]),Un(s)}:Bg().includes(n)?function(...e){return n.apply(sa(this),e),Un(fh.get(this))}:function(...e){return Un(n.apply(sa(this),e))}}function Hg(n){return typeof n=="function"?zg(n):(n instanceof IDBTransaction&&$g(n),Mg(n,Vg())?new Proxy(n,Sa):n)}function Un(n){if(n instanceof IDBRequest)return Ug(n);if(na.has(n))return na.get(n);const e=Hg(n);return e!==n&&(na.set(n,e),fl.set(e,n)),e}const sa=n=>fl.get(n);function Gg(n,e,{blocked:t,upgrade:s,blocking:r,terminated:o}={}){const a=indexedDB.open(n,e),c=Un(a);return s&&a.addEventListener("upgradeneeded",u=>{s(Un(a.result),u.oldVersion,u.newVersion,Un(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),r&&u.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Wg=["get","getKey","getAll","getAllKeys","count"],Kg=["put","add","delete","clear"],ra=new Map;function Zc(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ra.get(e))return ra.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=Kg.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Wg.includes(t)))return;const o=async function(a,...c){const u=this.transaction(a,r?"readwrite":"readonly");let d=u.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),r&&u.done]))[0]};return ra.set(e,o),o}qg(n=>({...n,get:(e,t,s)=>Zc(e,t)||n.get(e,t,s),has:(e,t)=>!!Zc(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Jg(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Jg(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ta="@firebase/app",eu="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new hl("@firebase/app"),Qg="@firebase/app-compat",Xg="@firebase/analytics-compat",Zg="@firebase/analytics",ex="@firebase/app-check-compat",tx="@firebase/app-check",nx="@firebase/auth",sx="@firebase/auth-compat",rx="@firebase/database",ix="@firebase/data-connect",ox="@firebase/database-compat",ax="@firebase/functions",lx="@firebase/functions-compat",cx="@firebase/installations",ux="@firebase/installations-compat",dx="@firebase/messaging",hx="@firebase/messaging-compat",fx="@firebase/performance",px="@firebase/performance-compat",mx="@firebase/remote-config",gx="@firebase/remote-config-compat",xx="@firebase/storage",yx="@firebase/storage-compat",vx="@firebase/firestore",bx="@firebase/vertexai",wx="@firebase/firestore-compat",_x="firebase",Ex="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]",Nx={[Ta]:"fire-core",[Qg]:"fire-core-compat",[Zg]:"fire-analytics",[Xg]:"fire-analytics-compat",[tx]:"fire-app-check",[ex]:"fire-app-check-compat",[nx]:"fire-auth",[sx]:"fire-auth-compat",[rx]:"fire-rtdb",[ix]:"fire-data-connect",[ox]:"fire-rtdb-compat",[ax]:"fire-fn",[lx]:"fire-fn-compat",[cx]:"fire-iid",[ux]:"fire-iid-compat",[dx]:"fire-fcm",[hx]:"fire-fcm-compat",[fx]:"fire-perf",[px]:"fire-perf-compat",[mx]:"fire-rc",[gx]:"fire-rc-compat",[xx]:"fire-gcs",[yx]:"fire-gcs-compat",[vx]:"fire-fst",[wx]:"fire-fst-compat",[bx]:"fire-vertex","fire-js":"fire-js",[_x]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new Map,Sx=new Map,Ca=new Map;function tu(n,e){try{n.container.addComponent(e)}catch(t){vn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ms(n){const e=n.name;if(Ca.has(e))return vn.debug(`There were multiple attempts to register component ${e}.`),!1;Ca.set(e,n);for(const t of Gi.values())tu(t,n);for(const t of Sx.values())tu(t,n);return!0}function pl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mn(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new Mr("app","Firebase",Tx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=Ex;function mh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ia,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(t||(t=dh()),!t)throw $n.create("no-options");const o=Gi.get(r);if(o){if(Hi(t,o.options)&&Hi(s,o.config))return o;throw $n.create("duplicate-app",{appName:r})}const a=new kg(r);for(const u of Ca.values())a.addComponent(u);const c=new Ix(t,s,a);return Gi.set(r,c),c}function gh(n=Ia){const e=Gi.get(n);if(!e&&n===Ia&&dh())return mh();if(!e)throw $n.create("no-app",{appName:n});return e}function qn(n,e,t){var s;let r=(s=Nx[n])!==null&&s!==void 0?s:n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vn.warn(c.join(" "));return}Ms(new hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="firebase-heartbeat-database",jx=1,Tr="firebase-heartbeat-store";let ia=null;function xh(){return ia||(ia=Gg(Cx,jx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tr)}catch(t){console.warn(t)}}}}).catch(n=>{throw $n.create("idb-open",{originalErrorMessage:n.message})})),ia}async function Ax(n){try{const t=(await xh()).transaction(Tr),s=await t.objectStore(Tr).get(yh(n));return await t.done,s}catch(e){if(e instanceof _n)vn.warn(e.message);else{const t=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vn.warn(t.message)}}}async function nu(n,e){try{const s=(await xh()).transaction(Tr,"readwrite");await s.objectStore(Tr).put(e,yh(n)),await s.done}catch(t){if(t instanceof _n)vn.warn(t.message);else{const s=$n.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vn.warn(s.message)}}}function yh(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=1024,Px=30*24*60*60*1e3;class kx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ox(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=su();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=Px}),this._storage.overwrite(this._heartbeatsCache))}catch(s){vn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=su(),{heartbeatsToSend:s,unsentEntries:r}=Dx(this._heartbeatsCache.heartbeats),o=zi(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vn.warn(t),""}}}function su(){return new Date().toISOString().substring(0,10)}function Dx(n,e=Rx){const t=[];let s=n.slice();for(const r of n){const o=t.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),ru(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ru(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Ox{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wg()?_g().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ax(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return nu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return nu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ru(n){return zi(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(n){Ms(new hs("platform-logger",e=>new Yg(e),"PRIVATE")),Ms(new hs("heartbeat",e=>new kx(e),"PRIVATE")),qn(Ta,eu,n),qn(Ta,eu,"esm2017"),qn("fire-js","")}Lx("");var Fx="firebase",Mx="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(Fx,Mx,"app");function ml(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function vh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vx=vh,bh=new Mr("auth","Firebase",vh());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new hl("@firebase/auth");function Bx(n,...e){Wi.logLevel<=Ee.WARN&&Wi.warn(`Auth (${Js}): ${n}`,...e)}function ji(n,...e){Wi.logLevel<=Ee.ERROR&&Wi.error(`Auth (${Js}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n,...e){throw xl(n,...e)}function $t(n,...e){return xl(n,...e)}function gl(n,e,t){const s=Object.assign(Object.assign({},Vx()),{[e]:t});return new Mr("auth","Firebase",s).create(e,{appName:n.name})}function os(n){return gl(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ux(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Zt(n,"argument-error"),gl(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xl(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return bh.create(n,...e)}function fe(n,e,...t){if(!n)throw xl(e,...t)}function gn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ji(e),new Error(e)}function bn(n,e){n||gn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $x(){return iu()==="http:"||iu()==="https:"}function iu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($x()||xg()||"connection"in navigator)?navigator.onLine:!0}function zx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){this.shortDelay=e,this.longDelay=t,bn(t>e,"Short delay should be less than long delay!"),this.isMobile=pg()||yg()}get(){return qx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n,e){bn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Br(3e4,6e4);function vl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Qs(n,e,t,s,r={}){return _h(n,r,async()=>{let o={},a={};s&&(e==="GET"?a=s:o={body:JSON.stringify(s)});const c=Vr(Object.assign({key:n.config.apiKey},a)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:u},o);return gg()||(d.referrerPolicy="no-referrer"),wh.fetch()(Eh(n,n.config.apiHost,t,c),d)})}async function _h(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},Hx),e);try{const r=new Kx(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw fi(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fi(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw fi(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw fi(n,"user-disabled",a);const f=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw gl(n,f,d);Zt(n,f)}}catch(r){if(r instanceof _n)throw r;Zt(n,"network-request-failed",{message:String(r)})}}async function Wx(n,e,t,s,r={}){const o=await Qs(n,e,t,s,r);return"mfaPendingCredential"in o&&Zt(n,"multi-factor-auth-required",{_serverResponse:o}),o}function Eh(n,e,t,s){const r=`${e}${t}?${s}`;return n.config.emulator?yl(n.config,r):`${n.config.apiScheme}://${r}`}class Kx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s($t(this.auth,"network-request-failed")),Gx.get())})}}function fi(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=$t(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(n,e){return Qs(n,"POST","/v1/accounts:delete",e)}async function Nh(n,e){return Qs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jx(n,e=!1){const t=bs(n),s=await t.getIdToken(e),r=bl(s);fe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:wr(oa(r.auth_time)),issuedAtTime:wr(oa(r.iat)),expirationTime:wr(oa(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function oa(n){return Number(n)*1e3}function bl(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ji("JWT malformed, contained fewer than 3 sections"),null;try{const r=ch(t);return r?JSON.parse(r):(ji("Failed to decode base64 JWT payload"),null)}catch(r){return ji("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ou(n){const e=bl(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ir(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof _n&&Qx(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Qx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(n){var e;const t=n.auth,s=await n.getIdToken(),r=await Ir(n,Nh(t,{idToken:s}));fe(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Sh(o.providerUserInfo):[],c=e0(n.providerData,a),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Aa(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function Zx(n){const e=bs(n);await Ki(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e0(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Sh(n){return n.map(e=>{var{providerId:t}=e,s=ml(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t0(n,e){const t=await _h(n,{},async()=>{const s=Vr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,a=Eh(n,r,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",wh.fetch()(a,{method:"POST",headers:c,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function n0(n,e){return Qs(n,"POST","/v2/accounts:revokeToken",vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ou(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=ou(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:o}=await t0(e,t);this.updateTokensAndExpiration(s,r,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:o}=t,a=new Rs;return s&&(fe(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(fe(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(fe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rs,this.toJSON())}_performRefresh(){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xn{constructor(e){var{uid:t,auth:s,stsTokenManager:r}=e,o=ml(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Aa(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ir(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Jx(this,e)}reload(){return Zx(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ki(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Ir(this,Yx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,r,o,a,c,u,d,f;const m=(s=t.displayName)!==null&&s!==void 0?s:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(a=t.photoURL)!==null&&a!==void 0?a:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,x=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,I=(d=t.createdAt)!==null&&d!==void 0?d:void 0,R=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:_,emailVerified:P,isAnonymous:O,providerData:D,stsTokenManager:y}=t;fe(_&&y,e,"internal-error");const b=Rs.fromJSON(this.name,y);fe(typeof _=="string",e,"internal-error"),Dn(m,e.name),Dn(g,e.name),fe(typeof P=="boolean",e,"internal-error"),fe(typeof O=="boolean",e,"internal-error"),Dn(v,e.name),Dn(w,e.name),Dn(N,e.name),Dn(x,e.name),Dn(I,e.name),Dn(R,e.name);const E=new xn({uid:_,auth:e,email:g,emailVerified:P,displayName:m,isAnonymous:O,photoURL:w,phoneNumber:v,tenantId:N,stsTokenManager:b,createdAt:I,lastLoginAt:R});return D&&Array.isArray(D)&&(E.providerData=D.map(j=>Object.assign({},j))),x&&(E._redirectEventId=x),E}static async _fromIdTokenResponse(e,t,s=!1){const r=new Rs;r.updateFromServerResponse(t);const o=new xn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ki(o),o}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Sh(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new Rs;c.updateFromIdToken(s);const u=new xn({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Aa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new Map;function yn(n){bn(n instanceof Function,"Expected a class definition");let e=au.get(n);return e?(bn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,au.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Th.type="NONE";const lu=Th;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,e,t){return`firebase:${n}:${e}:${t}`}class Ps{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:o}=this.auth;this.fullUserKey=Ai(this.userKey,r.apiKey,o),this.fullPersistenceKey=Ai("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ps(yn(lu),e,s);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||yn(lu);const a=Ai(s,e.config.apiKey,e.name);let c=null;for(const d of t)try{const f=await d._get(a);if(f){const m=xn._fromJSON(e,f);d!==o&&(c=m),o=d;break}}catch{}const u=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Ps(o,e,s):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new Ps(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ah(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ih(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ph(e))return"Blackberry";if(kh(e))return"Webos";if(Ch(e))return"Safari";if((e.includes("chrome/")||jh(e))&&!e.includes("edge/"))return"Chrome";if(Rh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Ih(n=vt()){return/firefox\//i.test(n)}function Ch(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jh(n=vt()){return/crios\//i.test(n)}function Ah(n=vt()){return/iemobile/i.test(n)}function Rh(n=vt()){return/android/i.test(n)}function Ph(n=vt()){return/blackberry/i.test(n)}function kh(n=vt()){return/webos/i.test(n)}function wl(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function s0(n=vt()){var e;return wl(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r0(){return vg()&&document.documentMode===10}function Dh(n=vt()){return wl(n)||Rh(n)||kh(n)||Ph(n)||/windows phone/i.test(n)||Ah(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n,e=[]){let t;switch(n){case"Browser":t=cu(vt());break;case"Worker":t=`${cu(vt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Js}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((a,c)=>{try{const u=e(o);a(u)}catch(u){c(u)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0(n,e={}){return Qs(n,"GET","/v2/passwordPolicy",vl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=6;class l0{constructor(e){var t,s,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:a0,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,r,o,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(s=u.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uu(this),this.idTokenSubscription=new uu(this),this.beforeStateQueue=new i0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yn(t)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nh(this,{idToken:e}),s=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ki(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(os(this));const t=e?bs(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o0(this),t=new l0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await n0(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yn(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[yn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,s,r);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Bx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fo(n){return bs(n)}class uu{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ig(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u0(n){_l=n}function d0(n){return _l.loadJS(n)}function h0(){return _l.gapiScript}function f0(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e){const t=pl(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(Hi(o,e??{}))return r;Zt(r,"already-initialized")}return t.initialize({options:e})}function m0(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(yn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function g0(n,e,t){const s=fo(n);fe(s._canInitEmulator,s,"emulator-config-failed"),fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,o=Lh(e),{host:a,port:c}=x0(e),u=c===null?"":`:${c}`;s.config.emulator={url:`${o}//${a}${u}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),y0()}function Lh(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function x0(n){const e=Lh(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const o=r[1];return{host:o,port:du(s.substr(o.length+1))}}else{const[o,a]=s.split(":");return{host:o,port:du(a)}}}function du(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function y0(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gn("not implemented")}_getIdTokenResponse(e){return gn("not implemented")}_linkToIdToken(e,t){return gn("not implemented")}_getReauthenticationResolver(e){return gn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(n,e){return Wx(n,"POST","/v1/accounts:signInWithIdp",vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="http://localhost";class fs extends Fh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=t,o=ml(t,["providerId","signInMethod"]);if(!s||!r)return null;const a=new fs(s,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return ks(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ks(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ks(e,t)}buildRequest(){const e={requestUri:v0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vr(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends El{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Ur{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ln.credential(e.oauthAccessToken)}catch{return null}}}Ln.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ln.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends Ur{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fs._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return pn.credential(t,s)}catch{return null}}}pn.GOOGLE_SIGN_IN_METHOD="google.com";pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends Ur{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com";Fn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Ur{constructor(){super("twitter.com")}static credential(e,t){return fs._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Mn.credential(t,s)}catch{return null}}}Mn.TWITTER_SIGN_IN_METHOD="twitter.com";Mn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const o=await xn._fromIdTokenResponse(e,s,r),a=hu(s);return new Vs({user:o,providerId:a,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=hu(s);return new Vs({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function hu(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends _n{constructor(e,t,s,r){var o;super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Yi.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new Yi(e,t,s,r)}}function Mh(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yi._fromErrorAndOperation(n,o,e,s):o})}async function b0(n,e,t=!1){const s=await Ir(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vs._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(n,e,t=!1){const{auth:s}=n;if(mn(s.app))return Promise.reject(os(s));const r="reauthenticate";try{const o=await Ir(n,Mh(s,r,e,n),t);fe(o.idToken,s,"internal-error");const a=bl(o.idToken);fe(a,s,"internal-error");const{sub:c}=a;return fe(n.uid===c,s,"user-mismatch"),Vs._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Zt(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(n,e,t=!1){if(mn(n.app))return Promise.reject(os(n));const s="signIn",r=await Mh(n,s,e),o=await Vs._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(o.user),o}function E0(n,e,t,s){return bs(n).onIdTokenChanged(e,t,s)}function N0(n,e,t){return bs(n).beforeAuthStateChanged(e,t)}const Ji="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ji,"1"),this.storage.removeItem(Ji),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=1e3,T0=10;class Bh extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!t&&this.localCache[s]===a||this.notifyListeners(s,a)},o=this.storage.getItem(s);r0()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,T0):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},S0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bh.type="LOCAL";const I0=Bh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Uh.type="SESSION";const $h=Uh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new po(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:o}=t.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(a).map(async d=>d(t.origin,o)),u=await C0(c);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}po.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const d=Nl("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return window}function A0(n){Jt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}async function R0(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P0(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function k0(){return qh()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="firebaseLocalStorageDb",D0=1,Qi="firebaseLocalStorage",Hh="fbase_key";class $r{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mo(n,e){return n.transaction([Qi],e?"readwrite":"readonly").objectStore(Qi)}function O0(){const n=indexedDB.deleteDatabase(zh);return new $r(n).toPromise()}function Ra(){const n=indexedDB.open(zh,D0);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Qi,{keyPath:Hh})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Qi)?e(s):(s.close(),await O0(),e(await Ra()))})})}async function fu(n,e,t){const s=mo(n,!0).put({[Hh]:e,value:t});return new $r(s).toPromise()}async function L0(n,e){const t=mo(n,!1).get(e),s=await new $r(t).toPromise();return s===void 0?null:s.value}function pu(n,e){const t=mo(n,!0).delete(e);return new $r(t).toPromise()}const F0=800,M0=3;class Gh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ra(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>M0)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=po._getInstance(k0()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await R0(),!this.activeServiceWorker)return;this.sender=new j0(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ra();return await fu(e,Ji,"1"),await pu(e,Ji),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>fu(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>L0(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=mo(r,!1).getAll();return new $r(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gh.type="LOCAL";const V0=Gh;new Br(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n,e){return e?yn(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Fh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ks(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ks(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function B0(n){return _0(n.auth,new Sl(n),n.bypassAuthState)}function U0(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),w0(t,new Sl(n),n.bypassAuthState)}async function $0(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),b0(t,new Sl(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,s,r,o=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B0;case"linkViaPopup":case"linkViaRedirect":return $0;case"reauthViaPopup":case"reauthViaRedirect":return U0;default:Zt(this.auth,"internal-error")}}resolve(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Br(2e3,1e4);async function Yh(n,e,t){if(mn(n.app))return Promise.reject($t(n,"operation-not-supported-in-this-environment"));const s=fo(n);Ux(n,e,El);const r=Wh(s,t);return new ss(s,"signInViaPopup",e,r).executeNotNull()}class ss extends Kh{constructor(e,t,s,r,o){super(e,t,r,o),this.provider=s,this.authWindow=null,this.pollId=null,ss.currentPopupAction&&ss.currentPopupAction.cancel(),ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){bn(this.filter.length===1,"Popup operations only handle one event");const e=Nl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q0.get())};e()}}ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="pendingRedirect",Ri=new Map;class H0 extends Kh{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ri.get(this.auth._key());if(!e){try{const s=await G0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ri.set(this.auth._key(),e)}return this.bypassAuthState||Ri.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G0(n,e){const t=Y0(e),s=K0(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function W0(n,e){Ri.set(n._key(),e)}function K0(n){return yn(n._redirectPersistence)}function Y0(n){return Ai(z0,n.config.apiKey,n.name)}async function J0(n,e,t=!1){if(mn(n.app))return Promise.reject(os(n));const s=fo(n),r=Wh(s,e),a=await new H0(s,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=10*60*1e3;class X0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z0(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Jh(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError($t(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q0&&this.cachedEventUids.clear(),this.cachedEventUids.has(mu(e))}saveEventToCache(e){this.cachedEventUids.add(mu(e)),this.lastProcessedEventTime=Date.now()}}function mu(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Jh({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Z0(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jh(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(n,e={}){return Qs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ny=/^https?/;async function sy(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ey(n);for(const t of e)try{if(ry(t))return}catch{}Zt(n,"unauthorized-domain")}function ry(n){const e=ja(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===s}if(!ny.test(t))return!1;if(ty.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Br(3e4,6e4);function gu(){const n=Jt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oy(n){return new Promise((e,t)=>{var s,r,o;function a(){gu(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gu(),t($t(n,"network-request-failed"))},timeout:iy.get()})}if(!((r=(s=Jt().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Jt().gapi)===null||o===void 0)&&o.load)a();else{const c=f0("iframefcb");return Jt()[c]=()=>{gapi.load?a():t($t(n,"network-request-failed"))},d0(`${h0()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Pi=null,e})}let Pi=null;function ay(n){return Pi=Pi||oy(n),Pi}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=new Br(5e3,15e3),cy="__/auth/iframe",uy="emulator/auth/iframe",dy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fy(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?yl(e,uy):`https://${n.config.authDomain}/${cy}`,s={apiKey:e.apiKey,appName:n.name,v:Js},r=hy.get(n.config.apiHost);r&&(s.eid=r);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Vr(s).slice(1)}`}async function py(n){const e=await ay(n),t=Jt().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:fy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dy,dontclear:!0},s=>new Promise(async(r,o)=>{await s.restyle({setHideOnLeave:!1});const a=$t(n,"network-request-failed"),c=Jt().setTimeout(()=>{o(a)},ly.get());function u(){Jt().clearTimeout(c),r(s)}s.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gy=500,xy=600,yy="_blank",vy="http://localhost";class xu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function by(n,e,t,s=gy,r=xy){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const u=Object.assign(Object.assign({},my),{width:s.toString(),height:r.toString(),top:o,left:a}),d=vt().toLowerCase();t&&(c=jh(d)?yy:t),Ih(d)&&(e=e||vy,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[v,w])=>`${g}${v}=${w},`,"");if(s0(d)&&c!=="_self")return wy(e||"",c),new xu(null);const m=window.open(e||"",c,f);fe(m,n,"popup-blocked");try{m.focus()}catch{}return new xu(m)}function wy(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="__/auth/handler",Ey="emulator/auth/handler",Ny=encodeURIComponent("fac");async function yu(n,e,t,s,r,o){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Js,eventId:r};if(e instanceof El){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Tg(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof Ur){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await n._getAppCheckToken(),d=u?`#${Ny}=${encodeURIComponent(u)}`:"";return`${Sy(n)}?${Vr(c).slice(1)}${d}`}function Sy({config:n}){return n.emulator?yl(n,Ey):`https://${n.authDomain}/${_y}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="webStorageSupport";class Ty{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$h,this._completeRedirectFn=J0,this._overrideRedirectResult=W0}async _openPopup(e,t,s,r){var o;bn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await yu(e,t,s,ja(),r);return by(e,a,Nl())}async _openRedirect(e,t,s,r){await this._originValidation(e);const o=await yu(e,t,s,ja(),r);return A0(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(bn(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await py(e),s=new X0(e);return t.register("authEvent",r=>(fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(aa,{type:aa},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[aa];a!==void 0&&t(!!a),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dh()||Ch()||wl()}}const Iy=Ty;var vu="@firebase/auth",bu="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ay(n){Ms(new hs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=s.options;fe(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oh(n)},d=new c0(s,r,o,u);return m0(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ms(new hs("auth-internal",e=>{const t=fo(e.getProvider("auth").getImmediate());return(s=>new Cy(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(vu,bu,jy(n)),qn(vu,bu,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=5*60,Py=hh("authIdTokenMaxAge")||Ry;let wu=null;const ky=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Py)return;const r=t==null?void 0:t.token;wu!==r&&(wu=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Dy(n=gh()){const e=pl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=p0(n,{popupRedirectResolver:Iy,persistence:[V0,I0,$h]}),s=hh("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const a=ky(o.toString());N0(t,a,()=>a(t.currentUser)),E0(t,c=>a(c))}}const r=uh("auth");return r&&g0(t,`http://${r}`),t}function Oy(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}u0({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const o=$t("internal-error");o.customData=r,t(o)},s.type="text/javascript",s.charset="UTF-8",Oy().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ay("Browser");var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,Qh;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,b){function E(){}E.prototype=b.prototype,y.D=b.prototype,y.prototype=new E,y.prototype.constructor=y,y.C=function(j,A,k){for(var S=Array(arguments.length-2),V=2;V<arguments.length;V++)S[V-2]=arguments[V];return b.prototype[A].apply(j,S)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(y,b,E){E||(E=0);var j=Array(16);if(typeof b=="string")for(var A=0;16>A;++A)j[A]=b.charCodeAt(E++)|b.charCodeAt(E++)<<8|b.charCodeAt(E++)<<16|b.charCodeAt(E++)<<24;else for(A=0;16>A;++A)j[A]=b[E++]|b[E++]<<8|b[E++]<<16|b[E++]<<24;b=y.g[0],E=y.g[1],A=y.g[2];var k=y.g[3],S=b+(k^E&(A^k))+j[0]+3614090360&4294967295;b=E+(S<<7&4294967295|S>>>25),S=k+(A^b&(E^A))+j[1]+3905402710&4294967295,k=b+(S<<12&4294967295|S>>>20),S=A+(E^k&(b^E))+j[2]+606105819&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(b^A&(k^b))+j[3]+3250441966&4294967295,E=A+(S<<22&4294967295|S>>>10),S=b+(k^E&(A^k))+j[4]+4118548399&4294967295,b=E+(S<<7&4294967295|S>>>25),S=k+(A^b&(E^A))+j[5]+1200080426&4294967295,k=b+(S<<12&4294967295|S>>>20),S=A+(E^k&(b^E))+j[6]+2821735955&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(b^A&(k^b))+j[7]+4249261313&4294967295,E=A+(S<<22&4294967295|S>>>10),S=b+(k^E&(A^k))+j[8]+1770035416&4294967295,b=E+(S<<7&4294967295|S>>>25),S=k+(A^b&(E^A))+j[9]+2336552879&4294967295,k=b+(S<<12&4294967295|S>>>20),S=A+(E^k&(b^E))+j[10]+4294925233&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(b^A&(k^b))+j[11]+2304563134&4294967295,E=A+(S<<22&4294967295|S>>>10),S=b+(k^E&(A^k))+j[12]+1804603682&4294967295,b=E+(S<<7&4294967295|S>>>25),S=k+(A^b&(E^A))+j[13]+4254626195&4294967295,k=b+(S<<12&4294967295|S>>>20),S=A+(E^k&(b^E))+j[14]+2792965006&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(b^A&(k^b))+j[15]+1236535329&4294967295,E=A+(S<<22&4294967295|S>>>10),S=b+(A^k&(E^A))+j[1]+4129170786&4294967295,b=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(b^E))+j[6]+3225465664&4294967295,k=b+(S<<9&4294967295|S>>>23),S=A+(b^E&(k^b))+j[11]+643717713&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^b&(A^k))+j[0]+3921069994&4294967295,E=A+(S<<20&4294967295|S>>>12),S=b+(A^k&(E^A))+j[5]+3593408605&4294967295,b=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(b^E))+j[10]+38016083&4294967295,k=b+(S<<9&4294967295|S>>>23),S=A+(b^E&(k^b))+j[15]+3634488961&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^b&(A^k))+j[4]+3889429448&4294967295,E=A+(S<<20&4294967295|S>>>12),S=b+(A^k&(E^A))+j[9]+568446438&4294967295,b=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(b^E))+j[14]+3275163606&4294967295,k=b+(S<<9&4294967295|S>>>23),S=A+(b^E&(k^b))+j[3]+4107603335&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^b&(A^k))+j[8]+1163531501&4294967295,E=A+(S<<20&4294967295|S>>>12),S=b+(A^k&(E^A))+j[13]+2850285829&4294967295,b=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(b^E))+j[2]+4243563512&4294967295,k=b+(S<<9&4294967295|S>>>23),S=A+(b^E&(k^b))+j[7]+1735328473&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^b&(A^k))+j[12]+2368359562&4294967295,E=A+(S<<20&4294967295|S>>>12),S=b+(E^A^k)+j[5]+4294588738&4294967295,b=E+(S<<4&4294967295|S>>>28),S=k+(b^E^A)+j[8]+2272392833&4294967295,k=b+(S<<11&4294967295|S>>>21),S=A+(k^b^E)+j[11]+1839030562&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^b)+j[14]+4259657740&4294967295,E=A+(S<<23&4294967295|S>>>9),S=b+(E^A^k)+j[1]+2763975236&4294967295,b=E+(S<<4&4294967295|S>>>28),S=k+(b^E^A)+j[4]+1272893353&4294967295,k=b+(S<<11&4294967295|S>>>21),S=A+(k^b^E)+j[7]+4139469664&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^b)+j[10]+3200236656&4294967295,E=A+(S<<23&4294967295|S>>>9),S=b+(E^A^k)+j[13]+681279174&4294967295,b=E+(S<<4&4294967295|S>>>28),S=k+(b^E^A)+j[0]+3936430074&4294967295,k=b+(S<<11&4294967295|S>>>21),S=A+(k^b^E)+j[3]+3572445317&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^b)+j[6]+76029189&4294967295,E=A+(S<<23&4294967295|S>>>9),S=b+(E^A^k)+j[9]+3654602809&4294967295,b=E+(S<<4&4294967295|S>>>28),S=k+(b^E^A)+j[12]+3873151461&4294967295,k=b+(S<<11&4294967295|S>>>21),S=A+(k^b^E)+j[15]+530742520&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^b)+j[2]+3299628645&4294967295,E=A+(S<<23&4294967295|S>>>9),S=b+(A^(E|~k))+j[0]+4096336452&4294967295,b=E+(S<<6&4294967295|S>>>26),S=k+(E^(b|~A))+j[7]+1126891415&4294967295,k=b+(S<<10&4294967295|S>>>22),S=A+(b^(k|~E))+j[14]+2878612391&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~b))+j[5]+4237533241&4294967295,E=A+(S<<21&4294967295|S>>>11),S=b+(A^(E|~k))+j[12]+1700485571&4294967295,b=E+(S<<6&4294967295|S>>>26),S=k+(E^(b|~A))+j[3]+2399980690&4294967295,k=b+(S<<10&4294967295|S>>>22),S=A+(b^(k|~E))+j[10]+4293915773&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~b))+j[1]+2240044497&4294967295,E=A+(S<<21&4294967295|S>>>11),S=b+(A^(E|~k))+j[8]+1873313359&4294967295,b=E+(S<<6&4294967295|S>>>26),S=k+(E^(b|~A))+j[15]+4264355552&4294967295,k=b+(S<<10&4294967295|S>>>22),S=A+(b^(k|~E))+j[6]+2734768916&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~b))+j[13]+1309151649&4294967295,E=A+(S<<21&4294967295|S>>>11),S=b+(A^(E|~k))+j[4]+4149444226&4294967295,b=E+(S<<6&4294967295|S>>>26),S=k+(E^(b|~A))+j[11]+3174756917&4294967295,k=b+(S<<10&4294967295|S>>>22),S=A+(b^(k|~E))+j[2]+718787259&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~b))+j[9]+3951481745&4294967295,y.g[0]=y.g[0]+b&4294967295,y.g[1]=y.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,y.g[2]=y.g[2]+A&4294967295,y.g[3]=y.g[3]+k&4294967295}s.prototype.u=function(y,b){b===void 0&&(b=y.length);for(var E=b-this.blockSize,j=this.B,A=this.h,k=0;k<b;){if(A==0)for(;k<=E;)r(this,y,k),k+=this.blockSize;if(typeof y=="string"){for(;k<b;)if(j[A++]=y.charCodeAt(k++),A==this.blockSize){r(this,j),A=0;break}}else for(;k<b;)if(j[A++]=y[k++],A==this.blockSize){r(this,j),A=0;break}}this.h=A,this.o+=b},s.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var b=1;b<y.length-8;++b)y[b]=0;var E=8*this.o;for(b=y.length-8;b<y.length;++b)y[b]=E&255,E/=256;for(this.u(y),y=Array(16),b=E=0;4>b;++b)for(var j=0;32>j;j+=8)y[E++]=this.g[b]>>>j&255;return y};function o(y,b){var E=c;return Object.prototype.hasOwnProperty.call(E,y)?E[y]:E[y]=b(y)}function a(y,b){this.h=b;for(var E=[],j=!0,A=y.length-1;0<=A;A--){var k=y[A]|0;j&&k==b||(E[A]=k,j=!1)}this.g=E}var c={};function u(y){return-128<=y&&128>y?o(y,function(b){return new a([b|0],0>b?-1:0)}):new a([y|0],0>y?-1:0)}function d(y){if(isNaN(y)||!isFinite(y))return m;if(0>y)return x(d(-y));for(var b=[],E=1,j=0;y>=E;j++)b[j]=y/E|0,E*=4294967296;return new a(b,0)}function f(y,b){if(y.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(y.charAt(0)=="-")return x(f(y.substring(1),b));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(b,8)),j=m,A=0;A<y.length;A+=8){var k=Math.min(8,y.length-A),S=parseInt(y.substring(A,A+k),b);8>k?(k=d(Math.pow(b,k)),j=j.j(k).add(d(S))):(j=j.j(E),j=j.add(d(S)))}return j}var m=u(0),g=u(1),v=u(16777216);n=a.prototype,n.m=function(){if(N(this))return-x(this).m();for(var y=0,b=1,E=0;E<this.g.length;E++){var j=this.i(E);y+=(0<=j?j:4294967296+j)*b,b*=4294967296}return y},n.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w(this))return"0";if(N(this))return"-"+x(this).toString(y);for(var b=d(Math.pow(y,6)),E=this,j="";;){var A=P(E,b).g;E=I(E,A.j(b));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(y);if(E=A,w(E))return k+j;for(;6>k.length;)k="0"+k;j=k+j}},n.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function w(y){if(y.h!=0)return!1;for(var b=0;b<y.g.length;b++)if(y.g[b]!=0)return!1;return!0}function N(y){return y.h==-1}n.l=function(y){return y=I(this,y),N(y)?-1:w(y)?0:1};function x(y){for(var b=y.g.length,E=[],j=0;j<b;j++)E[j]=~y.g[j];return new a(E,~y.h).add(g)}n.abs=function(){return N(this)?x(this):this},n.add=function(y){for(var b=Math.max(this.g.length,y.g.length),E=[],j=0,A=0;A<=b;A++){var k=j+(this.i(A)&65535)+(y.i(A)&65535),S=(k>>>16)+(this.i(A)>>>16)+(y.i(A)>>>16);j=S>>>16,k&=65535,S&=65535,E[A]=S<<16|k}return new a(E,E[E.length-1]&-2147483648?-1:0)};function I(y,b){return y.add(x(b))}n.j=function(y){if(w(this)||w(y))return m;if(N(this))return N(y)?x(this).j(x(y)):x(x(this).j(y));if(N(y))return x(this.j(x(y)));if(0>this.l(v)&&0>y.l(v))return d(this.m()*y.m());for(var b=this.g.length+y.g.length,E=[],j=0;j<2*b;j++)E[j]=0;for(j=0;j<this.g.length;j++)for(var A=0;A<y.g.length;A++){var k=this.i(j)>>>16,S=this.i(j)&65535,V=y.i(A)>>>16,L=y.i(A)&65535;E[2*j+2*A]+=S*L,R(E,2*j+2*A),E[2*j+2*A+1]+=k*L,R(E,2*j+2*A+1),E[2*j+2*A+1]+=S*V,R(E,2*j+2*A+1),E[2*j+2*A+2]+=k*V,R(E,2*j+2*A+2)}for(j=0;j<b;j++)E[j]=E[2*j+1]<<16|E[2*j];for(j=b;j<2*b;j++)E[j]=0;return new a(E,0)};function R(y,b){for(;(y[b]&65535)!=y[b];)y[b+1]+=y[b]>>>16,y[b]&=65535,b++}function _(y,b){this.g=y,this.h=b}function P(y,b){if(w(b))throw Error("division by zero");if(w(y))return new _(m,m);if(N(y))return b=P(x(y),b),new _(x(b.g),x(b.h));if(N(b))return b=P(y,x(b)),new _(x(b.g),b.h);if(30<y.g.length){if(N(y)||N(b))throw Error("slowDivide_ only works with positive integers.");for(var E=g,j=b;0>=j.l(y);)E=O(E),j=O(j);var A=D(E,1),k=D(j,1);for(j=D(j,2),E=D(E,2);!w(j);){var S=k.add(j);0>=S.l(y)&&(A=A.add(E),k=S),j=D(j,1),E=D(E,1)}return b=I(y,A.j(b)),new _(A,b)}for(A=m;0<=y.l(b);){for(E=Math.max(1,Math.floor(y.m()/b.m())),j=Math.ceil(Math.log(E)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),k=d(E),S=k.j(b);N(S)||0<S.l(y);)E-=j,k=d(E),S=k.j(b);w(k)&&(k=g),A=A.add(k),y=I(y,S)}return new _(A,y)}n.A=function(y){return P(this,y).h},n.and=function(y){for(var b=Math.max(this.g.length,y.g.length),E=[],j=0;j<b;j++)E[j]=this.i(j)&y.i(j);return new a(E,this.h&y.h)},n.or=function(y){for(var b=Math.max(this.g.length,y.g.length),E=[],j=0;j<b;j++)E[j]=this.i(j)|y.i(j);return new a(E,this.h|y.h)},n.xor=function(y){for(var b=Math.max(this.g.length,y.g.length),E=[],j=0;j<b;j++)E[j]=this.i(j)^y.i(j);return new a(E,this.h^y.h)};function O(y){for(var b=y.g.length+1,E=[],j=0;j<b;j++)E[j]=y.i(j)<<1|y.i(j-1)>>>31;return new a(E,y.h)}function D(y,b){var E=b>>5;b%=32;for(var j=y.g.length-E,A=[],k=0;k<j;k++)A[k]=0<b?y.i(k+E)>>>b|y.i(k+E+1)<<32-b:y.i(k+E);return new a(A,y.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Qh=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,as=a}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});var pi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xh,yr,Zh,ki,Pa,ef,tf,nf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pi=="object"&&pi];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=t(this);function r(l,h){if(h)e:{var p=s;l=l.split(".");for(var T=0;T<l.length-1;T++){var M=l[T];if(!(M in p))break e;p=p[M]}l=l[l.length-1],T=p[l],h=h(T),h!=T&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,T=!1,M={next:function(){if(!T&&p<l.length){var q=p++;return{value:h(q,l[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(T,M,q){for(var J=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)J[Ve-2]=arguments[Ve];return h.prototype[M].apply(T,J)}}function N(l){const h=l.length;if(0<h){const p=Array(h);for(let T=0;T<h;T++)p[T]=l[T];return p}return[]}function x(l,h){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const M=l.length||0,q=T.length||0;l.length=M+q;for(let J=0;J<q;J++)l[M+J]=T[J]}else l.push(T)}}class I{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(l){return/^[\s\xa0]*$/.test(l)}function _(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var O=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function D(l,h,p){for(const T in l)h.call(p,l[T],T,l)}function y(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function b(l){const h={};for(const p in l)h[p]=l[p];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(l,h){let p,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(p in T)l[p]=T[p];for(let q=0;q<E.length;q++)p=E[q],Object.prototype.hasOwnProperty.call(T,p)&&(l[p]=T[p])}}function A(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function k(l){c.setTimeout(()=>{throw l},0)}function S(){var l=W;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,p){const T=L.get();T.set(h,p),this.h?this.h.next=T:this.g=T,this.h=T}}var L=new I(()=>new F,l=>l.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let B,$=!1,W=new V,K=()=>{const l=c.Promise.resolve(void 0);B=()=>{l.then(Z)}};var Z=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(p){k(p)}var h=L;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function ie(l,h){if(z.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{P(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Q[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ie.aa.h.call(this)}}w(ie,z);var Q={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),ee=0;function me(l,h,p,T,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!T,this.ha=M,this.key=++ee,this.da=this.fa=!1}function oe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ve(l){this.src=l,this.g={},this.h=0}ve.prototype.add=function(l,h,p,T,M){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var J=Fe(l,h,T,M);return-1<J?(h=l[J],p||(h.fa=!1)):(h=new me(h,this.src,q,!!T,M),h.fa=p,l.push(h)),h};function ke(l,h){var p=h.type;if(p in l.g){var T=l.g[p],M=Array.prototype.indexOf.call(T,h,void 0),q;(q=0<=M)&&Array.prototype.splice.call(T,M,1),q&&(oe(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Fe(l,h,p,T){for(var M=0;M<l.length;++M){var q=l[M];if(!q.da&&q.listener==h&&q.capture==!!p&&q.ha==T)return M}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),Ge={};function ge(l,h,p,T,M){if(Array.isArray(h)){for(var q=0;q<h.length;q++)ge(l,h[q],p,T,M);return null}return p=ot(p),l&&l[G]?l.K(h,p,d(T)?!!T.capture:!1,M):qe(l,h,p,!1,T,M)}function qe(l,h,p,T,M,q){if(!h)throw Error("Invalid event type");var J=d(M)?!!M.capture:!!M,Ve=nt(l);if(Ve||(l[bt]=Ve=new ve(l)),p=Ve.add(h,p,T,J,q),p.proxy)return p;if(T=Gt(),p.proxy=T,T.src=l,T.listener=p,l.addEventListener)te||(M=J),M===void 0&&(M=!1),l.addEventListener(h.toString(),T,M);else if(l.attachEvent)l.attachEvent(Le(h.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Gt(){function l(p){return h.call(l.src,l.listener,p)}const h=it;return l}function Me(l,h,p,T,M){if(Array.isArray(h))for(var q=0;q<h.length;q++)Me(l,h[q],p,T,M);else T=d(T)?!!T.capture:!!T,p=ot(p),l&&l[G]?(l=l.i,h=String(h).toString(),h in l.g&&(q=l.g[h],p=Fe(q,p,T,M),-1<p&&(oe(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete l.g[h],l.h--)))):l&&(l=nt(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Fe(h,p,T,M)),(p=-1<l?h[l]:null)&&re(p))}function re(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[G])ke(h.i,l);else{var p=l.type,T=l.proxy;h.removeEventListener?h.removeEventListener(p,T,l.capture):h.detachEvent?h.detachEvent(Le(p),T):h.addListener&&h.removeListener&&h.removeListener(T),(p=nt(h))?(ke(p,l),p.h==0&&(p.src=null,h[bt]=null)):oe(l)}}}function Le(l){return l in Ge?Ge[l]:Ge[l]="on"+l}function it(l,h){if(l.da)l=!0;else{h=new ie(h,this);var p=l.listener,T=l.ha||l.src;l.fa&&re(l),l=p.call(T,h)}return l}function nt(l){return l=l[bt],l instanceof ve?l:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(l){return typeof l=="function"?l:(l[Ae]||(l[Ae]=function(h){return l.handleEvent(h)}),l[Ae])}function be(){se.call(this),this.i=new ve(this),this.M=this,this.F=null}w(be,se),be.prototype[G]=!0,be.prototype.removeEventListener=function(l,h,p,T){Me(this,l,h,p,T)};function De(l,h){var p,T=l.F;if(T)for(p=[];T;T=T.F)p.push(T);if(l=l.M,T=h.type||h,typeof h=="string")h=new z(h,l);else if(h instanceof z)h.target=h.target||l;else{var M=h;h=new z(T,l),j(h,M)}if(M=!0,p)for(var q=p.length-1;0<=q;q--){var J=h.g=p[q];M=Nt(J,T,!0,h)&&M}if(J=h.g=l,M=Nt(J,T,!0,h)&&M,M=Nt(J,T,!1,h)&&M,p)for(q=0;q<p.length;q++)J=h.g=p[q],M=Nt(J,T,!1,h)&&M}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],T=0;T<p.length;T++)oe(p[T]);delete l.g[h],l.h--}}this.F=null},be.prototype.K=function(l,h,p,T){return this.i.add(String(l),h,!1,p,T)},be.prototype.L=function(l,h,p,T){return this.i.add(String(l),h,!0,p,T)};function Nt(l,h,p,T){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,q=0;q<h.length;++q){var J=h[q];if(J&&!J.da&&J.capture==p){var Ve=J.listener,ct=J.ha||J.src;J.fa&&ke(l.i,J),M=Ve.call(ct,T)!==!1&&M}}return M&&!T.defaultPrevented}function an(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Nn(l){l.g=an(()=>{l.g=null,l.i&&(l.i=!1,Nn(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Sn extends se{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(l){se.call(this),this.h=l,this.g={}}w(Mt,se);var St=[];function ze(l){D(l.g,function(h,p){this.g.hasOwnProperty(p)&&re(h)},l),l.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),ze(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=c.JSON.stringify,Jn=c.JSON.parse,In=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function ln(){}ln.prototype.h=null;function cn(l){return l.h||(l.h=l.i())}function un(){}var Ot={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){z.call(this,"d")}w(dn,z);function Cn(){z.call(this,"c")}w(Cn,z);var Be={},wt=null;function le(){return wt=wt||new be}Be.La="serverreachability";function _e(l){z.call(this,Be.La,l)}w(_e,z);function Ze(l){const h=le();De(h,new _e(h))}Be.STAT_EVENT="statevent";function Wt(l,h){z.call(this,Be.STAT_EVENT,l),this.stat=h}w(Wt,z);function Y(l){const h=le();De(h,new Wt(h,l))}Be.Ma="timingevent";function ce(l,h){z.call(this,Be.Ma,l),this.size=h}w(ce,z);function de(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Ue(){this.g=!0}Ue.prototype.xa=function(){this.g=!1};function st(l,h,p,T,M,q){l.info(function(){if(l.g)if(q)for(var J="",Ve=q.split("&"),ct=0;ct<Ve.length;ct++){var Ce=Ve[ct].split("=");if(1<Ce.length){var ft=Ce[0];Ce=Ce[1];var pt=ft.split("_");J=2<=pt.length&&pt[1]=="type"?J+(ft+"="+Ce+"&"):J+(ft+"=redacted&")}}else J=null;else J=q;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+h+`
`+p+`
`+J})}function Lt(l,h,p,T,M,q,J){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+h+`
`+p+`
`+q+" "+J})}function at(l,h,p,T){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Tt(l,p)+(T?" "+T:"")})}function lt(l,h){l.info(function(){return"TIMEOUT: "+h})}Ue.prototype.info=function(){};function Tt(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var T=p[l];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(var J=1;J<M.length;J++)M[J]=""}}}}return Tn(p)}catch{return h}}var Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function Qn(){}w(Qn,ln),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},ir=new Qn;function Vt(l,h,p,T){this.j=l,this.i=h,this.l=p,this.R=T||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new or}function or(){this.i=null,this.g="",this.h=!1}var ar={},Re={};function Pt(l,h,p){l.L=1,l.v=ni(hn(h)),l.m=p,l.P=!0,_s(l,null)}function _s(l,h){l.F=Date.now(),Rn(l),l.A=hn(l.v);var p=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),gc(p.i,"t",T),l.C=0,p=l.j.J,l.h=new or,l.g=Dc(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Sn(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,T=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(St[0]=M.toString()),M=St);for(var q=0;q<M.length;q++){var J=ge(p,M[q],T||h.handleEvent,!1,h.h||h);if(!J)break;h.g[J.key]=J}h=l.H?b(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ze(),st(l.i,l.u,l.A,l.l,l.R,l.m)}Vt.prototype.ca=function(l){l=l.target;const h=this.M;h&&fn(l)==3?h.j():this.Y(l)},Vt.prototype.Y=function(l){try{if(l==this.g)e:{const pt=fn(this.g);var h=this.g.Ba();const Ss=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Ec(this.g)))){this.J||pt!=4||h==7||(h==8||0>=Ss?Ze(3):Ze(2)),Uo(this);var p=this.g.Z();this.X=p;t:if(An(this)){var T=Ec(this.g);l="";var M=T.length,q=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),lr(this);var J="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(T[h],{stream:!(q&&h==M-1)});T.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=p==200,Lt(this.i,this.u,this.A,this.l,this.R,pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,ct=this.g;if((Ve=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Ve)){var Ce=Ve;break t}}Ce=null}if(p=Ce)at(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$o(this,p);else{this.o=!1,this.s=3,Y(12),Xn(this),lr(this);break e}}if(this.P){p=!0;let Bt;for(;!this.J&&this.C<J.length;)if(Bt=Bo(this,J),Bt==Re){pt==4&&(this.s=4,Y(14),p=!1),at(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==ar){this.s=4,Y(15),at(this.i,this.l,J,"[Invalid Chunk]"),p=!1;break}else at(this.i,this.l,Bt,null),$o(this,Bt);if(An(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||J.length!=0||this.h.h||(this.s=1,Y(16),p=!1),this.o=this.o&&p,!p)at(this.i,this.l,J,"[Invalid Chunked Response]"),Xn(this),lr(this);else if(0<J.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Ko(ft),ft.M=!0,Y(11))}}else at(this.i,this.l,J,null),$o(this,J);pt==4&&Xn(this),this.o&&!this.J&&(pt==4?Ac(this.j,this):(this.o=!1,Rn(this)))}else gm(this.g),p==400&&0<J.indexOf("Unknown SID")?(this.s=3,Y(12)):(this.s=0,Y(13)),Xn(this),lr(this)}}}catch{}finally{}};function An(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Bo(l,h){var p=l.C,T=h.indexOf(`
`,p);return T==-1?Re:(p=Number(h.substring(p,T)),isNaN(p)?ar:(T+=1,T+p>h.length?Re:(h=h.slice(T,T+p),l.C=T+p,h)))}Vt.prototype.cancel=function(){this.J=!0,Xn(this)};function Rn(l){l.S=Date.now()+l.I,rc(l,l.I)}function rc(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=de(g(l.ba,l),h)}function Uo(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Vt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(lt(this.i,this.A),this.L!=2&&(Ze(),Y(17)),Xn(this),this.s=2,lr(this)):rc(this,this.S-l)};function lr(l){l.j.G==0||l.J||Ac(l.j,l)}function Xn(l){Uo(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,ze(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function $o(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||qo(p.h,l))){if(!l.K&&qo(p.h,l)&&p.G==3){try{var T=p.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)li(p),oi(p);else break e;Wo(p),Y(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=de(g(p.Za,p),6e3));if(1>=ac(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else es(p,11)}else if((l.K||p.g==l)&&li(p),!R(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let Ce=M[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];const ft=Ce[3];ft!=null&&(p.la=ft,p.j.info("VER="+p.la));const pt=Ce[4];pt!=null&&(p.Aa=pt,p.j.info("SVER="+p.Aa));const Ss=Ce[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(T=1.5*Ss,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const Bt=l.g;if(Bt){const ui=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var q=T.h;q.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(zo(q,q.h),q.h=null))}if(T.D){const Yo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(T.ya=Yo,$e(T.I,T.D,Yo))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var J=l;if(T.qa=kc(T,T.J?T.ia:null,T.W),J.K){lc(T.h,J);var Ve=J,ct=T.L;ct&&(Ve.I=ct),Ve.B&&(Uo(Ve),Rn(Ve)),T.g=J}else Cc(T);0<p.i.length&&ai(p)}else Ce[0]!="stop"&&Ce[0]!="close"||es(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?es(p,7):Go(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}Ze(4)}catch{}}var em=class{constructor(l,h){this.g=l,this.map=h}};function ic(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oc(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ac(l){return l.h?1:l.g?l.g.size:0}function qo(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function zo(l,h){l.g?l.g.add(h):l.h=h}function lc(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ic.prototype.cancel=function(){if(this.i=cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function cc(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return N(l.i)}function tm(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,T=0;T<p;T++)h.push(l[T]);return h}h=[],p=0;for(T in l)h[p++]=l[T];return h}function nm(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const T in l)h[p++]=T;return h}}}function uc(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=nm(l),T=tm(l),M=T.length,q=0;q<M;q++)h.call(void 0,T[q],p&&p[q],l)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sm(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var T=l[p].indexOf("="),M=null;if(0<=T){var q=l[p].substring(0,T);M=l[p].substring(T+1)}else q=l[p];h(q,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Zn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zn){this.h=l.h,ei(this,l.j),this.o=l.o,this.g=l.g,ti(this,l.s),this.l=l.l;var h=l.i,p=new dr;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hc(this,p),this.m=l.m}else l&&(h=String(l).match(dc))?(this.h=!1,ei(this,h[1]||"",!0),this.o=cr(h[2]||""),this.g=cr(h[3]||"",!0),ti(this,h[4]),this.l=cr(h[5]||"",!0),hc(this,h[6]||"",!0),this.m=cr(h[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}Zn.prototype.toString=function(){var l=[],h=this.j;h&&l.push(ur(h,fc,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(ur(h,fc,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(ur(p,p.charAt(0)=="/"?om:im,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",ur(p,lm)),l.join("")};function hn(l){return new Zn(l)}function ei(l,h,p){l.j=p?cr(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ti(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function hc(l,h,p){h instanceof dr?(l.i=h,cm(l.i,l.h)):(p||(h=ur(h,am)),l.i=new dr(h,l.h))}function $e(l,h,p){l.i.set(h,p)}function ni(l){return $e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function cr(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ur(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,rm),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rm(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fc=/[#\/\?@]/g,im=/[#\?:]/g,om=/[#\?]/g,am=/[#\?@]/g,lm=/#/g;function dr(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Pn(l){l.g||(l.g=new Map,l.h=0,l.i&&sm(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=dr.prototype,n.add=function(l,h){Pn(this),this.i=null,l=Es(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function pc(l,h){Pn(l),h=Es(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function mc(l,h){return Pn(l),h=Es(l,h),l.g.has(h)}n.forEach=function(l,h){Pn(this),this.g.forEach(function(p,T){p.forEach(function(M){l.call(h,M,T,this)},this)},this)},n.na=function(){Pn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let T=0;T<h.length;T++){const M=l[T];for(let q=0;q<M.length;q++)p.push(h[T])}return p},n.V=function(l){Pn(this);let h=[];if(typeof l=="string")mc(this,l)&&(h=h.concat(this.g.get(Es(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Pn(this),this.i=null,l=Es(this,l),mc(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function gc(l,h,p){pc(l,h),0<p.length&&(l.i=null,l.g.set(Es(l,h),N(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var T=h[p];const q=encodeURIComponent(String(T)),J=this.V(T);for(T=0;T<J.length;T++){var M=q;J[T]!==""&&(M+="="+encodeURIComponent(String(J[T]))),l.push(M)}}return this.i=l.join("&")};function Es(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function cm(l,h){h&&!l.j&&(Pn(l),l.i=null,l.g.forEach(function(p,T){var M=T.toLowerCase();T!=M&&(pc(this,T),gc(this,M,p))},l)),l.j=h}function um(l,h){const p=new Ue;if(c.Image){const T=new Image;T.onload=v(kn,p,"TestLoadImage: loaded",!0,h,T),T.onerror=v(kn,p,"TestLoadImage: error",!1,h,T),T.onabort=v(kn,p,"TestLoadImage: abort",!1,h,T),T.ontimeout=v(kn,p,"TestLoadImage: timeout",!1,h,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else h(!1)}function dm(l,h){const p=new Ue,T=new AbortController,M=setTimeout(()=>{T.abort(),kn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:T.signal}).then(q=>{clearTimeout(M),q.ok?kn(p,"TestPingServer: ok",!0,h):kn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),kn(p,"TestPingServer: error",!1,h)})}function kn(l,h,p,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(p)}catch{}}function hm(){this.g=new In}function fm(l,h,p){const T=p||"";try{uc(l,function(M,q){let J=M;d(M)&&(J=Tn(M)),h.push(T+q+"="+encodeURIComponent(J))})}catch(M){throw h.push(T+"type="+encodeURIComponent("_badmap")),M}}function si(l){this.l=l.Ub||null,this.j=l.eb||!1}w(si,ln),si.prototype.g=function(){return new ri(this.l,this.j)},si.prototype.i=function(l){return function(){return l}}({});function ri(l,h){be.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ri,be),n=ri.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,fr(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xc(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xc(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?hr(this):fr(this),this.readyState==3&&xc(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,hr(this))},n.Qa=function(l){this.g&&(this.response=l,hr(this))},n.ga=function(){this.g&&hr(this)};function hr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,fr(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function fr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yc(l){let h="";return D(l,function(p,T){h+=T,h+=":",h+=p,h+=`\r
`}),h}function Ho(l,h,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=yc(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):$e(l,h,p))}function We(l){be.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(We,be);var pm=/^https?$/i,mm=["POST","PUT"];n=We.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?cn(this.o):cn(ir),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(q){vc(this,q);return}if(l=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)p.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())p.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(mm,h,void 0))||T||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,J]of p)this.g.setRequestHeader(q,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_c(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){vc(this,q)}};function vc(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,bc(l),ii(l)}function bc(l){l.A||(l.A=!0,De(l,"complete"),De(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,De(this,"complete"),De(this,"abort"),ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wc(this):this.bb())},n.bb=function(){wc(this)};function wc(l){if(l.h&&typeof a<"u"&&(!l.v[1]||fn(l)!=4||l.Z()!=2)){if(l.u&&fn(l)==4)an(l.Ea,0,l);else if(De(l,"readystatechange"),fn(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var T;if(T=J===0){var M=String(l.D).match(dc)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),T=!pm.test(M?M.toLowerCase():"")}p=T}if(p)De(l,"complete"),De(l,"success");else{l.m=6;try{var q=2<fn(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",bc(l)}}finally{ii(l)}}}}function ii(l,h){if(l.g){_c(l);const p=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||De(l,"ready");try{p.onreadystatechange=T}catch{}}}function _c(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function fn(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Jn(h)}};function Ec(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function gm(l){const h={};l=(l.g&&2<=fn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(R(l[T]))continue;var p=A(l[T]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=h[M]||[];h[M]=q,q.push(p)}y(h,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Nc(l){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,l),this.cb=pr("retryDelaySeedMs",1e4,l),this.Wa=pr("forwardChannelMaxRetries",2,l),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ic(l&&l.concurrentRequestLimit),this.Da=new hm,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nc.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,T){Y(0),this.W=l,this.H=h||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=kc(this,null,this.W),ai(this)};function Go(l){if(Sc(l),l.G==3){var h=l.U++,p=hn(l.I);if($e(p,"SID",l.K),$e(p,"RID",h),$e(p,"TYPE","terminate"),mr(l,p),h=new Vt(l,l.j,h),h.L=2,h.v=ni(hn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Dc(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Rn(h)}Pc(l)}function oi(l){l.g&&(Ko(l),l.g.cancel(),l.g=null)}function Sc(l){oi(l),l.u&&(c.clearTimeout(l.u),l.u=null),li(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function ai(l){if(!oc(l.h)&&!l.s){l.s=!0;var h=l.Ga;B||K(),$||(B(),$=!0),W.add(h,l),l.B=0}}function xm(l,h){return ac(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=de(g(l.Ga,l,h),Rc(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Vt(this,this.j,l);let q=this.o;if(this.S&&(q?(q=b(q),j(q,this.S)):q=this.S),this.m!==null||this.O||(M.H=q,q=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ic(this,M,h),p=hn(this.I),$e(p,"RID",l),$e(p,"CVER",22),this.D&&$e(p,"X-HTTP-Session-Id",this.D),mr(this,p),q&&(this.O?h="headers="+encodeURIComponent(String(yc(q)))+"&"+h:this.m&&Ho(p,this.m,q)),zo(this.h,M),this.Ua&&$e(p,"TYPE","init"),this.P?($e(p,"$req",h),$e(p,"SID","null"),M.T=!0,Pt(M,p,null)):Pt(M,p,h),this.G=2}}else this.G==3&&(l?Tc(this,l):this.i.length==0||oc(this.h)||Tc(this))};function Tc(l,h){var p;h?p=h.l:p=l.U++;const T=hn(l.I);$e(T,"SID",l.K),$e(T,"RID",p),$e(T,"AID",l.T),mr(l,T),l.m&&l.o&&Ho(T,l.m,l.o),p=new Vt(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Ic(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),zo(l.h,p),Pt(p,T,h)}function mr(l,h){l.H&&D(l.H,function(p,T){$e(h,T,p)}),l.l&&uc({},function(p,T){$e(h,T,p)})}function Ic(l,h,p){p=Math.min(l.i.length,p);var T=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let q=-1;for(;;){const J=["count="+p];q==-1?0<p?(q=M[0].g,J.push("ofs="+q)):q=0:J.push("ofs="+q);let Ve=!0;for(let ct=0;ct<p;ct++){let Ce=M[ct].g;const ft=M[ct].map;if(Ce-=q,0>Ce)q=Math.max(0,M[ct].g-100),Ve=!1;else try{fm(ft,J,"req"+Ce+"_")}catch{T&&T(ft)}}if(Ve){T=J.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,T}function Cc(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;B||K(),$||(B(),$=!0),W.add(h,l),l.v=0}}function Wo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=de(g(l.Fa,l),Rc(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,jc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=de(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Y(10),oi(this),jc(this))};function Ko(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function jc(l){l.g=new Vt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=hn(l.qa);$e(h,"RID","rpc"),$e(h,"SID",l.K),$e(h,"AID",l.T),$e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&$e(h,"TO",l.ja),$e(h,"TYPE","xmlhttp"),mr(l,h),l.m&&l.o&&Ho(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=ni(hn(h)),p.m=null,p.P=!0,_s(p,l)}n.Za=function(){this.C!=null&&(this.C=null,oi(this),Wo(this),Y(19))};function li(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Ac(l,h){var p=null;if(l.g==h){li(l),Ko(l),l.g=null;var T=2}else if(qo(l.h,h))p=h.D,lc(l.h,h),T=1;else return;if(l.G!=0){if(h.o)if(T==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;T=le(),De(T,new ce(T,p)),ai(l)}else Cc(l);else if(M=h.s,M==3||M==0&&0<h.X||!(T==1&&xm(l,h)||T==2&&Wo(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:es(l,5);break;case 4:es(l,10);break;case 3:es(l,6);break;default:es(l,2)}}}function Rc(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function es(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),T=l.Xa;const M=!T;T=new Zn(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ei(T,"https"),ni(T),M?um(T.toString(),p):dm(T.toString(),p)}else Y(2);l.G=0,l.l&&l.l.sa(h),Pc(l),Sc(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function Pc(l){if(l.G=0,l.ka=[],l.l){const h=cc(l.h);(h.length!=0||l.i.length!=0)&&(x(l.ka,h),x(l.ka,l.i),l.h.i.length=0,N(l.i),l.i.length=0),l.l.ra()}}function kc(l,h,p){var T=p instanceof Zn?hn(p):new Zn(p);if(T.g!="")h&&(T.g=h+"."+T.g),ti(T,T.s);else{var M=c.location;T=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var q=new Zn(null);T&&ei(q,T),h&&(q.g=h),M&&ti(q,M),p&&(q.l=p),T=q}return p=l.D,h=l.ya,p&&h&&$e(T,p,h),$e(T,"VER",l.la),mr(l,T),T}function Dc(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new We(new si({eb:p})):new We(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}n=Oc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ci(){}ci.prototype.g=function(l,h){return new kt(l,h)};function kt(l,h){be.call(this),this.g=new Nc(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!R(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!R(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ns(this)}w(kt,be),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Go(this.g)},kt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Tn(l),l=p);h.i.push(new em(h.Ya++,l)),h.G==3&&ai(h)},kt.prototype.N=function(){this.g.l=null,delete this.j,Go(this.g),delete this.g,kt.aa.N.call(this)};function Lc(l){dn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(Lc,dn);function Fc(){Cn.call(this),this.status=1}w(Fc,Cn);function Ns(l){this.g=l}w(Ns,Oc),Ns.prototype.ua=function(){De(this.g,"a")},Ns.prototype.ta=function(l){De(this.g,new Lc(l))},Ns.prototype.sa=function(l){De(this.g,new Fc)},Ns.prototype.ra=function(){De(this.g,"b")},ci.prototype.createWebChannel=ci.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,nf=function(){return new ci},tf=function(){return le()},ef=Be,Pa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,ki=Oe,jn.COMPLETE="complete",Zh=jn,un.EventType=Ot,Ot.OPEN="a",Ot.CLOSE="b",Ot.ERROR="c",Ot.MESSAGE="d",be.prototype.listen=be.prototype.K,yr=un,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Xh=We}).apply(typeof pi<"u"?pi:typeof self<"u"?self:typeof window<"u"?window:{});const Eu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new hl("@firebase/firestore");function Is(){return ps.logLevel}function ne(n,...e){if(ps.logLevel<=Ee.DEBUG){const t=e.map(Tl);ps.debug(`Firestore (${Xs}): ${n}`,...t)}}function wn(n,...e){if(ps.logLevel<=Ee.ERROR){const t=e.map(Tl);ps.error(`Firestore (${Xs}): ${n}`,...t)}}function Bs(n,...e){if(ps.logLevel<=Ee.WARN){const t=e.map(Tl);ps.warn(`Firestore (${Xs}): ${n}`,...t)}}function Tl(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n="Unexpected state"){const e=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: `+n;throw wn(e),new Error(e)}function He(n,e){n||ye()}function Te(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends _n{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ly{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gt.UNAUTHENTICATED))}shutdown(){}}class Fy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class My{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0);let s=this.i;const r=u=>this.i!==s?(s=this.i,t(u)):Promise.resolve();let o=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ls,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},c=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ls)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string"),new sf(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new gt(e)}}class Vy{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class By{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new Vy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $y{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){He(this.o===void 0);const s=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>s(o))};const r=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He(typeof t.token=="string"),this.R=t.token,new Uy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=qy(40);for(let o=0;o<r.length;++o)s.length<20&&r[o]<t&&(s+=e.charAt(r[o]%e.length))}return s}}function Se(n,e){return n<e?-1:n>e?1:0}function Us(n,e,t){return n.length===e.length&&n.every((s,r)=>t(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new jt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new jt(0,0))}static max(){return new pe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,s){t===void 0?t=0:t>e.length&&ye(),s===void 0?s=e.length-t:s>e.length-t&&ye(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const o=e.get(r),a=t.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ke extends Cr{construct(e,t,s){return new Ke(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(r=>r.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const Hy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Cr{construct(e,t,s){return new Et(e,t,s)}static isValidIdentifier(e){return Hy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const t=[];let s="",r=0;const o=()=>{if(s.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let a=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(s+=c,r++):(o(),r++)}if(o(),a)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Ke.fromString(e))}static fromName(e){return new he(Ke.fromString(e).popFirst(5))}static empty(){return new he(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ke(e.slice()))}}function Gy(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=pe.fromTimestamp(s===1e9?new jt(t+1,0):new jt(t,s));return new zn(r,he.empty(),e)}function Wy(n){return new zn(n.readTime,n.key,-1)}class zn{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new zn(pe.min(),he.empty(),-1)}static max(){return new zn(pe.max(),he.empty(),-1)}}function Ky(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==Yy)throw n;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((s,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,s)=>{t(e)})}static reject(e){return new H((t,s)=>{s(e)})}static waitFor(e){return new H((t,s)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&t()},u=>s(u))}),a=!0,o===r&&t()})}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next(r=>r?H.resolve(r):s());return t}static forEach(e,t){const s=[];return e.forEach((r,o)=>{s.push(t.call(this,r,o))}),this.waitFor(s)}static mapArray(e,t){return new H((s,r)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;t(e[d]).next(f=>{a[d]=f,++c,c===o&&s(a)},f=>r(f))}})}static doWhile(e,t){return new H((s,r)=>{const o=()=>{e()===!0?t().next(()=>{o()},r):s()};o()})}}function Qy(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zs(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xo.oe=-1;function yo(n){return n==null}function ka(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Nu(e)),e=Zy(n.get(t),e);return Nu(e)}function Zy(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Nu(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ev(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.comparator=e,this.root=t||ut.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mi(this.root,e,this.comparator,!1)}getReverseIterator(){return new mi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mi(this.root,e,this.comparator,!0)}}class mi{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,t,s,r,o){this.key=e,this.value=t,this.color=s??ut.RED,this.left=r??ut.EMPTY,this.right=o??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,o){return new ut(e??this.key,t??this.value,s??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const o=s(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,s),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return ut.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,t,s,r,o){return this}insert(e,t,s){return new ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tu(this.data.getIterator())}getIteratorFrom(e){return new Tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class Tu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new tt(Et.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rf("Invalid base64 string: "+o):o}}(e);return new ht(t)}static fromUint8Array(e){const t=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const tv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(n){if(He(!!n),typeof n=="string"){let e=0;const t=tv.exec(n);if(He(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(n.seconds),nanos:Ye(n.nanos)}}function Ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gn(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vo(n){const e=n.mapValue.fields.__previous_value__;return Il(e)?vo(e):e}function jr(n){const e=Hn(n.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t,s,r,o,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Ar{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ar("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ar&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi={mapValue:{}};function Wn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Il(n)?4:rv(n)?9007199254740991:sv(n)?10:11:ye()}function en(n,e){if(n===e)return!0;const t=Wn(n);if(t!==Wn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jr(n).isEqual(jr(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=Hn(r.timestampValue),c=Hn(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,o){return Gn(r.bytesValue).isEqual(Gn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Ye(r.geoPointValue.latitude)===Ye(o.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ye(r.integerValue)===Ye(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Ye(r.doubleValue),c=Ye(o.doubleValue);return a===c?ka(a)===ka(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Us(n.arrayValue.values||[],e.arrayValue.values||[],en);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(Su(a)!==Su(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!en(a[u],c[u])))return!1;return!0}(n,e);default:return ye()}}function Rr(n,e){return(n.values||[]).find(t=>en(t,e))!==void 0}function $s(n,e){if(n===e)return 0;const t=Wn(n),s=Wn(e);if(t!==s)return Se(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Ye(o.integerValue||o.doubleValue),u=Ye(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return Iu(n.timestampValue,e.timestampValue);case 4:return Iu(jr(n),jr(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return function(o,a){const c=Gn(o),u=Gn(a);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Se(c[d],u[d]);if(f!==0)return f}return Se(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const c=Se(Ye(o.latitude),Ye(a.latitude));return c!==0?c:Se(Ye(o.longitude),Ye(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Cu(n.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,f;const m=o.fields||{},g=a.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=Se(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Cu(v,w)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===gi.mapValue&&a===gi.mapValue)return 0;if(o===gi.mapValue)return 1;if(a===gi.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Se(u[m],f[m]);if(g!==0)return g;const v=$s(c[u[m]],d[f[m]]);if(v!==0)return v}return Se(u.length,f.length)}(n.mapValue,e.mapValue);default:throw ye()}}function Iu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=Hn(n),s=Hn(e),r=Se(t.seconds,s.seconds);return r!==0?r:Se(t.nanos,s.nanos)}function Cu(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const o=$s(t[r],s[r]);if(o)return o}return Se(t.length,s.length)}function qs(n){return Da(n)}function Da(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Hn(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Gn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",r=!0;for(const o of t.values||[])r?r=!1:s+=",",s+=Da(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${Da(t.fields[a])}`;return r+"}"}(n.mapValue):ye()}function Di(n){switch(Wn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vo(n);return e?16+Di(e):16;case 5:return 2*n.stringValue.length;case 6:return Gn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,o)=>r+Di(o),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return qr(s.fields,(o,a)=>{r+=o.length+Di(a)}),r}(n.mapValue);default:throw ye()}}function Oa(n){return!!n&&"integerValue"in n}function Cl(n){return!!n&&"arrayValue"in n}function ju(n){return!!n&&"nullValue"in n}function Au(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function la(n){return!!n&&"mapValue"in n}function sv(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function _r(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qr(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=_r(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_r(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!la(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_r(t)}setAll(e){let t=Et.emptyPath(),s={},r=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,s,r),s={},r=[],t=c.popLast()}a?s[c.lastSegment()]=_r(a):r.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,s,r)}delete(e){const t=this.field(e.popLast());la(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];la(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){qr(t,(r,o)=>e[r]=o);for(const r of s)delete e[r]}clone(){return new Yt(_r(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t,s,r,o,a,c){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new xt(e,0,pe.min(),pe.min(),pe.min(),Yt.empty(),0)}static newFoundDocument(e,t,s,r){return new xt(e,1,t,pe.min(),s,r,0)}static newNoDocument(e,t){return new xt(e,2,t,pe.min(),pe.min(),Yt.empty(),0)}static newUnknownDocument(e,t){return new xt(e,3,t,pe.min(),pe.min(),Yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){this.position=e,this.inclusive=t}}function Ru(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const o=e[r],a=n.position[r];if(o.field.isKeyField()?s=he.comparator(he.fromName(a.referenceValue),t.key):s=$s(a,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function Pu(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!en(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t="asc"){this.field=e,this.dir=t}}function iv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{}class et extends of{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new av(e,t,s):t==="array-contains"?new uv(e,s):t==="in"?new dv(e,s):t==="not-in"?new hv(e,s):t==="array-contains-any"?new fv(e,s):new et(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new lv(e,s):new cv(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($s(t,this.value)):t!==null&&Wn(this.value)===Wn(t)&&this.matchesComparison($s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends of{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new tn(e,t)}matches(e){return af(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function af(n){return n.op==="and"}function lf(n){return ov(n)&&af(n)}function ov(n){for(const e of n.filters)if(e instanceof tn)return!1;return!0}function La(n){if(n instanceof et)return n.field.canonicalString()+n.op.toString()+qs(n.value);if(lf(n))return n.filters.map(e=>La(e)).join(",");{const e=n.filters.map(t=>La(t)).join(",");return`${n.op}(${e})`}}function cf(n,e){return n instanceof et?function(s,r){return r instanceof et&&s.op===r.op&&s.field.isEqual(r.field)&&en(s.value,r.value)}(n,e):n instanceof tn?function(s,r){return r instanceof tn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((o,a,c)=>o&&cf(a,r.filters[c]),!0):!1}(n,e):void ye()}function uf(n){return n instanceof et?function(t){return`${t.field.canonicalString()} ${t.op} ${qs(t.value)}`}(n):n instanceof tn?function(t){return t.op.toString()+" {"+t.getFilters().map(uf).join(" ,")+"}"}(n):"Filter"}class av extends et{constructor(e,t,s){super(e,t,s),this.key=he.fromName(s.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class lv extends et{constructor(e,t){super(e,"in",t),this.keys=df("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cv extends et{constructor(e,t){super(e,"not-in",t),this.keys=df("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function df(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>he.fromName(s.referenceValue))}class uv extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cl(t)&&Rr(t.arrayValue,this.value)}}class dv extends et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rr(this.value.arrayValue,t)}}class hv extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Rr(this.value.arrayValue,t)}}class fv extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Rr(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t=null,s=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function ku(n,e=null,t=[],s=[],r=null,o=null,a=null){return new pv(n,e,t,s,r,o,a)}function jl(n){const e=Te(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>La(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),yo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>qs(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>qs(s)).join(",")),e.ue=t}return e.ue}function Al(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pu(n.startAt,e.startAt)&&Pu(n.endAt,e.endAt)}function Fa(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t=null,s=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mv(n,e,t,s,r,o,a,c){return new bo(n,e,t,s,r,o,a,c)}function hf(n){return new bo(n)}function Du(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gv(n){return n.collectionGroup!==null}function Er(n){const e=Te(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new tt(Et.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Zi(o,s))}),t.has(Et.keyField().canonicalString())||e.ce.push(new Zi(Et.keyField(),s))}return e.ce}function Qt(n){const e=Te(n);return e.le||(e.le=xv(e,Er(n))),e.le}function xv(n,e){if(n.limitType==="F")return ku(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Zi(r.field,o)});const t=n.endAt?new Xi(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Xi(n.startAt.position,n.startAt.inclusive):null;return ku(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Ma(n,e,t){return new bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wo(n,e){return Al(Qt(n),Qt(e))&&n.limitType===e.limitType}function ff(n){return`${jl(Qt(n))}|lt:${n.limitType}`}function Cs(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(r=>uf(r)).join(", ")}]`),yo(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(r=>qs(r)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(r=>qs(r)).join(",")),`Target(${s})`}(Qt(n))}; limitType=${n.limitType})`}function _o(n,e){return e.isFoundDocument()&&function(s,r){const o=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):he.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(n,e)&&function(s,r){for(const o of Er(s))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,e)&&function(s,r){for(const o of s.filters)if(!o.matches(r))return!1;return!0}(n,e)&&function(s,r){return!(s.startAt&&!function(a,c,u){const d=Ru(a,c,u);return a.inclusive?d<=0:d<0}(s.startAt,Er(s),r)||s.endAt&&!function(a,c,u){const d=Ru(a,c,u);return a.inclusive?d>=0:d>0}(s.endAt,Er(s),r))}(n,e)}function yv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pf(n){return(e,t)=>{let s=!1;for(const r of Er(n)){const o=vv(r,e,t);if(o!==0)return o;s=s||r.field.isKeyField()}return 0}}function vv(n,e,t){const s=n.field.isKeyField()?he.comparator(e.key,t.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?$s(u,d):ye()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,o]of s)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(t,s)=>{for(const[r,o]of s)e(r,o)})}isEmpty(){return ev(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Je(he.comparator);function Kn(){return bv}const mf=new Je(he.comparator);function vr(...n){let e=mf;for(const t of n)e=e.insert(t.key,t);return e}function wv(n){let e=mf;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function rs(){return Nr()}function gf(){return Nr()}function Nr(){return new ws(n=>n.toString(),(n,e)=>n.isEqual(e))}const _v=new tt(he.comparator);function Ie(...n){let e=_v;for(const t of n)e=e.add(t);return e}const Ev=new tt(Se);function Nv(){return Ev}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ka(e)?"-0":e}}function Tv(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this._=void 0}}function Iv(n,e,t){return n instanceof Va?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Il(o)&&(o=vo(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof eo?xf(n,e):n instanceof to?yf(n,e):function(r,o){const a=jv(r,o),c=Ou(a)+Ou(r.Pe);return Oa(a)&&Oa(r.Pe)?Tv(c):Sv(r.serializer,c)}(n,e)}function Cv(n,e,t){return n instanceof eo?xf(n,e):n instanceof to?yf(n,e):t}function jv(n,e){return n instanceof Ba?function(s){return Oa(s)||function(o){return!!o&&"doubleValue"in o}(s)}(e)?e:{integerValue:0}:null}class Va extends Eo{}class eo extends Eo{constructor(e){super(),this.elements=e}}function xf(n,e){const t=vf(e);for(const s of n.elements)t.some(r=>en(r,s))||t.push(s);return{arrayValue:{values:t}}}class to extends Eo{constructor(e){super(),this.elements=e}}function yf(n,e){let t=vf(e);for(const s of n.elements)t=t.filter(r=>!en(r,s));return{arrayValue:{values:t}}}class Ba extends Eo{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ou(n){return Ye(n.integerValue||n.doubleValue)}function vf(n){return Cl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Av(n,e){return n.field.isEqual(e.field)&&function(s,r){return s instanceof eo&&r instanceof eo||s instanceof to&&r instanceof to?Us(s.elements,r.elements,en):s instanceof Ba&&r instanceof Ba?en(s.Pe,r.Pe):s instanceof Va&&r instanceof Va}(n.transform,e.transform)}class cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oi(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rl{}function bf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pv(n.key,cs.none()):new Pl(n.key,n.data,cs.none());{const t=n.data,s=Yt.empty();let r=new tt(Et.comparator);for(let o of e.fields)if(!r.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?s.delete(o):s.set(o,a),r=r.add(o)}return new No(n.key,s,new Vn(r.toArray()),cs.none())}}function Rv(n,e,t){n instanceof Pl?function(r,o,a){const c=r.value.clone(),u=Fu(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof No?function(r,o,a){if(!Oi(r.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Fu(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(wf(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Sr(n,e,t,s){return n instanceof Pl?function(o,a,c,u){if(!Oi(o.precondition,a))return c;const d=o.value.clone(),f=Mu(o.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,s):n instanceof No?function(o,a,c,u){if(!Oi(o.precondition,a))return c;const d=Mu(o.fieldTransforms,u,a),f=a.data;return f.setAll(wf(o)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,s):function(o,a,c){return Oi(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function Lu(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Us(s,r,(o,a)=>Av(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pl extends Rl{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class No extends Rl{constructor(e,t,s,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wf(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Fu(n,e,t){const s=new Map;He(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],a=o.transform,c=e.data.field(o.field);s.set(o.field,Cv(a,c,t[r]))}return s}function Mu(n,e,t){const s=new Map;for(const r of n){const o=r.transform,a=t.data.field(r.field);s.set(r.field,Iv(o,a,e))}return s}class Pv extends Rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&Rv(o,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Sr(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Sr(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=gf();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=t.has(r.key)?null:c;const u=bf(a,c);u!==null&&s.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(pe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(t,s)=>Lu(t,s))&&Us(this.baseMutations,e.baseMutations,(t,s)=>Lu(t,s))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,Ne;function _f(n){if(n===void 0)return wn("GRPC error has no .code"),X.UNKNOWN;switch(n){case Qe.OK:return X.OK;case Qe.CANCELLED:return X.CANCELLED;case Qe.UNKNOWN:return X.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return X.INTERNAL;case Qe.UNAVAILABLE:return X.UNAVAILABLE;case Qe.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Qe.NOT_FOUND:return X.NOT_FOUND;case Qe.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Qe.ABORTED:return X.ABORTED;case Qe.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Qe.DATA_LOSS:return X.DATA_LOSS;default:return ye()}}(Ne=Qe||(Qe={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new as([4294967295,4294967295],0);function Vu(n){const e=Lv().encode(n),t=new Qh;return t.update(e),new Uint8Array(t.digest())}function Bu(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new as([t,s],0),new as([r,o],0)]}class kl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new br(`Invalid padding: ${t}`);if(s<0)throw new br(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new br(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new br(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=as.fromNumber(this.Te)}Ee(e,t,s){let r=e.add(t.multiply(as.fromNumber(s)));return r.compare(Fv)===1&&(r=new as([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Vu(e),[s,r]=Bu(t);for(let o=0;o<this.hashCount;o++){const a=this.Ee(s,r,o);if(!this.de(a))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new kl(o,r,t);return s.forEach(c=>a.insert(c)),a}insert(e){if(this.Te===0)return;const t=Vu(e),[s,r]=Bu(t);for(let o=0;o<this.hashCount;o++){const a=this.Ee(s,r,o);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class br extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,s,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,zr.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new So(pe.min(),r,new Je(Se),Kn(),Ie())}}class zr{constructor(e,t,s,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new zr(s,t,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,s,r){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=r}}class Ef{constructor(e,t){this.targetId=e,this.me=t}}class Nf{constructor(e,t,s=ht.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class Uu{constructor(){this.fe=0,this.ge=$u(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),t=Ie(),s=Ie();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:ye()}}),new zr(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=$u()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Mv{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kn(),this.qe=xi(),this.Qe=xi(),this.Ke=new Je(Se)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,s=e.me.count,r=this.Ye(t);if(r){const o=r.target;if(Fa(o))if(s===0){const a=new he(o.path);this.We(t,a,xt.newNoDocument(a,pe.min()))}else He(s===1);else{const a=this.Ze(t);if(a!==s){const c=this.Xe(e),u=c?this.et(c,e,a):1;if(u!==0){this.He(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=t;let a,c;try{a=Gn(s).toUint8Array()}catch(u){if(u instanceof rf)return Bs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new kl(a,r,o)}catch(u){return Bs(u instanceof br?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Te===0?null:c}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let r=0;return s.forEach(o=>{const a=this.Le.nt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.We(t,o,null),r++)}),r}it(e){const t=new Map;this.Be.forEach((o,a)=>{const c=this.Ye(a);if(c){if(o.current&&Fa(c.target)){const u=new he(c.target.path);this.st(u).has(a)||this.ot(a,u)||this.We(a,u,xt.newNoDocument(u,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let s=Ie();this.Qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Ye(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(s=s.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new So(e,t,this.Ke,this.ke,s);return this.ke=Kn(),this.qe=xi(),this.Qe=xi(),this.Ke=new Je(Se),r}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Uu,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new tt(Se),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tt(Se),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Uu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xi(){return new Je(he.comparator)}function $u(){return new Je(he.comparator)}const Vv={asc:"ASCENDING",desc:"DESCENDING"},Bv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uv={and:"AND",or:"OR"};class $v{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ua(n,e){return n.useProto3Json||yo(e)?e:{value:e}}function qv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ds(n){return He(!!n),pe.fromTimestamp(function(t){const s=Hn(t);return new jt(s.seconds,s.nanos)}(n))}function Hv(n,e){return $a(n,e).canonicalString()}function $a(n,e){const t=function(r){return new Ke(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Sf(n){const e=Ke.fromString(n);return He(Af(e)),e}function ca(n,e){const t=Sf(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(If(t))}function Tf(n,e){return Hv(n.databaseId,e)}function Gv(n){const e=Sf(n);return e.length===4?Ke.emptyPath():If(e)}function qu(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function If(n){return He(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Wv(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(He(f===void 0||typeof f=="string"),ht.fromBase64String(f||"")):(He(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ht.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?X.UNKNOWN:_f(d.code);return new ue(f,d.message||"")}(a);t=new Nf(s,r,o,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ca(n,s.document.name),o=Ds(s.document.updateTime),a=s.document.createTime?Ds(s.document.createTime):pe.min(),c=new Yt({mapValue:{fields:s.document.fields}}),u=xt.newFoundDocument(r,o,a,c),d=s.targetIds||[],f=s.removedTargetIds||[];t=new Li(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ca(n,s.document),o=s.readTime?Ds(s.readTime):pe.min(),a=xt.newNoDocument(r,o),c=s.removedTargetIds||[];t=new Li([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ca(n,s.document),o=s.removedTargetIds||[];t=new Li([],o,r,null)}else{if(!("filter"in e))return ye();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:o}=s,a=new Ov(r,o),c=s.targetId;t=new Ef(c,a)}}return t}function Kv(n,e){return{documents:[Tf(n,e.path)]}}function Yv(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Tf(n,r);const o=function(d){if(d.length!==0)return jf(tn.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:js(g.field),direction:Xv(g.dir)}}(f))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Ua(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:t,parent:r}}function Jv(n){let e=Gv(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){He(s===1);const f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(m){const g=Cf(m);return g instanceof tn&&lf(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(g=>function(w){return new Zi(As(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,yo(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new Xi(v,g)}(t.startAt));let d=null;return t.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new Xi(v,g)}(t.endAt)),mv(e,r,a,o,c,"F",u,d)}function Qv(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cf(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=As(t.unaryFilter.field);return et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=As(t.unaryFilter.field);return et.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=As(t.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=As(t.unaryFilter.field);return et.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(n):n.fieldFilter!==void 0?function(t){return et.create(As(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return tn.create(t.compositeFilter.filters.map(s=>Cf(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ye()}}(t.compositeFilter.op))}(n):ye()}function Xv(n){return Vv[n]}function Zv(n){return Bv[n]}function e1(n){return Uv[n]}function js(n){return{fieldPath:n.canonicalString()}}function As(n){return Et.fromServerFormat(n.fieldPath)}function jf(n){return n instanceof et?function(t){if(t.op==="=="){if(Au(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NAN"}};if(ju(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Au(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NAN"}};if(ju(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(t.field),op:Zv(t.op),value:t.value}}}(n):n instanceof tn?function(t){const s=t.getFilters().map(r=>jf(r));return s.length===1?s[0]:{compositeFilter:{op:e1(t.op),filters:s}}}(n):ye()}function Af(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t,s,r,o=pe.min(),a=pe.min(),c=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.ht=e}}function n1(n){const e=Jv({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ma(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.ln=new r1}addToCollectionParentIndex(e,t){return this.ln.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(zn.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class r1{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new tt(Ke.comparator),o=!r.has(s);return this.index[t]=r.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new tt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class It{static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(41943040,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new zs(0)}static Qn(){return new zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu([n,e],[t,s]){const r=Se(n,t);return r===0?Se(e,s):r}class i1{constructor(e){this.Gn=e,this.buffer=new tt(Hu),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Hu(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zs(t)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await go(t)}await this.Yn(3e5)})}}class a1{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return H.resolve(xo.oe);const s=new i1(t);return this.Zn.forEachTarget(e,r=>s.Hn(r.sequenceNumber)).next(()=>this.Zn.er(e,r=>s.Hn(r))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(zu)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zu):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,r,o,a,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(s=m,c=Date.now(),this.removeTargets(e,s,t))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),Is()<=Ee.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:m})))}}function l1(n,e){return new a1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.changes=new ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(s!==null&&Sr(s.mutation,r,Vn.empty(),jt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ie()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ie()){const r=rs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,s).next(o=>{let a=vr();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const s=rs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ie()))}populateOverlays(e,t,s){const r=[];return s.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,s,r){let o=Kn();const a=Nr(),c=function(){return Nr()}();return t.forEach((u,d)=>{const f=s.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof No)?o=o.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Sr(f.mutation,d,f.mutation.getFieldMask(),jt.now())):a.set(d.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>a.set(d,f)),t.forEach((d,f)=>{var m;return c.set(d,new u1(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){const s=Nr();let r=new Je((a,c)=>a-c),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let f=s.get(u)||Vn.empty();f=c.applyToLocalView(d,f),s.set(u,f);const m=(r.get(c.batchId)||Ie()).add(u);r=r.insert(c.batchId,m)})}).next(()=>{const a=[],c=r.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=gf();f.forEach(g=>{if(!o.has(g)){const v=bf(t.get(g),s.get(g));v!==null&&m.set(g,v),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,r){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-o.size):H.resolve(rs());let c=-1,u=o;return a.next(d=>H.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),o.get(f)?H.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Ie())).next(f=>({batchId:c,changes:wv(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(s=>{let r=vr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const o=t.collectionGroup;let a=vr();return this.indexManager.getCollectionParents(e,o).next(c=>H.forEach(c,u=>{const d=function(m,g){return new bo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,s,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,r))).next(a=>{o.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,xt.newInvalidDocument(f)))});let c=vr();return a.forEach((u,d)=>{const f=o.get(u);f!==void 0&&Sr(f.mutation,d,Vn.empty(),jt.now()),_o(t,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return H.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Ds(r.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(r){return{name:r.name,query:n1(r.bundledQuery),readTime:Ds(r.readTime)}}(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.overlays=new Je(he.comparator),this.Er=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=rs();return H.forEach(t,r=>this.getOverlay(e,r).next(o=>{o!==null&&s.set(r,o)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((r,o)=>{this.Tt(e,t,o)}),H.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.Er.get(s);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const r=rs(),o=t.length+1,a=new he(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>s&&r.set(u.getKey(),u)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let o=new Je((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>s){let f=o.get(d.largestBatchId);f===null&&(f=rs(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=rs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return H.resolve(c)}Tt(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Er.get(r.largestBatchId).delete(s.key);this.Er.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Dv(t,s));let o=this.Er.get(t);o===void 0&&(o=Ie(),this.Er.set(t,o)),this.Er.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.dr=new tt(rt.Ar),this.Rr=new tt(rt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new rt(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new rt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new he(new Ke([])),s=new rt(t,e),r=new rt(t,e+1),o=[];return this.Rr.forEachInRange([s,r],a=>{this.gr(a),o.push(a.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new he(new Ke([])),s=new rt(t,e),r=new rt(t,e+1);let o=Ie();return this.Rr.forEachInRange([s,r],a=>{o=o.add(a.key)}),o}containsKey(e){const t=new rt(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class rt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return he.comparator(e.key,t.key)||Se(e.br,t.br)}static Vr(e,t){return Se(e.br,t.br)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new tt(rt.Ar)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kv(o,t,s,r);this.mutationQueue.push(a);for(const c of r)this.vr=this.vr.add(new rt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,t){return H.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.Fr(s),o=r<0?0:r;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new rt(t,0),r=new rt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([s,r],a=>{const c=this.Cr(a.br);o.push(c)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new tt(Se);return t.forEach(r=>{const o=new rt(r,0),a=new rt(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,a],c=>{s=s.add(c.br)})}),H.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let o=s;he.isDocumentKey(o)||(o=o.child(""));const a=new rt(new he(o),0);let c=new tt(Se);return this.vr.forEachWhile(u=>{const d=u.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(c=c.add(u.br)),!0)},a),H.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(s=>{const r=this.Cr(s);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){He(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return H.forEach(t.mutations,r=>{const o=new rt(r.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new rt(t,0),r=this.vr.firstAfterOrEqual(s);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.Nr=e,this.docs=function(){return new Je(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),o=r?r.size:0,a=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():xt.newInvalidDocument(t))}getEntries(e,t){let s=Kn();return t.forEach(r=>{const o=this.docs.get(r);s=s.insert(r,o?o.document.mutableCopy():xt.newInvalidDocument(r))}),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let o=Kn();const a=t.path,c=new he(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Ky(Wy(f),s)<=0||(r.has(f.key)||_o(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,t,s,r){ye()}Lr(e,t){return H.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new x1(this)}getSize(e){return H.resolve(this.size)}}class x1 extends c1{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(s)}),H.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.persistence=e,this.Br=new ws(t=>jl(t),Al),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new Dl,this.targetCount=0,this.Qr=zs.qn()}forEachTarget(e,t){return this.Br.forEach((s,r)=>t(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),H.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new zs(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Un(t),H.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let r=0;const o=[];return this.Br.forEach((a,c)=>{c.sequenceNumber<=t&&s.get(c.targetId)===null&&(this.Br.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),H.waitFor(o).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t){this.Kr={},this.overlays={},this.$r=new xo(0),this.Ur=!1,this.Ur=!0,this.Wr=new p1,this.referenceDelegate=e(this),this.Gr=new y1(this),this.indexManager=new s1,this.remoteDocumentCache=function(r){return new g1(r)}(s=>this.referenceDelegate.zr(s)),this.serializer=new t1(t),this.jr=new h1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new m1(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){ne("MemoryPersistence","Starting transaction:",e);const r=new v1(this.$r.next());return this.referenceDelegate.Hr(),s(r).next(o=>this.referenceDelegate.Jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Yr(e,t){return H.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class v1 extends Jy{constructor(e){super(),this.currentSequenceNumber=e}}class Ol{constructor(e){this.persistence=e,this.Zr=new Dl,this.Xr=null}static ei(e){return new Ol(e)}get ti(){if(this.Xr)return this.Xr;throw ye()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),H.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(r=>this.ti.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.ti.add(o.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ti,s=>{const r=he.fromPath(s);return this.ni(e,r).next(o=>{o||t.removeEntry(r,pe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return H.or([()=>H.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class no{constructor(e,t){this.persistence=e,this.ri=new ws(s=>Xy(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=l1(this,t)}static ei(e,t){return new no(e,t)}Hr(){}Jr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(r=>s+r))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return H.forEach(this.ri,(s,r)=>this.ir(e,s,r).next(o=>o?H.resolve():t(r)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.Lr(e,a=>this.ir(e,a,t).next(c=>{c||(s++,o.removeEntry(a,pe.min()))})).next(()=>o.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),H.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Di(e.data.value)),t}ir(e,t,s){return H.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.ri.get(t);return H.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=r}static zi(e,t){let s=Ie(),r=Ie();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Ll(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return bg()?8:Qy(vt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,r){const o={result:null};return this.Xi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.es(e,t,r,s).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new b1;return this.ts(e,t,a).next(c=>{if(o.result=c,this.Hi)return this.ns(e,t,a,c.size)})}).next(()=>o.result)}ns(e,t,s,r){return s.documentReadCount<this.Ji?(Is()<=Ee.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Cs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),H.resolve()):(Is()<=Ee.DEBUG&&ne("QueryEngine","Query:",Cs(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Yi*r?(Is()<=Ee.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Cs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):H.resolve())}Xi(e,t){if(Du(t))return H.resolve(null);let s=Qt(t);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Ma(t,null,"F"),s=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{const a=Ie(...o);return this.Zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,s).next(u=>{const d=this.rs(t,c);return this.ss(t,d,a,u.readTime)?this.Xi(e,Ma(t,null,"F")):this.os(e,d,t,u)}))})))}es(e,t,s,r){return Du(t)||r.isEqual(pe.min())?H.resolve(null):this.Zi.getDocuments(e,s).next(o=>{const a=this.rs(t,o);return this.ss(t,a,s,r)?H.resolve(null):(Is()<=Ee.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cs(t)),this.os(e,a,t,Gy(r,-1)).next(c=>c))})}rs(e,t){let s=new tt(pf(e));return t.forEach((r,o)=>{_o(e,o)&&(s=s.add(o))}),s}ss(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ts(e,t,s){return Is()<=Ee.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Cs(t)),this.Zi.getDocumentsMatchingQuery(e,t,zn.min(),s)}os(e,t,s,r){return this.Zi.getDocumentsMatchingQuery(e,s,r).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,t,s,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new Je(Se),this.cs=new ws(o=>jl(o),Al),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d1(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function E1(n,e,t,s){return new _1(n,e,t,s)}async function Pf(n,e){const t=Te(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next(o=>(r=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(o=>{const a=[],c=[];let u=Ie();for(const d of r){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(s,u).next(d=>({Ts:d,removedBatchIds:a,addedBatchIds:c}))})})}function kf(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function N1(n,e){const t=Te(n),s=e.snapshotVersion;let r=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=t.hs.newChangeBuffer({trackRemovals:!0});r=t.us;const c=[];e.targetChanges.forEach((f,m)=>{const g=r.get(m);if(!g)return;c.push(t.Gr.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.Gr.addMatchingKeys(o,f.addedDocuments,m)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(ht.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,s)),r=r.insert(m,v),function(N,x,I){return N.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,v,f)&&c.push(t.Gr.updateTargetData(o,v))});let u=Kn(),d=Ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(S1(o,a,e.documentUpdates).next(f=>{u=f.Is,d=f.Es})),!s.isEqual(pe.min())){const f=t.Gr.getLastRemoteSnapshotVersion(o).next(m=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,s));c.push(f)}return H.waitFor(c).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.us=r,o))}function S1(n,e,t){let s=Ie(),r=Ie();return t.forEach(o=>s=s.add(o)),e.getEntries(n,s).next(o=>{let a=Kn();return t.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):ne("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Is:a,Es:r}})}function T1(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return t.Gr.getTargetData(s,e).next(o=>o?(r=o,H.resolve(r)):t.Gr.allocateTargetId(s).next(a=>(r=new Bn(e,a,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=t.us.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function qa(n,e,t){const s=Te(n),r=s.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Zs(a))throw a;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}s.us=s.us.remove(e),s.cs.delete(r.target)}function Gu(n,e,t){const s=Te(n);let r=pe.min(),o=Ie();return s.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=Te(u),g=m.cs.get(f);return g!==void 0?H.resolve(m.us.get(g)):m.Gr.getTargetData(d,f)}(s,a,Qt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>s._s.getDocumentsMatchingQuery(a,e,t?r:pe.min(),t?o:Ie())).next(c=>(I1(s,yv(e),c),{documents:c,ds:o})))}function I1(n,e,t){let s=n.ls.get(e)||pe.min();t.forEach((r,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)}),n.ls.set(e,s)}class Wu{constructor(){this.activeTargetIds=Nv()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C1{constructor(){this._o=new Wu,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Wu,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi=null;function ua(){return yi===null?yi=function(){return 268435456+Math.round(2147483648*Math.random())}():yi++,"0x"+yi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class P1 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${r}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Oo(t,s,r,o,a){const c=ua(),u=this.No(t,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${t}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(d,o,a),this.Bo(t,u,d,r).then(f=>(ne("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Bs("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",r),f})}ko(t,s,r,o,a,c){return this.Oo(t,s,r,o,a)}Lo(t,s,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((o,a)=>t[a]=o),r&&r.headers.forEach((o,a)=>t[a]=o)}No(t,s){const r=A1[t];return`${this.Fo}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,r){const o=ua();return new Promise((a,c)=>{const u=new Xh;u.setWithCredentials(!0),u.listenOnce(Zh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ki.NO_ERROR:const f=u.getResponseJson();ne(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case ki.TIMEOUT:ne(mt,`RPC '${e}' ${o} timed out`),c(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case ki.HTTP_ERROR:const m=u.getStatus();if(ne(mt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const w=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(I)>=0?I:X.UNKNOWN}(v.status);c(new ue(w,v.message))}else c(new ue(X.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(X.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ne(mt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(r);ne(mt,`RPC '${e}' ${o} sending request:`,r),u.send(t,"POST",d,s,15)})}qo(e,t,s){const r=ua(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nf(),c=tf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,t,s),u.encodeInitMessageHeaders=!0;const f=o.join("");ne(mt,`Creating RPC '${e}' stream ${r}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,v=!1;const w=new R1({Eo:x=>{v?ne(mt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(g||(ne(mt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),ne(mt,`RPC '${e}' stream ${r} sending:`,x),m.send(x))},Ao:()=>m.close()}),N=(x,I,R)=>{x.listen(I,_=>{try{R(_)}catch(P){setTimeout(()=>{throw P},0)}})};return N(m,yr.EventType.OPEN,()=>{v||(ne(mt,`RPC '${e}' stream ${r} transport opened.`),w.So())}),N(m,yr.EventType.CLOSE,()=>{v||(v=!0,ne(mt,`RPC '${e}' stream ${r} transport closed`),w.Do())}),N(m,yr.EventType.ERROR,x=>{v||(v=!0,Bs(mt,`RPC '${e}' stream ${r} transport errored:`,x),w.Do(new ue(X.UNAVAILABLE,"The operation could not be completed")))}),N(m,yr.EventType.MESSAGE,x=>{var I;if(!v){const R=x.data[0];He(!!R);const _=R,P=(_==null?void 0:_.error)||((I=_[0])===null||I===void 0?void 0:I.error);if(P){ne(mt,`RPC '${e}' stream ${r} received error:`,P);const O=P.status;let D=function(E){const j=Qe[E];if(j!==void 0)return _f(j)}(O),y=P.message;D===void 0&&(D=X.INTERNAL,y="Unknown error status: "+O+" with message "+P.message),v=!0,w.Do(new ue(D,y)),m.close()}else ne(mt,`RPC '${e}' stream ${r} received:`,R),w.vo(R)}}),N(c,ef.STAT_EVENT,x=>{x.stat===Pa.PROXY?ne(mt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===Pa.NOPROXY&&ne(mt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}}function da(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n){return new $v(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,s=1e3,r=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=r,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-s);r>0&&ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,t,s,r,o,a,c,u){this.li=e,this.Yo=s,this.Zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Of(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(wn(t.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Xo===t&&this.I_(s,r)},s=>{e(()=>{const r=new ue(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(r)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{s(()=>this.E_(r))}),this.stream.onMessage(r=>{s(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class D1 extends k1{constructor(e,t,s,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,a),this.serializer=o}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Wv(this.serializer,e),s=function(o){if(!("targetChange"in o))return pe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?pe.min():a.readTime?Ds(a.readTime):pe.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=qu(this.serializer),t.addTarget=function(o,a){let c;const u=a.target;if(c=Fa(u)?{documents:Kv(o,u)}:{query:Yv(o,u).ct},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=zv(o,a.resumeToken);const d=Ua(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(pe.min())>0){c.readTime=qv(o,a.snapshotVersion.toTimestamp());const d=Ua(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const s=Qv(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=qu(this.serializer),t.removeTarget=e,this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends class{}{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Oo(e,$a(t,s),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(X.UNKNOWN,o.toString())})}ko(e,t,s,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ko(e,$a(t,s),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(X.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class L1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wn(t),this.C_=!1):ne("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,s,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(a=>{s.enqueueAndForget(async()=>{Gr(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Te(u);d.k_.add(4),await Hr(d),d.K_.set("Unknown"),d.k_.delete(4),await To(d)}(this))})}),this.K_=new L1(s,r)}}async function To(n){if(Gr(n))for(const e of n.q_)await e(!0)}async function Hr(n){for(const e of n.q_)await e(!1)}function Lf(n,e){const t=Te(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Bl(t)?Vl(t):er(t).s_()&&Ml(t,e))}function Fl(n,e){const t=Te(n),s=er(t);t.B_.delete(e),s.s_()&&Ff(t,e),t.B_.size===0&&(s.s_()?s.a_():Gr(t)&&t.K_.set("Unknown"))}function Ml(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}er(n).V_(e)}function Ff(n,e){n.U_.xe(e),er(n).m_(e)}function Vl(n){n.U_=new Mv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),er(n).start(),n.K_.F_()}function Bl(n){return Gr(n)&&!er(n).i_()&&n.B_.size>0}function Gr(n){return Te(n).k_.size===0}function Mf(n){n.U_=void 0}async function M1(n){n.K_.set("Online")}async function V1(n){n.B_.forEach((e,t)=>{Ml(n,e)})}async function B1(n,e){Mf(n),Bl(n)?(n.K_.O_(e),Vl(n)):n.K_.set("Unknown")}async function U1(n,e,t){if(n.K_.set("Online"),e instanceof Nf&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const c of o.targetIds)r.B_.has(c)&&(await r.remoteSyncer.rejectListen(c,a),r.B_.delete(c),r.U_.removeTarget(c))}(n,e)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yu(n,s)}else if(e instanceof Li?n.U_.$e(e):e instanceof Ef?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(pe.min()))try{const s=await kf(n.localStore);t.compareTo(s)>=0&&await function(o,a){const c=o.U_.it(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.B_.get(d);f&&o.B_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=o.B_.get(u);if(!f)return;o.B_.set(u,f.withResumeToken(ht.EMPTY_BYTE_STRING,f.snapshotVersion)),Ff(o,u);const m=new Bn(f.target,u,d,f.sequenceNumber);Ml(o,m)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),await Yu(n,s)}}async function Yu(n,e,t){if(!Zs(e))throw e;n.k_.add(1),await Hr(n),n.K_.set("Offline"),t||(t=()=>kf(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await To(n)})}async function Ju(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=Gr(t);t.k_.add(3),await Hr(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await To(t)}async function $1(n,e){const t=Te(n);e?(t.k_.delete(2),await To(t)):e||(t.k_.add(2),await Hr(t),t.K_.set("Unknown"))}function er(n){return n.W_||(n.W_=function(t,s,r){const o=Te(t);return o.b_(),new D1(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Ro:M1.bind(null,n),mo:V1.bind(null,n),po:B1.bind(null,n),R_:U1.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Bl(n)?Vl(n):n.K_.set("Unknown")):(await n.W_.stop(),Mf(n))})),n.W_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t,s,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=o,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,o){const a=Date.now()+s,c=new Ul(e,t,a,r,o);return c.start(s),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vf(n,e){if(wn("AsyncQueue",`${e}: ${n}`),Zs(n))return new ue(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||he.comparator(t.key,s.key):(t,s)=>he.comparator(t.key,s.key),this.keyedMap=vr(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Os;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this.z_=new Je(he.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ye():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Hs{constructor(e,t,s,r,o,a,c,u,d){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,s,r,o){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Hs(e,t,Os.emptySet(t),a,s,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class z1{constructor(){this.queries=Xu(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const r=Te(t),o=r.queries;r.queries=Xu(),o.forEach((a,c)=>{for(const u of c.J_)u.onError(s)})})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function Xu(){return new ws(n=>ff(n),wo)}async function H1(n,e){const t=Te(n);let s=3;const r=e.query;let o=t.queries.get(r);o?!o.Y_()&&e.Z_()&&(s=2):(o=new q1,s=e.Z_()?0:1);try{switch(s){case 0:o.H_=await t.onListen(r,!0);break;case 1:o.H_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(a){const c=Vf(a,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&$l(t)}async function G1(n,e){const t=Te(n),s=e.query;let r=3;const o=t.queries.get(s);if(o){const a=o.J_.indexOf(e);a>=0&&(o.J_.splice(a,1),o.J_.length===0?r=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function W1(n,e){const t=Te(n);let s=!1;for(const r of e){const o=r.query,a=t.queries.get(o);if(a){for(const c of a.J_)c.ta(r)&&(s=!0);a.H_=r}}s&&$l(t)}function K1(n,e,t){const s=Te(n),r=s.queries.get(e);if(r)for(const o of r.J_)o.onError(t);s.queries.delete(e)}function $l(n){n.X_.forEach(e=>{e.next()})}var za,Zu;(Zu=za||(za={})).na="default",Zu.Cache="cache";class Y1{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Hs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Hs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==za.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.key=e}}class Uf{constructor(e){this.key=e}}class J1{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ie(),this.mutatedKeys=Ie(),this.Va=pf(e),this.ma=new Os(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new Qu,r=t?t.ma:this.ma;let o=t?t.mutatedKeys:this.mutatedKeys,a=r,c=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const g=r.get(f),v=_o(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;g&&v?g.data.isEqual(v.data)?w!==N&&(s.track({type:3,doc:v}),x=!0):this.ya(g,v)||(s.track({type:2,doc:v}),x=!0,(u&&this.Va(v,u)>0||d&&this.Va(v,d)<0)&&(c=!0)):!g&&v?(s.track({type:0,doc:v}),x=!0):g&&!v&&(s.track({type:1,doc:g}),x=!0,(u||d)&&(c=!0)),x&&(v?(a=a.add(v),o=N?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),s.track({type:1,doc:f})}return{ma:a,pa:s,ss:c,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((f,m)=>function(v,w){const N=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return N(v)-N(w)}(f.type,m.type)||this.Va(f.doc,m.doc)),this.wa(s),r=r!=null&&r;const c=t&&!r?this.Sa():[],u=this.Ra.size===0&&this.current&&!r?1:0,d=u!==this.Aa;return this.Aa=u,a.length!==0||d?{snapshot:new Hs(this.query,e.ma,o,a,e.mutatedKeys,u===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Qu,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ie(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new Uf(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new Bf(s))}),t}va(e){this.da=e.ds,this.Ra=Ie();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Hs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Q1{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class X1{constructor(e){this.key=e,this.Fa=!1}}class Z1{constructor(e,t,s,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new ws(c=>ff(c),wo),this.Oa=new Map,this.Na=new Set,this.La=new Je(he.comparator),this.Ba=new Map,this.ka=new Dl,this.qa={},this.Qa=new Map,this.Ka=zs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function eb(n,e,t=!0){const s=Gf(n);let r;const o=s.xa.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Ca()):r=await $f(s,e,t,!0),r}async function tb(n,e){const t=Gf(n);await $f(t,e,!0,!1)}async function $f(n,e,t,s){const r=await T1(n.localStore,Qt(e)),o=r.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t);let c;return s&&(c=await nb(n,e,o,a==="current",r.resumeToken)),n.isPrimaryClient&&t&&Lf(n.remoteStore,r),c}async function nb(n,e,t,s,r){n.Ua=(m,g,v)=>async function(N,x,I,R){let _=x.view.ga(I);_.ss&&(_=await Gu(N.localStore,x.query,!1).then(({documents:y})=>x.view.ga(y,_)));const P=R&&R.targetChanges.get(x.targetId),O=R&&R.targetMismatches.get(x.targetId)!=null,D=x.view.applyChanges(_,N.isPrimaryClient,P,O);return td(N,x.targetId,D.ba),D.snapshot}(n,m,g,v);const o=await Gu(n.localStore,e,!0),a=new J1(e,o.ds),c=a.ga(o.documents),u=zr.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),d=a.applyChanges(c,n.isPrimaryClient,u);td(n,t,d.ba);const f=new Q1(e,t,a);return n.xa.set(e,f),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),d.snapshot}async function sb(n,e,t){const s=Te(n),r=s.xa.get(e),o=s.Oa.get(r.targetId);if(o.length>1)return s.Oa.set(r.targetId,o.filter(a=>!wo(a,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await qa(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Fl(s.remoteStore,r.targetId),Ha(s,r.targetId)}).catch(go)):(Ha(s,r.targetId),await qa(s.localStore,r.targetId,!0))}async function rb(n,e){const t=Te(n),s=t.xa.get(e),r=t.Oa.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Fl(t.remoteStore,s.targetId))}async function qf(n,e){const t=Te(n);try{const s=await N1(t.localStore,e);e.targetChanges.forEach((r,o)=>{const a=t.Ba.get(o);a&&(He(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Fa=!0:r.modifiedDocuments.size>0?He(a.Fa):r.removedDocuments.size>0&&(He(a.Fa),a.Fa=!1))}),await Hf(t,s,e)}catch(s){await go(s)}}function ed(n,e,t){const s=Te(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.xa.forEach((o,a)=>{const c=a.view.ea(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){const u=Te(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.J_)g.ea(c)&&(d=!0)}),d&&$l(u)}(s.eventManager,e),r.length&&s.Ma.R_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ib(n,e,t){const s=Te(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Ba.get(e),o=r&&r.key;if(o){let a=new Je(he.comparator);a=a.insert(o,xt.newNoDocument(o,pe.min()));const c=Ie().add(o),u=new So(pe.min(),new Map,new Je(Se),a,c);await qf(s,u),s.La=s.La.remove(o),s.Ba.delete(e),ql(s)}else await qa(s.localStore,e,!1).then(()=>Ha(s,e,t)).catch(go)}function Ha(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Oa.get(e))n.xa.delete(s),t&&n.Ma.Wa(s,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(s=>{n.ka.containsKey(s)||zf(n,s)})}function zf(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Fl(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),ql(n))}function td(n,e,t){for(const s of t)s instanceof Bf?(n.ka.addReference(s.key,e),ob(n,s)):s instanceof Uf?(ne("SyncEngine","Document no longer in limbo: "+s.key),n.ka.removeReference(s.key,e),n.ka.containsKey(s.key)||zf(n,s.key)):ye()}function ob(n,e){const t=e.key,s=t.path.canonicalString();n.La.get(t)||n.Na.has(s)||(ne("SyncEngine","New document in limbo: "+t),n.Na.add(s),ql(n))}function ql(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new he(Ke.fromString(e)),s=n.Ka.next();n.Ba.set(s,new X1(t)),n.La=n.La.insert(t,s),Lf(n.remoteStore,new Bn(Qt(hf(t.path)),s,"TargetPurposeLimboResolution",xo.oe))}}async function Hf(n,e,t){const s=Te(n),r=[],o=[],a=[];s.xa.isEmpty()||(s.xa.forEach((c,u)=>{a.push(s.Ua(u,e,t).then(d=>{var f;if((d||t)&&s.isPrimaryClient){const m=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;s.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){r.push(d);const m=Ll.zi(u.targetId,d);o.push(m)}}))}),await Promise.all(a),s.Ma.R_(r),await async function(u,d){const f=Te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(d,g=>H.forEach(g.Wi,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>H.forEach(g.Gi,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Zs(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.us.get(g),w=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(w);f.us=f.us.insert(g,N)}}}(s.localStore,o))}async function ab(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const s=await Pf(t.localStore,e);t.currentUser=e,function(o,a){o.Qa.forEach(c=>{c.forEach(u=>{u.reject(new ue(X.CANCELLED,a))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Hf(t,s.Ts)}}function lb(n,e){const t=Te(n),s=t.Ba.get(e);if(s&&s.Fa)return Ie().add(s.key);{let r=Ie();const o=t.Oa.get(e);if(!o)return r;for(const a of o){const c=t.xa.get(a);r=r.unionWith(c.view.fa)}return r}}function Gf(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ib.bind(null,e),e.Ma.R_=W1.bind(null,e.eventManager),e.Ma.Wa=K1.bind(null,e.eventManager),e}class so{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return E1(this.persistence,new w1,e.initialUser,this.serializer)}ja(e){return new Rf(Ol.ei,this.serializer)}za(e){return new C1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}so.provider={build:()=>new so};class cb extends so{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){He(this.persistence.referenceDelegate instanceof no);const s=this.persistence.referenceDelegate.garbageCollector;return new o1(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new Rf(s=>no.ei(s,t),this.serializer)}}class Ga{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ed(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ab.bind(null,this.syncEngine),await $1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z1}()}createDatastore(e){const t=Df(e.databaseInfo.databaseId),s=function(o){return new P1(o)}(e.databaseInfo);return function(o,a,c,u){return new O1(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,r,o,a,c){return new F1(s,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>ed(this.syncEngine,t,0),function(){return Ku.p()?new Ku:new j1}())}createSyncEngine(e,t){return function(r,o,a,c,u,d,f){const m=new Z1(r,o,a,c,u,d);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const o=Te(r);ne("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Hr(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ga.provider={build:()=>new Ga};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,s,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=gt.UNAUTHENTICATED,this.clientId=zy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async a=>{ne("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(ne("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Vf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ha(n,e){n.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Pf(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function nd(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hb(n);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>Ju(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Ju(e.remoteStore,r)),n._onlineComponents=e}async function hb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await ha(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===X.FAILED_PRECONDITION||r.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),await ha(n,new so)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await ha(n,new cb(void 0));return n._offlineComponents}async function fb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await nd(n,n._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await nd(n,new Ga))),n._onlineComponents}async function pb(n){const e=await fb(n),t=e.eventManager;return t.onListen=eb.bind(null,e.syncEngine),t.onUnlisten=sb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rb.bind(null,e.syncEngine),t}function mb(n,e,t={}){const s=new ls;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const f=new ub({next:g=>{f.eu(),a.enqueueAndForget(()=>G1(o,m)),g.fromCache&&u.source==="server"?d.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Y1(c,f,{includeMetadataChanges:!0,ua:!0});return H1(o,m)}(await pb(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map;function gb(n,e,t,s){if(e===!0&&s===!0)throw new ue(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rd(n){if(he.isDocumentKey(n))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye()}function Wa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xb(n);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wf((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zl{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new id({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new id(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Ly;switch(s.type){case"firstParty":return new By(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=sd.get(t);s&&(ne("ComponentProvider","Removing Datastore"),sd.delete(t),s.terminate())}(this),Promise.resolve()}}function yb(n,e,t,s={}){var r;const o=(n=Wa(n,zl))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),s.mockUserToken){let c,u;if(typeof s.mockUserToken=="string")c=s.mockUserToken,u=gt.MOCK_USER;else{c=fg(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gt(d)}n._authCredentials=new Fy(new sf(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class tr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Ls extends Io{constructor(e,t,s){super(e,t,hf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new he(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function vb(n,e,...t){if(n=bs(n),n instanceof zl){const s=Ke.fromString(e,...t);return rd(s),new Ls(n,null,s)}{if(!(n instanceof tr||n instanceof Ls))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ke.fromString(e,...t));return rd(s),new Ls(n.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Of(this,"async_queue_retry"),this.fu=()=>{const s=da();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=da();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=da();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new ls;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Zs(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(s);throw wn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=Ul.createAndSchedule(this,e,t,s,o=>this.Su(o));return this.du.push(r),r}pu(){this.Au&&ye()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Kf extends zl{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new od,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new od(e),this._firestoreClient=void 0,await e}}}function bb(n,e){const t=typeof n=="object"?n:gh(),s=typeof n=="string"?n:"(default)",r=pl(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const o=dg("firestore");o&&yb(r,...o)}return r}function wb(n){if(n._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_b(n),n._firestoreClient}function _b(n){var e,t,s;const r=n._freezeSettings(),o=function(c,u,d,f){return new nv(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Wf(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new db(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(ht.fromBase64String(e))}catch(t){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ro(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==r[o])return!1;return!0}(this._values,e._values)}}const Sb=new RegExp("[~\\*/\\[\\]]");function Tb(n,e,t){if(e.search(Sb)>=0)throw ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Yf(...e.split("."))._internalPath}catch{throw ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function ad(n,e,t,s,r){let o=`Function ${e}() called with invalid data`;o+=". ";let a="";return new ue(X.INVALID_ARGUMENT,o+n+a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,s,r,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ib extends Jf{data(){return super.data()}}function Qf(n,e){return typeof e=="string"?Tb(n,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{convertValue(e,t="none"){switch(Wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return qr(e,(r,o)=>{s[r]=this.convertValue(o,t)}),s}convertVectorValue(e){var t,s,r;const o=(r=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>Ye(a.doubleValue));return new Nb(o)}convertGeoPoint(e){return new Eb(Ye(e.latitude),Ye(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=vo(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(jr(e));default:return null}}convertTimestamp(e){const t=Hn(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ke.fromString(e);He(Af(s));const r=new Ar(s.get(1),s.get(3)),o=new he(s.popFirst(5));return r.isEqual(t)||wn(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ab extends Jf{constructor(e,t,s,r,o,a){super(e,t,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Qf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Fi extends Ab{data(e={}){return super.data(e)}}class Rb{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Fi(this._firestore,this._userDataWriter,s.key,s,new vi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{const u=new Fi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new Fi(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:Pb(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Pb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}class kb extends jb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function Db(n){n=Wa(n,Io);const e=Wa(n.firestore,Kf),t=wb(e),s=new kb(e);return Cb(n._query),mb(t,n._query).then(r=>new Rb(e,s,n,r))}(function(e,t=!0){(function(r){Xs=r})(Js),Ms(new hs("firestore",(s,{instanceIdentifier:r,options:o})=>{const a=s.getProvider("app").getImmediate(),c=new Kf(new My(s.getProvider("auth-internal")),new $y(s.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ar(d.options.projectId,f)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),qn(Eu,"4.7.5",e),qn(Eu,"4.7.5","esm2017")})();const Ob={apiKey:"AIzaSyDxozItrgOH9PmNhIhIogFv53Rms1t2Ts4",authDomain:"appoinment-system-5687f.firebaseapp.com",projectId:"appoinment-system-5687f",storageBucket:"appoinment-system-5687f.firebasestorage.app",messagingSenderId:"164618108759",appId:"1:164618108759:web:7d3e7e0747c26267940812"},Xf=mh(Ob),Lb=bb(Xf),Zf=Dy(Xf),ep=new pn,ld=()=>{const[n,e]=C.useState([]),[t,s]=C.useState([]);C.useEffect(()=>{(async()=>{const c=(await Db(vb(Lb,"faqs"))).docs.map(u=>({id:u.id,...u.data()}));e(c)})()},[]);const r=o=>{s(a=>a.includes(o)?a.filter(c=>c!==o):[...a,o])};return i.jsx(i.Fragment,{children:i.jsxs("section",{className:" bg-[#161F55] w-full flex justify-center flex-col text-center relative  ",children:[i.jsx("h2",{className:" text-Fwhite font-LatoBold text-[60px] mb-8 mt-24 tracking-widest ",children:"FAQs"}),i.jsx("div",{className:"w-[400px] h-1 bg-[#F3BC62] mx-auto mb-8"}),i.jsx("p",{className:" mx-auto font-LatoRegular text-Bbackground text-[30px] tracking-wider w-[900px] mb-20",children:"Find answers to common questions here. For anything else, feel free to contact us!"}),i.jsx("div",{className:"w-full max-w-md mx-auto mt-2 mb-32 flex flex-col items-center",children:n.map(o=>i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{onClick:()=>r(o.id),className:`flex justify-between items-center text-3xl w-[900px] text-Fwhite p-4 border-[3px] cursor-pointer ${t.includes(o.id)?"bg-[#d9d9d9] text-[#161f55] font-LatoBold":"hover:bg-Fwhite hover:text-black hover:font-LatoBold "}`,children:[i.jsx("span",{className:"flex text-start",children:o.Title}),i.jsx("span",{className:"text-[35px] ",children:t.includes(o.id)?"−":"+"})]}),t.includes(o.id)&&i.jsx("div",{className:"text-Fwhite p-4 border-2 cursor-pointer h-[10rem] flex justify-center items-center",children:i.jsx("p",{className:"text-[24px] text-start",children:o.Content})})]},o.id))})]})})},Fb="https://appointment-system-backend-n8dk.onrender.com",Mb=async n=>{var e;try{return(await fetch(`${Fb}/api/attachment/upload`,{method:"POST",body:n,credentials:"include"})).data}catch(t){throw((e=t.response)==null?void 0:e.data)||{error:"Something went wrong"}}},cd=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[r,o]=C.useState(""),[a,c]=C.useState(""),[u,d]=C.useState(""),[f,m]=C.useState(""),[g,v]=C.useState(""),[w,N]=C.useState(""),x=R=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R),I=async R=>{R.preventDefault();let _=!0;if(n.trim()?d(""):(d("This field is required."),_=!1),t.trim()?x(t)?m(""):(m("Please enter a valid email address."),_=!1):(m("This field is required."),_=!1),r.trim()?v(""):(v("This field is required."),_=!1),a.trim()?N(""):(N("This field is required."),_=!1),!!_)try{const O=await Mb({name:n,email:t,subject:r,message:a});alert(O.message||"Form submitted successfully!"),e(""),s(""),o(""),c("")}catch(P){alert(P.error||"Failed to submit the form.")}};return i.jsxs(i.Fragment,{children:[i.jsx("section",{children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:"/assets/image/bg.png",alt:"Image",className:"w-full h-full object-cover"}),i.jsx("span",{className:"absolute inset-0 bg-OBackground opacity-30"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("h2",{className:"text-Fwhite font-LatoBold h-[150px] text-[60px]",children:"CONTACT US"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center mt-32",children:i.jsx("p",{className:"text-Bbackground font-LatoRegular text-[30px] text-center w-[884px] tracking-wider",children:"If you have any inquiries, require assistance, or wish to provide feedback, we are here to assist you"})})]})}),i.jsx("section",{className:"bg-[#161F55] text-Fwhite w-full h-auto py-10",children:i.jsxs("div",{className:"flex flex-col lg:flex-row w-full min-h-screen bg-[#121B52] lg:px-20 py-10 ",children:[i.jsx("div",{className:"w-full lg:w-1/2 overflow-hidden",children:i.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d123347.40710675181!2d120.61418624335936!3d14.959002300000003!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33965634a341dc6f%3A0x17091aa8b0043f89!2sLa%20Verdad%20Christian%20College!5e0!3m2!1sen!2sph!4v1737910779201!5m2!1sen!2sph",className:"w-full h-full min-h-[500px]",allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Google Map"})}),i.jsxs("div",{className:"w-full lg:w-1/2 bg-[#FEFEFE] p-10 shadow-lg",children:[i.jsx("h2",{className:"text-[36px] font-LatoBold mb-2 text-[#161F55]",children:"GET IN TOUCH"}),i.jsx("span",{className:"block w-[15.5rem] h-1 bg-[#F3BC62] mb-8"}),i.jsxs("form",{className:"space-y-2",onSubmit:I,children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-LatoRegular text-[25px] text-[#161F55] mb-2",children:"Name"}),i.jsx("input",{type:"text",placeholder:"Name",value:n,onChange:R=>{e(R.target.value),R.target.value.trim()!==""&&d("")},className:`w-full px-4 py-2 border-2 rounded-lg bg-white text-[#161F55] placeholder:text-[#000] placeholder:opacity-50 ${u?"border-red-500":"border-[#425066] border-opacity-40"}`}),u&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:u})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[#161F55] font-LatoRegular text-[25px] mb-2",children:"Email"}),i.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:R=>{s(R.target.value),f&&x(R.target.value)&&m("")},className:`w-full px-4 py-2 border-2 rounded-lg bg-white text-[#161F55] placeholder:text-[#000] placeholder:opacity-50 ${f?"border-red-500":"border-[#425066] border-opacity-40"}`}),f&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:f})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[#161F55] font-LatoRegular text-[25px] mb-2",children:"Subject"}),i.jsx("input",{type:"text",placeholder:"Subject",value:r,onChange:R=>{o(R.target.value),R.target.value.trim()!==""&&v("")},className:`w-full px-4 py-2 border-2 rounded-lg bg-white text-[#161F55] placeholder:text-[#000] placeholder:opacity-50 ${g?"border-red-500":"border-[#425066] border-opacity-40"}`}),g&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:g})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[#161F55] font-LatoRegular text-[25px] mb-2",children:"Message"}),i.jsx("textarea",{placeholder:"Message",rows:"5",value:a,onChange:R=>{c(R.target.value),R.target.value.trim()!==""&&N("")},className:`w-full px-4 py-2 border-2 rounded-lg bg-white text-[#161F55] placeholder:text-[#000] placeholder:opacity-50 ${w?"border-red-500":"border-[#425066] border-opacity-40"}`}),w&&i.jsx("p",{className:"text-red-500 text-sm mt-1",children:w})]}),i.jsx("button",{type:"submit",className:"bg-[#161F55] text-Fwhite px-6 py-3 rounded-lg float-right hover:bg-[#0D133F] transition",children:"Send Message"})]})]})]})})]})},Vb=n=>{const[e,t]=C.useState(!1),[s,r]=C.useState(!1),o=C.useRef(null);return{isChecked:e,highlight:s,textRef:o,handleCheckBox:u=>{t(u.target.checked),u.target.checked&&r(!1)},handleNext:()=>{e?(r(!1),n()):(r(!0),o.current.scrollIntoView({behavior:"smooth",block:"center"}))}}},tp=({onNext:n})=>{const{isChecked:e,highlight:t,textRef:s,handleCheckBox:r,handleNext:o}=Vb(n);return i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cover bg-center",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')"},children:i.jsxs("div",{className:"bg-[#EEF2F7] p-10 rounded-lg shadow-lg max-w-xl w-full ",children:[i.jsx("h2",{className:"text-[35px] font-LatoBold text-[#161F55] mb-5 text-center tracking-wider",children:"DATA PRIVACY NOTICE"}),i.jsx("div",{className:" mx-auto w-[24rem] h-1 bg-[#F3BC62]"}),i.jsxs("p",{className:"text-[16px] mb-6 mt-6 text-justify text-[#161F55] font-LatoRegular leading-relaxed",children:["In compliance with data privacy laws such as, but not limited to, Republic Act No. 10173 (Data Privacy Act of 2012) and its implementing rules and regulations, we within the Organization of La Verdad Christian College (LVCC), collect and process your personal information in this survey form for the Research Subject purposes only, keeping them securely and with confidentiality using our organizational, technical, and physical security measures, and retain them in accordance with our retention policy. We don’t share them to any external group without your consent, unless otherwise stated in our privacy notice. You have the right to be informed, to object, to access, to rectify, to erase or to block the processing of your personal information, as well as your right to data portability, to file a complaint and be entitled to damages for violation of your rights under this data privacy.",i.jsx("br",{}),i.jsx("br",{}),"For your data privacy inquiries, you may reach our Data Protection Officer through:",i.jsx("br",{}),"Email:"," ",i.jsx("span",{className:"underline text-[#161F55] font-bold cursor-pointer",children:i.jsx("a",{href:"mailto:dpo@laverdad.edu.ph",target:"_blank",rel:"noopener noreferrer",children:"dpo@laverdad.edu.ph"})})]}),i.jsx("form",{className:"mb-6",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx("input",{type:"checkbox",id:"agree",onChange:r,className:`w-4 h-4 mt-1 border-2 ${t&&!e?"border-[#B50A0A] border-8":"border-[#161F55]"}`,"aria-label":"Agree to the terms and conditions"}),i.jsxs("label",{htmlFor:"agree",className:`text-[16px] text-justify text-[#161F55] font-LatoRegular ${t&&!e?"text-[#B50A0A]":"text-[#161F55]"}`,children:["I have read and agree to the"," ",i.jsx("span",{className:"font-LatoBold",children:"Data Privacy Notice"})," of LVCC AppointEase."]})]})}),i.jsx("p",{ref:s,className:`text-[16px] text-justify mb-6 font-LatoRegular ${t&&!e?"text-[#B50A0A]":"text-[#161F55]"}`,children:i.jsx("p",{className:"font-LatoRegular w-[450px] mx-auto",children:"By ticking “I Agree,” I voluntarily give my consent to LVCC in collecting, processing, recording, using, and retaining my personal information for the above-mentioned purpose in accordance with this Privacy Notice."})}),i.jsxs("div",{className:"flex justify-end gap-5",children:[i.jsx("button",{className:"px-8 py-2 text-white bg-[#161f55] rounded hover:bg-blue-700",children:i.jsx(dt,{to:"/home",children:"Back"})}),i.jsx("button",{onClick:o,className:"px-8 py-2 text-white bg-[#161f55] rounded hover:bg-blue-700",children:"Next"})]})]})})};tp.propTypes={onNext:je.func};function np(n,e){return function(){return n.apply(e,arguments)}}const{toString:Bb}=Object.prototype,{getPrototypeOf:Hl}=Object,{iterator:Co,toStringTag:sp}=Symbol,jo=(n=>e=>{const t=Bb.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ht=n=>(n=n.toLowerCase(),e=>jo(e)===n),Ao=n=>e=>typeof e===n,{isArray:nr}=Array,Pr=Ao("undefined");function Ub(n){return n!==null&&!Pr(n)&&n.constructor!==null&&!Pr(n.constructor)&&At(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const rp=Ht("ArrayBuffer");function $b(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&rp(n.buffer),e}const qb=Ao("string"),At=Ao("function"),ip=Ao("number"),Ro=n=>n!==null&&typeof n=="object",zb=n=>n===!0||n===!1,Mi=n=>{if(jo(n)!=="object")return!1;const e=Hl(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(sp in n)&&!(Co in n)},Hb=Ht("Date"),Gb=Ht("File"),Wb=Ht("Blob"),Kb=Ht("FileList"),Yb=n=>Ro(n)&&At(n.pipe),Jb=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||At(n.append)&&((e=jo(n))==="formdata"||e==="object"&&At(n.toString)&&n.toString()==="[object FormData]"))},Qb=Ht("URLSearchParams"),[Xb,Zb,ew,tw]=["ReadableStream","Request","Response","Headers"].map(Ht),nw=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wr(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),nr(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{const o=t?Object.getOwnPropertyNames(n):Object.keys(n),a=o.length;let c;for(s=0;s<a;s++)c=o[s],e.call(null,n[c],c,n)}}function op(n,e){e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const is=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ap=n=>!Pr(n)&&n!==is;function Ka(){const{caseless:n}=ap(this)&&this||{},e={},t=(s,r)=>{const o=n&&op(e,r)||r;Mi(e[o])&&Mi(s)?e[o]=Ka(e[o],s):Mi(s)?e[o]=Ka({},s):nr(s)?e[o]=s.slice():e[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Wr(arguments[s],t);return e}const sw=(n,e,t,{allOwnKeys:s}={})=>(Wr(e,(r,o)=>{t&&At(r)?n[o]=np(r,t):n[o]=r},{allOwnKeys:s}),n),rw=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),iw=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},ow=(n,e,t,s)=>{let r,o,a;const c={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),o=r.length;o-- >0;)a=r[o],(!s||s(a,n,e))&&!c[a]&&(e[a]=n[a],c[a]=!0);n=t!==!1&&Hl(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},aw=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},lw=n=>{if(!n)return null;if(nr(n))return n;let e=n.length;if(!ip(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},cw=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Hl(Uint8Array)),uw=(n,e)=>{const s=(n&&n[Co]).call(n);let r;for(;(r=s.next())&&!r.done;){const o=r.value;e.call(n,o[0],o[1])}},dw=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},hw=Ht("HTMLFormElement"),fw=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),ud=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),pw=Ht("RegExp"),lp=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Wr(t,(r,o)=>{let a;(a=e(r,o,n))!==!1&&(s[o]=a||r)}),Object.defineProperties(n,s)},mw=n=>{lp(n,(e,t)=>{if(At(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(At(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},gw=(n,e)=>{const t={},s=r=>{r.forEach(o=>{t[o]=!0})};return nr(n)?s(n):s(String(n).split(e)),t},xw=()=>{},yw=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function vw(n){return!!(n&&At(n.append)&&n[sp]==="FormData"&&n[Co])}const bw=n=>{const e=new Array(10),t=(s,r)=>{if(Ro(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const o=nr(s)?[]:{};return Wr(s,(a,c)=>{const u=t(a,r+1);!Pr(u)&&(o[c]=u)}),e[r]=void 0,o}}return s};return t(n,0)},ww=Ht("AsyncFunction"),_w=n=>n&&(Ro(n)||At(n))&&At(n.then)&&At(n.catch),cp=((n,e)=>n?setImmediate:e?((t,s)=>(is.addEventListener("message",({source:r,data:o})=>{r===is&&o===t&&s.length&&s.shift()()},!1),r=>{s.push(r),is.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",At(is.postMessage)),Ew=typeof queueMicrotask<"u"?queueMicrotask.bind(is):typeof process<"u"&&process.nextTick||cp,Nw=n=>n!=null&&At(n[Co]),U={isArray:nr,isArrayBuffer:rp,isBuffer:Ub,isFormData:Jb,isArrayBufferView:$b,isString:qb,isNumber:ip,isBoolean:zb,isObject:Ro,isPlainObject:Mi,isReadableStream:Xb,isRequest:Zb,isResponse:ew,isHeaders:tw,isUndefined:Pr,isDate:Hb,isFile:Gb,isBlob:Wb,isRegExp:pw,isFunction:At,isStream:Yb,isURLSearchParams:Qb,isTypedArray:cw,isFileList:Kb,forEach:Wr,merge:Ka,extend:sw,trim:nw,stripBOM:rw,inherits:iw,toFlatObject:ow,kindOf:jo,kindOfTest:Ht,endsWith:aw,toArray:lw,forEachEntry:uw,matchAll:dw,isHTMLForm:hw,hasOwnProperty:ud,hasOwnProp:ud,reduceDescriptors:lp,freezeMethods:mw,toObjectSet:gw,toCamelCase:fw,noop:xw,toFiniteNumber:yw,findKey:op,global:is,isContextDefined:ap,isSpecCompliantForm:vw,toJSONObject:bw,isAsyncFn:ww,isThenable:_w,setImmediate:cp,asap:Ew,isIterable:Nw};function xe(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}U.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const up=xe.prototype,dp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{dp[n]={value:n}});Object.defineProperties(xe,dp);Object.defineProperty(up,"isAxiosError",{value:!0});xe.from=(n,e,t,s,r,o)=>{const a=Object.create(up);return U.toFlatObject(n,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),xe.call(a,n.message,e,t,s,r),a.cause=n,a.name=n.name,o&&Object.assign(a,o),a};const Sw=null;function Ya(n){return U.isPlainObject(n)||U.isArray(n)}function hp(n){return U.endsWith(n,"[]")?n.slice(0,-2):n}function dd(n,e,t){return n?n.concat(e).map(function(r,o){return r=hp(r),!t&&o?"["+r+"]":r}).join(t?".":""):e}function Tw(n){return U.isArray(n)&&!n.some(Ya)}const Iw=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Po(n,e,t){if(!U.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=U.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,x){return!U.isUndefined(x[N])});const s=t.metaTokens,r=t.visitor||f,o=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(r))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if(U.isDate(w))return w.toISOString();if(!u&&U.isBlob(w))throw new xe("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(w)||U.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,N,x){let I=w;if(w&&!x&&typeof w=="object"){if(U.endsWith(N,"{}"))N=s?N:N.slice(0,-2),w=JSON.stringify(w);else if(U.isArray(w)&&Tw(w)||(U.isFileList(w)||U.endsWith(N,"[]"))&&(I=U.toArray(w)))return N=hp(N),I.forEach(function(_,P){!(U.isUndefined(_)||_===null)&&e.append(a===!0?dd([N],P,o):a===null?N:N+"[]",d(_))}),!1}return Ya(w)?!0:(e.append(dd(x,N,o),d(w)),!1)}const m=[],g=Object.assign(Iw,{defaultVisitor:f,convertValue:d,isVisitable:Ya});function v(w,N){if(!U.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+N.join("."));m.push(w),U.forEach(w,function(I,R){(!(U.isUndefined(I)||I===null)&&r.call(e,I,U.isString(R)?R.trim():R,N,g))===!0&&v(I,N?N.concat(R):[R])}),m.pop()}}if(!U.isObject(n))throw new TypeError("data must be an object");return v(n),e}function hd(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Gl(n,e){this._pairs=[],n&&Po(n,this,e)}const fp=Gl.prototype;fp.append=function(e,t){this._pairs.push([e,t])};fp.toString=function(e){const t=e?function(s){return e.call(this,s,hd)}:hd;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function Cw(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pp(n,e,t){if(!e)return n;const s=t&&t.encode||Cw;U.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let o;if(r?o=r(e,t):o=U.isURLSearchParams(e)?e.toString():new Gl(e,t).toString(s),o){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class fd{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(s){s!==null&&e(s)})}}const mp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jw=typeof URLSearchParams<"u"?URLSearchParams:Gl,Aw=typeof FormData<"u"?FormData:null,Rw=typeof Blob<"u"?Blob:null,Pw={isBrowser:!0,classes:{URLSearchParams:jw,FormData:Aw,Blob:Rw},protocols:["http","https","file","blob","url","data"]},Wl=typeof window<"u"&&typeof document<"u",Ja=typeof navigator=="object"&&navigator||void 0,kw=Wl&&(!Ja||["ReactNative","NativeScript","NS"].indexOf(Ja.product)<0),Dw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ow=Wl&&window.location.href||"http://localhost",Lw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wl,hasStandardBrowserEnv:kw,hasStandardBrowserWebWorkerEnv:Dw,navigator:Ja,origin:Ow},Symbol.toStringTag,{value:"Module"})),yt={...Lw,...Pw};function Fw(n,e){return Po(n,new yt.classes.URLSearchParams,Object.assign({visitor:function(t,s,r,o){return yt.isNode&&U.isBuffer(t)?(this.append(s,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Mw(n){return U.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Vw(n){const e={},t=Object.keys(n);let s;const r=t.length;let o;for(s=0;s<r;s++)o=t[s],e[o]=n[o];return e}function gp(n){function e(t,s,r,o){let a=t[o++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),u=o>=t.length;return a=!a&&U.isArray(r)?r.length:a,u?(U.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!c):((!r[a]||!U.isObject(r[a]))&&(r[a]=[]),e(t,s,r[a],o)&&U.isArray(r[a])&&(r[a]=Vw(r[a])),!c)}if(U.isFormData(n)&&U.isFunction(n.entries)){const t={};return U.forEachEntry(n,(s,r)=>{e(Mw(s),r,t,0)}),t}return null}function Bw(n,e,t){if(U.isString(n))try{return(e||JSON.parse)(n),U.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Kr={transitional:mp,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,o=U.isObject(e);if(o&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return r?JSON.stringify(gp(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Fw(e,this.formSerializer).toString();if((c=U.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Po(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),Bw(e)):e}],transformResponse:[function(e){const t=this.transitional||Kr.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(s&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(a)throw c.name==="SyntaxError"?xe.from(c,xe.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],n=>{Kr.headers[n]={}});const Uw=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$w=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!t||e[t]&&Uw[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},pd=Symbol("internals");function xr(n){return n&&String(n).trim().toLowerCase()}function Vi(n){return n===!1||n==null?n:U.isArray(n)?n.map(Vi):String(n)}function qw(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const zw=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fa(n,e,t,s,r){if(U.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!U.isString(e)){if(U.isString(s))return e.indexOf(s)!==-1;if(U.isRegExp(s))return s.test(e)}}function Hw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Gw(n,e){const t=U.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,o,a){return this[s].call(this,e,r,o,a)},configurable:!0})})}let Rt=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function o(c,u,d){const f=xr(u);if(!f)throw new Error("header name must be a non-empty string");const m=U.findKey(r,f);(!m||r[m]===void 0||d===!0||d===void 0&&r[m]!==!1)&&(r[m||u]=Vi(c))}const a=(c,u)=>U.forEach(c,(d,f)=>o(d,f,u));if(U.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(U.isString(e)&&(e=e.trim())&&!zw(e))a($w(e),t);else if(U.isObject(e)&&U.isIterable(e)){let c={},u,d;for(const f of e){if(!U.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[d=f[0]]=(u=c[d])?U.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}a(c,t)}else e!=null&&o(t,e,s);return this}get(e,t){if(e=xr(e),e){const s=U.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return qw(r);if(U.isFunction(t))return t.call(this,r,s);if(U.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=xr(e),e){const s=U.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||fa(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function o(a){if(a=xr(a),a){const c=U.findKey(s,a);c&&(!t||fa(s,s[c],c,t))&&(delete s[c],r=!0)}}return U.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const o=t[s];(!e||fa(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const t=this,s={};return U.forEach(this,(r,o)=>{const a=U.findKey(s,o);if(a){t[a]=Vi(r),delete t[o];return}const c=e?Hw(o):String(o).trim();c!==o&&delete t[o],t[c]=Vi(r),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return U.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&U.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[pd]=this[pd]={accessors:{}}).accessors,r=this.prototype;function o(a){const c=xr(a);s[c]||(Gw(r,a),s[c]=!0)}return U.isArray(e)?e.forEach(o):o(e),this}};Rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(Rt.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});U.freezeMethods(Rt);function pa(n,e){const t=this||Kr,s=e||t,r=Rt.from(s.headers);let o=s.data;return U.forEach(n,function(c){o=c.call(t,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function xp(n){return!!(n&&n.__CANCEL__)}function sr(n,e,t){xe.call(this,n??"canceled",xe.ERR_CANCELED,e,t),this.name="CanceledError"}U.inherits(sr,xe,{__CANCEL__:!0});function yp(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new xe("Request failed with status code "+t.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ww(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Kw(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,o=0,a;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),f=s[o];a||(a=d),t[r]=u,s[r]=d;let m=o,g=0;for(;m!==r;)g+=t[m++],m=m%n;if(r=(r+1)%n,r===o&&(o=(o+1)%n),d-a<e)return;const v=f&&d-f;return v?Math.round(g*1e3/v):void 0}}function Yw(n,e){let t=0,s=1e3/e,r,o;const a=(d,f=Date.now())=>{t=f,r=null,o&&(clearTimeout(o),o=null),n.apply(null,d)};return[(...d)=>{const f=Date.now(),m=f-t;m>=s?a(d,f):(r=d,o||(o=setTimeout(()=>{o=null,a(r)},s-m)))},()=>r&&a(r)]}const io=(n,e,t=3)=>{let s=0;const r=Kw(50,250);return Yw(o=>{const a=o.loaded,c=o.lengthComputable?o.total:void 0,u=a-s,d=r(u),f=a<=c;s=a;const m={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&f?(c-a)/d:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(m)},t)},md=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},gd=n=>(...e)=>U.asap(()=>n(...e)),Jw=yt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,yt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(yt.origin),yt.navigator&&/(msie|trident)/i.test(yt.navigator.userAgent)):()=>!0,Qw=yt.hasStandardBrowserEnv?{write(n,e,t,s,r,o){const a=[n+"="+encodeURIComponent(e)];U.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),U.isString(s)&&a.push("path="+s),U.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Xw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zw(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function vp(n,e,t){let s=!Xw(e);return n&&(s||t==!1)?Zw(n,e):e}const xd=n=>n instanceof Rt?{...n}:n;function ms(n,e){e=e||{};const t={};function s(d,f,m,g){return U.isPlainObject(d)&&U.isPlainObject(f)?U.merge.call({caseless:g},d,f):U.isPlainObject(f)?U.merge({},f):U.isArray(f)?f.slice():f}function r(d,f,m,g){if(U.isUndefined(f)){if(!U.isUndefined(d))return s(void 0,d,m,g)}else return s(d,f,m,g)}function o(d,f){if(!U.isUndefined(f))return s(void 0,f)}function a(d,f){if(U.isUndefined(f)){if(!U.isUndefined(d))return s(void 0,d)}else return s(void 0,f)}function c(d,f,m){if(m in e)return s(d,f);if(m in n)return s(void 0,d)}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(d,f,m)=>r(xd(d),xd(f),m,!0)};return U.forEach(Object.keys(Object.assign({},n,e)),function(f){const m=u[f]||r,g=m(n[f],e[f],f);U.isUndefined(g)&&m!==c||(t[f]=g)}),t}const bp=n=>{const e=ms({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:c}=e;e.headers=a=Rt.from(a),e.url=pp(vp(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(U.isFormData(t)){if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[d,...f]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];a.setContentType([d||"multipart/form-data",...f].join("; "))}}if(yt.hasStandardBrowserEnv&&(s&&U.isFunction(s)&&(s=s(e)),s||s!==!1&&Jw(e.url))){const d=r&&o&&Qw.read(o);d&&a.set(r,d)}return e},e_=typeof XMLHttpRequest<"u",t_=e_&&function(n){return new Promise(function(t,s){const r=bp(n);let o=r.data;const a=Rt.from(r.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=r,f,m,g,v,w;function N(){v&&v(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(f),r.signal&&r.signal.removeEventListener("abort",f)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function I(){if(!x)return;const _=Rt.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),O={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:_,config:n,request:x};yp(function(y){t(y),N()},function(y){s(y),N()},O),x=null}"onloadend"in x?x.onloadend=I:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(I)},x.onabort=function(){x&&(s(new xe("Request aborted",xe.ECONNABORTED,n,x)),x=null)},x.onerror=function(){s(new xe("Network Error",xe.ERR_NETWORK,n,x)),x=null},x.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const O=r.transitional||mp;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),s(new xe(P,O.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,n,x)),x=null},o===void 0&&a.setContentType(null),"setRequestHeader"in x&&U.forEach(a.toJSON(),function(P,O){x.setRequestHeader(O,P)}),U.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),c&&c!=="json"&&(x.responseType=r.responseType),d&&([g,w]=io(d,!0),x.addEventListener("progress",g)),u&&x.upload&&([m,v]=io(u),x.upload.addEventListener("progress",m),x.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(f=_=>{x&&(s(!_||_.type?new sr(null,n,x):_),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(f),r.signal&&(r.signal.aborted?f():r.signal.addEventListener("abort",f)));const R=Ww(r.url);if(R&&yt.protocols.indexOf(R)===-1){s(new xe("Unsupported protocol "+R+":",xe.ERR_BAD_REQUEST,n));return}x.send(o||null)})},n_=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const o=function(d){if(!r){r=!0,c();const f=d instanceof Error?d:this.reason;s.abort(f instanceof xe?f:new sr(f instanceof Error?f.message:f))}};let a=e&&setTimeout(()=>{a=null,o(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const c=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),n=null)};n.forEach(d=>d.addEventListener("abort",o));const{signal:u}=s;return u.unsubscribe=()=>U.asap(c),u}},s_=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},r_=async function*(n,e){for await(const t of i_(n))yield*s_(t,e)},i_=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},yd=(n,e,t,s)=>{const r=r_(n,e);let o=0,a,c=u=>{a||(a=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:d,value:f}=await r.next();if(d){c(),u.close();return}let m=f.byteLength;if(t){let g=o+=m;t(g)}u.enqueue(new Uint8Array(f))}catch(d){throw c(d),d}},cancel(u){return c(u),r.return()}},{highWaterMark:2})},ko=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",wp=ko&&typeof ReadableStream=="function",o_=ko&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),_p=(n,...e)=>{try{return!!n(...e)}catch{return!1}},a_=wp&&_p(()=>{let n=!1;const e=new Request(yt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),vd=64*1024,Qa=wp&&_p(()=>U.isReadableStream(new Response("").body)),oo={stream:Qa&&(n=>n.body)};ko&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!oo[e]&&(oo[e]=U.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,s)})})})(new Response);const l_=async n=>{if(n==null)return 0;if(U.isBlob(n))return n.size;if(U.isSpecCompliantForm(n))return(await new Request(yt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(U.isArrayBufferView(n)||U.isArrayBuffer(n))return n.byteLength;if(U.isURLSearchParams(n)&&(n=n+""),U.isString(n))return(await o_(n)).byteLength},c_=async(n,e)=>{const t=U.toFiniteNumber(n.getContentLength());return t??l_(e)},u_=ko&&(async n=>{let{url:e,method:t,data:s,signal:r,cancelToken:o,timeout:a,onDownloadProgress:c,onUploadProgress:u,responseType:d,headers:f,withCredentials:m="same-origin",fetchOptions:g}=bp(n);d=d?(d+"").toLowerCase():"text";let v=n_([r,o&&o.toAbortSignal()],a),w;const N=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let x;try{if(u&&a_&&t!=="get"&&t!=="head"&&(x=await c_(f,s))!==0){let O=new Request(e,{method:"POST",body:s,duplex:"half"}),D;if(U.isFormData(s)&&(D=O.headers.get("content-type"))&&f.setContentType(D),O.body){const[y,b]=md(x,io(gd(u)));s=yd(O.body,vd,y,b)}}U.isString(m)||(m=m?"include":"omit");const I="credentials"in Request.prototype;w=new Request(e,{...g,signal:v,method:t.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",credentials:I?m:void 0});let R=await fetch(w);const _=Qa&&(d==="stream"||d==="response");if(Qa&&(c||_&&N)){const O={};["status","statusText","headers"].forEach(E=>{O[E]=R[E]});const D=U.toFiniteNumber(R.headers.get("content-length")),[y,b]=c&&md(D,io(gd(c),!0))||[];R=new Response(yd(R.body,vd,y,()=>{b&&b(),N&&N()}),O)}d=d||"text";let P=await oo[U.findKey(oo,d)||"text"](R,n);return!_&&N&&N(),await new Promise((O,D)=>{yp(O,D,{data:P,headers:Rt.from(R.headers),status:R.status,statusText:R.statusText,config:n,request:w})})}catch(I){throw N&&N(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,n,w),{cause:I.cause||I}):xe.from(I,I&&I.code,n,w)}}),Xa={http:Sw,xhr:t_,fetch:u_};U.forEach(Xa,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const bd=n=>`- ${n}`,d_=n=>U.isFunction(n)||n===null||n===!1,Ep={getAdapter:n=>{n=U.isArray(n)?n:[n];const{length:e}=n;let t,s;const r={};for(let o=0;o<e;o++){t=n[o];let a;if(s=t,!d_(t)&&(s=Xa[(a=String(t)).toLowerCase()],s===void 0))throw new xe(`Unknown adapter '${a}'`);if(s)break;r[a||"#"+o]=s}if(!s){const o=Object.entries(r).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(bd).join(`
`):" "+bd(o[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Xa};function ma(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new sr(null,n)}function wd(n){return ma(n),n.headers=Rt.from(n.headers),n.data=pa.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Ep.getAdapter(n.adapter||Kr.adapter)(n).then(function(s){return ma(n),s.data=pa.call(n,n.transformResponse,s),s.headers=Rt.from(s.headers),s},function(s){return xp(s)||(ma(n),s&&s.response&&(s.response.data=pa.call(n,n.transformResponse,s.response),s.response.headers=Rt.from(s.response.headers))),Promise.reject(s)})}const Np="1.9.0",Do={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Do[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const _d={};Do.transitional=function(e,t,s){function r(o,a){return"[Axios v"+Np+"] Transitional option '"+o+"'"+a+(s?". "+s:"")}return(o,a,c)=>{if(e===!1)throw new xe(r(a," has been removed"+(t?" in "+t:"")),xe.ERR_DEPRECATED);return t&&!_d[a]&&(_d[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,c):!0}};Do.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function h_(n,e,t){if(typeof n!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const o=s[r],a=e[o];if(a){const c=n[o],u=c===void 0||a(c,o,n);if(u!==!0)throw new xe("option "+o+" must be "+u,xe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xe("Unknown option "+o,xe.ERR_BAD_OPTION)}}const Bi={assertOptions:h_,validators:Do},Kt=Bi.validators;let us=class{constructor(e){this.defaults=e||{},this.interceptors={request:new fd,response:new fd}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ms(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:o}=t;s!==void 0&&Bi.assertOptions(s,{silentJSONParsing:Kt.transitional(Kt.boolean),forcedJSONParsing:Kt.transitional(Kt.boolean),clarifyTimeoutError:Kt.transitional(Kt.boolean)},!1),r!=null&&(U.isFunction(r)?t.paramsSerializer={serialize:r}:Bi.assertOptions(r,{encode:Kt.function,serialize:Kt.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Bi.assertOptions(t,{baseUrl:Kt.spelling("baseURL"),withXsrfToken:Kt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&U.merge(o.common,o[t.method]);o&&U.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),t.headers=Rt.concat(a,o);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(t)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let f,m=0,g;if(!u){const w=[wd.bind(this),void 0];for(w.unshift.apply(w,c),w.push.apply(w,d),g=w.length,f=Promise.resolve(t);m<g;)f=f.then(w[m++],w[m++]);return f}g=c.length;let v=t;for(m=0;m<g;){const w=c[m++],N=c[m++];try{v=w(v)}catch(x){N.call(this,x);break}}try{f=wd.call(this,v)}catch(w){return Promise.reject(w)}for(m=0,g=d.length;m<g;)f=f.then(d[m++],d[m++]);return f}getUri(e){e=ms(this.defaults,e);const t=vp(e.baseURL,e.url,e.allowAbsoluteUrls);return pp(t,e.params,e.paramsSerializer)}};U.forEach(["delete","get","head","options"],function(e){us.prototype[e]=function(t,s){return this.request(ms(s||{},{method:e,url:t,data:(s||{}).data}))}});U.forEach(["post","put","patch"],function(e){function t(s){return function(o,a,c){return this.request(ms(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}us.prototype[e]=t(),us.prototype[e+"Form"]=t(!0)});let f_=class Sp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(c=>{s.subscribe(c),o=c}).then(r);return a.cancel=function(){s.unsubscribe(o)},a},e(function(o,a,c){s.reason||(s.reason=new sr(o,a,c),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Sp(function(r){e=r}),cancel:e}}};function p_(n){return function(t){return n.apply(null,t)}}function m_(n){return U.isObject(n)&&n.isAxiosError===!0}const Za={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Za).forEach(([n,e])=>{Za[e]=n});function Tp(n){const e=new us(n),t=np(us.prototype.request,e);return U.extend(t,us.prototype,e,{allOwnKeys:!0}),U.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return Tp(ms(n,r))},t}const ae=Tp(Kr);ae.Axios=us;ae.CanceledError=sr;ae.CancelToken=f_;ae.isCancel=xp;ae.VERSION=Np;ae.toFormData=Po;ae.AxiosError=xe;ae.Cancel=ae.CanceledError;ae.all=function(e){return Promise.all(e)};ae.spread=p_;ae.isAxiosError=m_;ae.mergeConfig=ms;ae.AxiosHeaders=Rt;ae.formToJSON=n=>gp(U.isHTMLForm(n)?new FormData(n):n);ae.getAdapter=Ep.getAdapter;ae.HttpStatusCode=Za;ae.default=ae;const{Axios:K2,AxiosError:Y2,CanceledError:J2,isCancel:Q2,CancelToken:X2,VERSION:Z2,all:eN,Cancel:tN,isAxiosError:nN,spread:sN,toFormData:rN,AxiosHeaders:iN,HttpStatusCode:oN,formToJSON:aN,getAdapter:lN,mergeConfig:cN}=ae,g_="https://appointment-system-backend-n8dk.onrender.com/api/attachment",x_=async(n,e)=>{var t;try{const s=new FormData;return n.forEach(o=>{s.append("files",o)}),s.append("studentId",e),(await fetch(`${g_}/upload`,{method:"POST",body:s,credentials:"include"})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to upload attachments"}}},y_=n=>{const[e,t]=C.useState([]),s=C.useRef(null),[r,o]=C.useState(""),[a,c]=C.useState(!1);return C.useEffect(()=>{const g=localStorage.getItem("uploadedFiles");if(g)try{const v=JSON.parse(g);t(v)}catch(v){console.error("Failed to parse saved files",v)}},[]),C.useEffect(()=>{e.length>0?localStorage.setItem("uploadedFiles",JSON.stringify(e)):localStorage.removeItem("uploadedFiles")},[e]),{files:e,fileInputRef:s,error:r,isUploading:a,handleFileChange:g=>{if(!g.target.files)return;const v=Array.from(g.target.files),w=v.filter(x=>x.type.match("image.*"));if(w.length!==v.length){o("Only image files (JPG, PNG, GIF, etc.) are allowed");return}if(e.length+w.length>3){o("You can only upload a maximum of 3 files");return}t(x=>[...x,...w]),o("")},handleAddFile:()=>{if(e.length>=3){o("Maximum of 3 files reached");return}s.current.click()},handleRemoveFile:g=>{t(v=>v.filter((w,N)=>N!==g)),o("")},handleNext:async()=>{if(e.length===0){o("You need to upload at least one file to proceed");return}try{c(!0),o("");const g=localStorage.getItem("studentId");if(!g)throw new Error("Student ID not found. Please complete the previous steps first.");await x_(e,g),localStorage.removeItem("uploadedFiles"),n()}catch(g){o(g.message||"Failed to upload files. Please try again.")}finally{c(!1)}}}};var bi={},ga,Ed;function v_(){if(Ed)return ga;Ed=1;var n=function(e,t,s,r,o,a,c,u){if(!e){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,r,o,a,c,u],m=0;d=new Error(t.replace(/%s/g,function(){return f[m++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return ga=n,ga}var wi={exports:{}},_i={exports:{}},xa={exports:{}},Nd;function b_(){return Nd||(Nd=1,function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(xa)),xa.exports}var Ei={exports:{}},Sd;function w_(){return Sd||(Sd=1,function(n,e){e.__esModule=!0,e.default=t;function t(s,r){return s.classList?!!r&&s.classList.contains(r):(" "+(s.className.baseVal||s.className)+" ").indexOf(" "+r+" ")!==-1}n.exports=e.default}(Ei,Ei.exports)),Ei.exports}var Td;function __(){return Td||(Td=1,function(n,e){var t=b_();e.__esModule=!0,e.default=r;var s=t(w_());function r(o,a){o.classList?o.classList.add(a):(0,s.default)(o,a)||(typeof o.className=="string"?o.className=o.className+" "+a:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+a))}n.exports=e.default}(_i,_i.exports)),_i.exports}var ya,Id;function E_(){if(Id)return ya;Id=1;function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}return ya=function(t,s){t.classList?t.classList.remove(s):typeof t.className=="string"?t.className=n(t.className,s):t.setAttribute("class",n(t.className&&t.className.baseVal||"",s))},ya}var _t={};function Ip(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function Cp(n){function e(t){var s=this.constructor.getDerivedStateFromProps(n,t);return s??null}this.setState(e.bind(this))}function jp(n,e){try{var t=this.props,s=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,s)}finally{this.props=t,this.state=s}}Ip.__suppressDeprecationWarning=!0;Cp.__suppressDeprecationWarning=!0;jp.__suppressDeprecationWarning=!0;function N_(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,s=null,r=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?s="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(s="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),t!==null||s!==null||r!==null){var o=n.displayName||n.name,a=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(s!==null?`
  `+s:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=Ip,e.componentWillReceiveProps=Cp),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=jp;var c=e.componentDidUpdate;e.componentDidUpdate=function(d,f,m){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;c.call(this,d,f,g)}}return n}const S_=Object.freeze(Object.defineProperty({__proto__:null,polyfill:N_},Symbol.toStringTag,{value:"Module"})),Ap=ym(S_);var Cd;function Rp(){if(Cd)return _t;Cd=1,_t.__esModule=!0,_t.default=_t.EXITING=_t.ENTERED=_t.ENTERING=_t.EXITED=_t.UNMOUNTED=void 0;var n=o(Or()),e=r(ys()),t=r(cl()),s=Ap;function r(x){return x&&x.__esModule?x:{default:x}}function o(x){if(x&&x.__esModule)return x;var I={};if(x!=null){for(var R in x)if(Object.prototype.hasOwnProperty.call(x,R)){var _=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(x,R):{};_.get||_.set?Object.defineProperty(I,R,_):I[R]=x[R]}}return I.default=x,I}function a(x,I){if(x==null)return{};var R={},_=Object.keys(x),P,O;for(O=0;O<_.length;O++)P=_[O],!(I.indexOf(P)>=0)&&(R[P]=x[P]);return R}function c(x,I){x.prototype=Object.create(I.prototype),x.prototype.constructor=x,x.__proto__=I}var u="unmounted";_t.UNMOUNTED=u;var d="exited";_t.EXITED=d;var f="entering";_t.ENTERING=f;var m="entered";_t.ENTERED=m;var g="exiting";_t.EXITING=g;var v=function(x){c(I,x);function I(_,P){var O;O=x.call(this,_,P)||this;var D=P.transitionGroup,y=D&&!D.isMounting?_.enter:_.appear,b;return O.appearStatus=null,_.in?y?(b=d,O.appearStatus=f):b=m:_.unmountOnExit||_.mountOnEnter?b=u:b=d,O.state={status:b},O.nextCallback=null,O}var R=I.prototype;return R.getChildContext=function(){return{transitionGroup:null}},I.getDerivedStateFromProps=function(P,O){var D=P.in;return D&&O.status===u?{status:d}:null},R.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},R.componentDidUpdate=function(P){var O=null;if(P!==this.props){var D=this.state.status;this.props.in?D!==f&&D!==m&&(O=f):(D===f||D===m)&&(O=g)}this.updateStatus(!1,O)},R.componentWillUnmount=function(){this.cancelNextCallback()},R.getTimeouts=function(){var P=this.props.timeout,O,D,y;return O=D=y=P,P!=null&&typeof P!="number"&&(O=P.exit,D=P.enter,y=P.appear!==void 0?P.appear:D),{exit:O,enter:D,appear:y}},R.updateStatus=function(P,O){if(P===void 0&&(P=!1),O!==null){this.cancelNextCallback();var D=t.default.findDOMNode(this);O===f?this.performEnter(D,P):this.performExit(D)}else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},R.performEnter=function(P,O){var D=this,y=this.props.enter,b=this.context.transitionGroup?this.context.transitionGroup.isMounting:O,E=this.getTimeouts(),j=b?E.appear:E.enter;if(!O&&!y){this.safeSetState({status:m},function(){D.props.onEntered(P)});return}this.props.onEnter(P,b),this.safeSetState({status:f},function(){D.props.onEntering(P,b),D.onTransitionEnd(P,j,function(){D.safeSetState({status:m},function(){D.props.onEntered(P,b)})})})},R.performExit=function(P){var O=this,D=this.props.exit,y=this.getTimeouts();if(!D){this.safeSetState({status:d},function(){O.props.onExited(P)});return}this.props.onExit(P),this.safeSetState({status:g},function(){O.props.onExiting(P),O.onTransitionEnd(P,y.exit,function(){O.safeSetState({status:d},function(){O.props.onExited(P)})})})},R.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},R.safeSetState=function(P,O){O=this.setNextCallback(O),this.setState(P,O)},R.setNextCallback=function(P){var O=this,D=!0;return this.nextCallback=function(y){D&&(D=!1,O.nextCallback=null,P(y))},this.nextCallback.cancel=function(){D=!1},this.nextCallback},R.onTransitionEnd=function(P,O,D){this.setNextCallback(D);var y=O==null&&!this.props.addEndListener;if(!P||y){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(P,this.nextCallback),O!=null&&setTimeout(this.nextCallback,O)},R.render=function(){var P=this.state.status;if(P===u)return null;var O=this.props,D=O.children,y=a(O,["children"]);if(delete y.in,delete y.mountOnEnter,delete y.unmountOnExit,delete y.appear,delete y.enter,delete y.exit,delete y.timeout,delete y.addEndListener,delete y.onEnter,delete y.onEntering,delete y.onEntered,delete y.onExit,delete y.onExiting,delete y.onExited,typeof D=="function")return D(P,y);var b=e.default.Children.only(D);return e.default.cloneElement(b,y)},I}(e.default.Component);v.contextTypes={transitionGroup:n.object},v.childContextTypes={transitionGroup:function(){}},v.propTypes={};function w(){}v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:w,onEntering:w,onEntered:w,onExit:w,onExiting:w,onExited:w},v.UNMOUNTED=0,v.EXITED=1,v.ENTERING=2,v.ENTERED=3,v.EXITING=4;var N=(0,s.polyfill)(v);return _t.default=N,_t}var jd;function T_(){return jd||(jd=1,function(n,e){e.__esModule=!0,e.default=void 0,c(Or());var t=a(__()),s=a(E_()),r=a(ys()),o=a(Rp());function a(w){return w&&w.__esModule?w:{default:w}}function c(w){if(w&&w.__esModule)return w;var N={};if(w!=null){for(var x in w)if(Object.prototype.hasOwnProperty.call(w,x)){var I=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(w,x):{};I.get||I.set?Object.defineProperty(N,x,I):N[x]=w[x]}}return N.default=w,N}function u(){return u=Object.assign||function(w){for(var N=1;N<arguments.length;N++){var x=arguments[N];for(var I in x)Object.prototype.hasOwnProperty.call(x,I)&&(w[I]=x[I])}return w},u.apply(this,arguments)}function d(w,N){w.prototype=Object.create(N.prototype),w.prototype.constructor=w,w.__proto__=N}var f=function(N,x){return N&&x&&x.split(" ").forEach(function(I){return(0,t.default)(N,I)})},m=function(N,x){return N&&x&&x.split(" ").forEach(function(I){return(0,s.default)(N,I)})},g=function(w){d(N,w);function N(){for(var I,R=arguments.length,_=new Array(R),P=0;P<R;P++)_[P]=arguments[P];return I=w.call.apply(w,[this].concat(_))||this,I.onEnter=function(O,D){var y=I.getClassNames(D?"appear":"enter"),b=y.className;I.removeClasses(O,"exit"),f(O,b),I.props.onEnter&&I.props.onEnter(O,D)},I.onEntering=function(O,D){var y=I.getClassNames(D?"appear":"enter"),b=y.activeClassName;I.reflowAndAddClass(O,b),I.props.onEntering&&I.props.onEntering(O,D)},I.onEntered=function(O,D){var y=I.getClassNames("appear").doneClassName,b=I.getClassNames("enter").doneClassName,E=D?y+" "+b:b;I.removeClasses(O,D?"appear":"enter"),f(O,E),I.props.onEntered&&I.props.onEntered(O,D)},I.onExit=function(O){var D=I.getClassNames("exit"),y=D.className;I.removeClasses(O,"appear"),I.removeClasses(O,"enter"),f(O,y),I.props.onExit&&I.props.onExit(O)},I.onExiting=function(O){var D=I.getClassNames("exit"),y=D.activeClassName;I.reflowAndAddClass(O,y),I.props.onExiting&&I.props.onExiting(O)},I.onExited=function(O){var D=I.getClassNames("exit"),y=D.doneClassName;I.removeClasses(O,"exit"),f(O,y),I.props.onExited&&I.props.onExited(O)},I.getClassNames=function(O){var D=I.props.classNames,y=typeof D=="string",b=y&&D?D+"-":"",E=y?b+O:D[O],j=y?E+"-active":D[O+"Active"],A=y?E+"-done":D[O+"Done"];return{className:E,activeClassName:j,doneClassName:A}},I}var x=N.prototype;return x.removeClasses=function(R,_){var P=this.getClassNames(_),O=P.className,D=P.activeClassName,y=P.doneClassName;O&&m(R,O),D&&m(R,D),y&&m(R,y)},x.reflowAndAddClass=function(R,_){_&&(R&&R.scrollTop,f(R,_))},x.render=function(){var R=u({},this.props);return delete R.classNames,r.default.createElement(o.default,u({},R,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},N}(r.default.Component);g.defaultProps={classNames:""},g.propTypes={};var v=g;e.default=v,n.exports=e.default}(wi,wi.exports)),wi.exports}var Ni={exports:{}},Si={exports:{}},ts={},Ad;function I_(){if(Ad)return ts;Ad=1,ts.__esModule=!0,ts.getChildMapping=e,ts.mergeChildMappings=t,ts.getInitialChildMapping=r,ts.getNextChildMapping=o;var n=ys();function e(a,c){var u=function(m){return c&&(0,n.isValidElement)(m)?c(m):m},d=Object.create(null);return a&&n.Children.map(a,function(f){return f}).forEach(function(f){d[f.key]=u(f)}),d}function t(a,c){a=a||{},c=c||{};function u(x){return x in c?c[x]:a[x]}var d=Object.create(null),f=[];for(var m in a)m in c?f.length&&(d[m]=f,f=[]):f.push(m);var g,v={};for(var w in c){if(d[w])for(g=0;g<d[w].length;g++){var N=d[w][g];v[d[w][g]]=u(N)}v[w]=u(w)}for(g=0;g<f.length;g++)v[f[g]]=u(f[g]);return v}function s(a,c,u){return u[c]!=null?u[c]:a.props[c]}function r(a,c){return e(a.children,function(u){return(0,n.cloneElement)(u,{onExited:c.bind(null,u),in:!0,appear:s(u,"appear",a),enter:s(u,"enter",a),exit:s(u,"exit",a)})})}function o(a,c,u){var d=e(a.children),f=t(c,d);return Object.keys(f).forEach(function(m){var g=f[m];if((0,n.isValidElement)(g)){var v=m in c,w=m in d,N=c[m],x=(0,n.isValidElement)(N)&&!N.props.in;w&&(!v||x)?f[m]=(0,n.cloneElement)(g,{onExited:u.bind(null,g),in:!0,exit:s(g,"exit",a),enter:s(g,"enter",a)}):!w&&v&&!x?f[m]=(0,n.cloneElement)(g,{in:!1}):w&&v&&(0,n.isValidElement)(N)&&(f[m]=(0,n.cloneElement)(g,{onExited:u.bind(null,g),in:N.props.in,exit:s(g,"exit",a),enter:s(g,"enter",a)}))}}),f}return ts}var Rd;function Pp(){return Rd||(Rd=1,function(n,e){e.__esModule=!0,e.default=void 0;var t=a(Or()),s=a(ys()),r=Ap,o=I_();function a(N){return N&&N.__esModule?N:{default:N}}function c(N,x){if(N==null)return{};var I={},R=Object.keys(N),_,P;for(P=0;P<R.length;P++)_=R[P],!(x.indexOf(_)>=0)&&(I[_]=N[_]);return I}function u(){return u=Object.assign||function(N){for(var x=1;x<arguments.length;x++){var I=arguments[x];for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(N[R]=I[R])}return N},u.apply(this,arguments)}function d(N,x){N.prototype=Object.create(x.prototype),N.prototype.constructor=N,N.__proto__=x}function f(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}var m=Object.values||function(N){return Object.keys(N).map(function(x){return N[x]})},g={component:"div",childFactory:function(x){return x}},v=function(N){d(x,N);function x(R,_){var P;P=N.call(this,R,_)||this;var O=P.handleExited.bind(f(f(P)));return P.state={handleExited:O,firstRender:!0},P}var I=x.prototype;return I.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},I.componentDidMount=function(){this.appeared=!0,this.mounted=!0},I.componentWillUnmount=function(){this.mounted=!1},x.getDerivedStateFromProps=function(_,P){var O=P.children,D=P.handleExited,y=P.firstRender;return{children:y?(0,o.getInitialChildMapping)(_,D):(0,o.getNextChildMapping)(_,O,D),firstRender:!1}},I.handleExited=function(_,P){var O=(0,o.getChildMapping)(this.props.children);_.key in O||(_.props.onExited&&_.props.onExited(P),this.mounted&&this.setState(function(D){var y=u({},D.children);return delete y[_.key],{children:y}}))},I.render=function(){var _=this.props,P=_.component,O=_.childFactory,D=c(_,["component","childFactory"]),y=m(this.state.children).map(O);return delete D.appear,delete D.enter,delete D.exit,P===null?y:s.default.createElement(P,D,y)},x}(s.default.Component);v.childContextTypes={transitionGroup:t.default.object.isRequired},v.propTypes={},v.defaultProps=g;var w=(0,r.polyfill)(v);e.default=w,n.exports=e.default}(Si,Si.exports)),Si.exports}var Pd;function C_(){return Pd||(Pd=1,function(n,e){e.__esModule=!0,e.default=void 0,o(Or());var t=o(ys()),s=cl(),r=o(Pp());function o(f){return f&&f.__esModule?f:{default:f}}function a(f,m){if(f==null)return{};var g={},v=Object.keys(f),w,N;for(N=0;N<v.length;N++)w=v[N],!(m.indexOf(w)>=0)&&(g[w]=f[w]);return g}function c(f,m){f.prototype=Object.create(m.prototype),f.prototype.constructor=f,f.__proto__=m}var u=function(f){c(m,f);function m(){for(var v,w=arguments.length,N=new Array(w),x=0;x<w;x++)N[x]=arguments[x];return v=f.call.apply(f,[this].concat(N))||this,v.handleEnter=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onEnter",0,R)},v.handleEntering=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onEntering",0,R)},v.handleEntered=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onEntered",0,R)},v.handleExit=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onExit",1,R)},v.handleExiting=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onExiting",1,R)},v.handleExited=function(){for(var I=arguments.length,R=new Array(I),_=0;_<I;_++)R[_]=arguments[_];return v.handleLifecycle("onExited",1,R)},v}var g=m.prototype;return g.handleLifecycle=function(w,N,x){var I,R=this.props.children,_=t.default.Children.toArray(R)[N];_.props[w]&&(I=_.props)[w].apply(I,x),this.props[w]&&this.props[w]((0,s.findDOMNode)(this))},g.render=function(){var w=this.props,N=w.children,x=w.in,I=a(w,["children","in"]),R=t.default.Children.toArray(N),_=R[0],P=R[1];return delete I.onEnter,delete I.onEntering,delete I.onEntered,delete I.onExit,delete I.onExiting,delete I.onExited,t.default.createElement(r.default,I,x?t.default.cloneElement(_,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):t.default.cloneElement(P,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},m}(t.default.Component);u.propTypes={};var d=u;e.default=d,n.exports=e.default}(Ni,Ni.exports)),Ni.exports}var va,kd;function j_(){if(kd)return va;kd=1;var n=r(T_()),e=r(C_()),t=r(Pp()),s=r(Rp());function r(o){return o&&o.__esModule?o:{default:o}}return va={Transition:s.default,TransitionGroup:t.default,ReplaceTransition:e.default,CSSTransition:n.default},va}var Dd;function A_(){if(Dd)return bi;Dd=1;var n,e=ys(),t=(n=v_())&&typeof n=="object"&&"default"in n?n.default:n,s=j_(),r={scale:{entering:{transform:"translateX(-50%) scale(1.5)"},entered:{transform:"translateX(-50%) scale(1)"},exiting:{transform:"translateX(-50%) scale(1.5)"},exited:{transform:"translateX(-50%) scale(1)"}},rotate:{entering:{transform:"translateX(-50%) rotate(360deg)"},entered:{transform:"translateX(-50%) rotate(0deg)"},exiting:{transform:"translateX(-50%) rotate(0deg)"},exited:{transform:"translateX(-50%) rotate(360deg)"}},skew:{entering:{transform:"translateX(-50%) skewX(20deg)"},entered:{transform:"translateX(-50%) skewX(0deg)"},exiting:{transform:"translateX(-50%) skewX(20deg)"},exited:{transform:"translateX(-50%) skewX(0deg)"}}};function o(u){return(u>100||u<0||typeof u!="number")&&console.warn("[react-step-progress-bar]: The value passed to percent or position needs to be a number between 0 and 100 (passed value: "+u+")."),Math.min(100,Math.max(u,0))}var a=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.render=function(){var f=this.props,m=f.accomplished,g=f.index,v=f.children,w=f.transition;w===void 0&&(w=null);var N=f.transitionDuration;N===void 0&&(N=300);var x=o(f.position),I={left:x+"%",transitionDuration:N+"ms"};return e.createElement(s.Transition,{in:m,timeout:N},function(R){return w&&(t(r[w]!=null,w+" is not listed in the built-in transitions."),I=Object.assign({},I,r[w][R])),e.createElement("div",{className:"RSPBstep",style:I},v({accomplished:m,position:x,transitionState:R,index:g}))})},d}(e.Component),c=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d,d.prototype.render=function(){var f=this.props,m=f.percent,g=f.children,v=f.stepPositions;v===void 0&&(v=[]);var w=f.unfilledBackground;w===void 0&&(w=null);var N=f.filledBackground;N===void 0&&(N=null);var x=f.width;x===void 0&&(x=null);var I=f.height;I===void 0&&(I=null);var R=f.hasStepZero;R===void 0&&(R=!0);var _=f.text;_===void 0&&(_=null),t(!(v.length>0&&v.length!==e.Children.count(g)),"When specifying a stepPositions props, the number of children must match the length of the positions array.");var P=o(m);return e.createElement("div",{className:"RSPBprogressBar",style:{background:w,width:x,height:I}},e.Children.map(g,function(O,D){var y=v.length>0?v[D]:function(b,E,j){return j?100/(b-1)*E:100/b*(E+1)}(e.Children.count(g),D,R);return e.cloneElement(O,{accomplished:y<=P,position:y,index:D})}),_?e.createElement("div",{className:"RSPBprogressBarText"},_):null,e.createElement("div",{className:"RSPBprogression",style:{background:N,width:P+"%"}}))},d}(e.Component);return bi.ProgressBar=c,bi.Step=a,bi}var Od=A_();const Yr=({currentStep:n})=>{const t=(n-1)/3*100;return i.jsx(Od.ProgressBar,{percent:t,filledBackground:"linear-gradient(to right, #4A90E2, #161f55)",children:[1,2,3,4].map((s,r)=>i.jsx(Od.Step,{children:({accomplished:o})=>i.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full text-white font-bold ${o||n===s?"bg-[#161f55]":"bg-gray-300"}`,children:s})},r))})};console.trace("CustomProgressBar trace");Yr.propTypes={currentStep:je.number.isRequired};const Kl=({onNext:n,onBack:e,currentStep:t})=>{const{files:s,fileInputRef:r,error:o,isUploading:a,handleFileChange:c,handleAddFile:u,handleRemoveFile:d,handleNext:f}=y_(n);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"bg-Primary h-screen relative",children:[i.jsxs("div",{className:"fixed inset-0 w-full h-full",children:[i.jsx("div",{className:"h-1/2 bg-cover bg-bottom relative",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')",backgroundAttachment:"fixed"},children:i.jsx("div",{className:"absolute inset-0 bg-Primary opacity-70"})}),i.jsx("div",{className:"h-1/2 bg-[#161f55]"})]}),i.jsxs("div",{className:"relative flex flex-col justify-center text-center",children:[i.jsxs("h2",{className:"font-LatoBold text-[35px] text-Fwhite tracking-widest py-8",children:["APPLICATION FOR ",i.jsx("br",{}),"RECORDS"]}),i.jsxs("div",{className:"relative mx-auto bg-white p-5 rounded-lg shadow-md w-full max-w-[50%] text-center z-10",children:[i.jsx("div",{className:"w-full max-w-[50%] place-self-center mt-4",children:i.jsx(Yr,{currentStep:t})}),i.jsxs("p",{className:"text-[#161F55] font-LatoItalic mt-20 w-[460px] h-[120px] mx-auto",children:["To proceed with your request, please upload the required requirements (maximum 3 files). Processing will not begin until all necessary requirements are submitted and approved by the administrator.",i.jsx("br",{})," The status of your request will be updated accordingly."]}),i.jsx("h2",{className:"text-gray-800 font-bold text-lg mb-4",children:"ATTACHMENT"}),i.jsx("div",{className:"mb-4 flex flex-col items-center",children:s.length>0?s.map((m,g)=>i.jsxs("div",{className:"flex justify-between w-[500px] items-center bg-gray-100 p-2 rounded-lg shadow-sm mb-2",children:[i.jsx("span",{className:"text-gray-800",children:m.name}),i.jsx("button",{className:"text-red-600 hover:text-red-800 text-sm",onClick:()=>d(g),children:"Remove"})]},g)):i.jsx("p",{className:"text-gray-500 mt-2",children:"No files added."})}),i.jsx("input",{type:"file",ref:r,onChange:c,className:`my-2 justify-center shadow-md text-[#161f55] border-2 py-2 px-2 w-[380px] rounded-[20px] 
                ${o?"border-red-500":"border-[#000] border-opacity-40"}`,multiple:!0,accept:"image/*",disabled:s.length>=3}),o&&i.jsx("p",{className:"text-red-500 text-sm mb-4",children:o}),i.jsx("div",{className:"pr-[210px]",children:i.jsx("button",{type:"button",className:`border-2 shadow-md border-[#425066] border-opacity-40 font-LatoBold text-[#000] text-[16px] px-4 py-2 rounded-[15px] w-[180px] h-[50px] mb-4 hover:bg-[#161f55] hover:text-[#fefefe] transition-colors justify-center text-start bg-none ${s.length>=3?"opacity-50 cursor-not-allowed":""}`,onClick:u,disabled:s.length>=3,children:"+ Add Another File"})}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{className:"bg-[#161f55] text-white px-6 py-2 rounded-lg hover:bg-blue-800",onClick:m=>{m.preventDefault(),e(),vm("/appointmentForm?step=3")},children:"Back"}),"              ",i.jsx("button",{className:`bg-[#161f55] text-white px-6 py-2 rounded-lg hover:bg-blue-800 ${a?"opacity-50 cursor-not-allowed":""}`,onClick:f,disabled:a,children:a?"Uploading...":"Next"})]})]})]})]})})};Kl.propTypes={onNext:je.func,onBack:je.func,currentStep:je.number};const R_="https://appointment-system-backend-n8dk.onrender.com/api/students",P_=async n=>{var e;try{return(await ae.post(`${R_}`,n)).data}catch(t){throw((e=t.response)==null?void 0:e.data)||{message:"Failed to create student"}}},k_=n=>{const e="appInfoFormData",[t,s]=C.useState(()=>{const g=localStorage.getItem(e);return g?JSON.parse(g):{surname:"",firstName:"",middleName:"",schoolYear:"",course:"",address:"",contactNumber:"",email:""}}),[r,o]=C.useState({}),[a,c]=C.useState(!1);C.useEffect(()=>{localStorage.setItem(e,JSON.stringify(t))},[t]);const u=g=>{const{name:v,value:w}=g.target;let N=w;v==="contactNumber"&&(N=w.replace(/\D/g,""),N=N.slice(0,11)),s(x=>({...x,[v]:N})),o(x=>({...x,[v]:""}))},d=()=>{const g={};for(const[v,w]of Object.entries(t)){const N=w.trim();if(!N){g[v]="This field is required.";continue}v==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N)&&(g[v]="Invalid email format."),v==="contactNumber"&&!/^09\d{9}$/.test(N)&&(g[v]="Contact number must start with 09 and be 11 digits."),v==="schoolYear"&&!/^\d{4}\s*[-–]\s*\d{4}$/.test(N)&&(g[v]="School year format should be YYYY-YYYY")}return g};return{formData:t,errors:r,isSubmitting:a,handleInputChange:u,handleNext:async g=>{g.preventDefault();const v=d();if(Object.keys(v).length>0){o(v);return}c(!0);try{const w={surname:t.surname.trim(),firstName:t.firstName.trim(),middleName:t.middleName.trim(),lastSchoolYearAttended:t.schoolYear.trim(),courseOrStrand:t.course.trim(),presentAddress:t.address.trim(),contactNumber:t.contactNumber.trim(),emailAddress:t.email.trim().toLowerCase()},N=await P_(w);localStorage.setItem("studentId",N.studentId);const x=`${t.firstName.trim()} ${t.middleName.trim()} ${t.surname.trim()}`.trim();n(void 0,{name:x,transactionNumber:N.studentId})}catch(w){o(N=>({...N,submit:w.message||"Failed to create student record"}))}finally{c(!1)}},clearSavedData:()=>{localStorage.removeItem(e),s({surname:"",firstName:"",middleName:"",schoolYear:"",course:"",address:"",contactNumber:"",email:""})}}},kp=({onNext:n,onBack:e,currentStep:t})=>{const{formData:s,errors:r,isSubmitting:o,handleInputChange:a,handleNext:c}=k_(n);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"h-full flex items-center justify-center bg-[#161f55]",children:[i.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[i.jsx("div",{className:"h-screen bg-cover bg-bottom",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')",opacity:"0.3",backgroundAttachment:"fixed"}}),i.jsx("div",{className:"h-1/2 bg-[#161f55]"})]}),i.jsxs("div",{className:"flex flex-col justify-center text-center m-2",children:[i.jsxs("h2",{className:"mx-auto relative font-LatoBold text-[35px] text-Fwhite tracking-widest mt-6 mb-8",children:["APPLICATION FOR ",i.jsx("br",{})," RECORDS"]}),i.jsx("div",{className:"mx-auto flex justify-center items-center bg-white p-8 rounded-lg shadow-md w-[800px] max-w-[90%] text-center z-10",children:i.jsxs("form",{className:"space-y-4 w-full",onSubmit:c,onKeyDown:u=>{u.key==="Enter"&&u.preventDefault()},children:[i.jsx("div",{className:"w-full max-w-[60%] mb-10 mx-auto",children:i.jsx(Yr,{currentStep:t})}),r.submit&&i.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:i.jsx("span",{className:"block sm:inline",children:r.submit})}),i.jsx("h2",{className:"uppercase mb-10 flex font-LatoBold text-lg",children:"Personal Details:"}),i.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{label:"Surname",name:"surname",placeholder:"Cruz"},{label:"First Name",name:"firstName",placeholder:"Juan"},{label:"Middle Name",name:"middleName",placeholder:"Dela"}].map(u=>i.jsxs("div",{children:[i.jsx("label",{className:"text-start block text-[17px] font-LatoRegular text-[#000] uppercase",children:u.label}),i.jsx("input",{type:"text",name:u.name,value:s[u.name]||"",onChange:a,placeholder:u.placeholder,className:`pl-2 mt-1 block w-full border-2 h-8 rounded-md ${r[u.name]?"border-red-500":""}`}),r[u.name]&&i.jsx("div",{className:"text-red-600 text-sm text-start",children:r[u.name]})]},u.name))}),[{name:"schoolYear",label:"Last School Year Attended",placeholder:"ex. 2016 - 2017",maxLength:10},{name:"course",label:"Course/Program/Grade/Strand",placeholder:"ex. Grade 1",maxLength:30},{name:"address",label:"Present Address",placeholder:"ex. Sampaloc Apalit Pampanga",maxLength:100},{name:"contactNumber",label:"Contact Number",placeholder:"ex. 0981 255 9915",maxLength:11},{name:"email",label:"Email Address",placeholder:"ex. juandelacruz@gmail.com"}].map(u=>i.jsxs("div",{children:[i.jsx("label",{className:"text-start block text-[17px] font-LatoRegular text-[#000] uppercase",children:u.label}),i.jsx("input",{name:u.name,type:u.name==="email"?"email":"text",value:s[u.name]||"",onChange:a,placeholder:u.placeholder,maxLength:u.maxLength,className:`pl-2 mt-1 block w-full border-2 h-8 rounded-md ${r[u.name]?"border-red-500":""}`}),r[u.name]&&i.jsx("p",{className:"text-red-600 text-sm text-start",children:r[u.name]})]},u.name)),i.jsxs("div",{className:"mt-6 flex justify-end",children:[i.jsx("button",{className:"bg-[#1E2772] text-white px-6 py-2 rounded-lg hover:bg-[#161f55] transition-colors mr-2",onClick:u=>{u.preventDefault(),e(),Navigate("/appointmentForm?step=2")},children:"Back"}),i.jsx("button",{type:"submit",disabled:o,className:`bg-[#1E2772] text-white px-6 py-2 rounded-md hover:bg-[#161f55] transition-colors ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Submitting...":"Next"})]})]})})]})]})})};kp.propTypes={onNext:je.func.isRequired,onBack:je.func.isRequired,currentStep:je.number.isRequired};var Ui={exports:{}},D_=Ui.exports,Ld;function O_(){return Ld||(Ld=1,function(n,e){(function(t,s){n.exports=s()})(D_,function(){var t=1e3,s=6e4,r=36e5,o="millisecond",a="second",c="minute",u="hour",d="day",f="week",m="month",g="quarter",v="year",w="date",N="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(V){var L=["th","st","nd","rd"],F=V%100;return"["+V+(L[(F-20)%10]||L[F]||L[0])+"]"}},_=function(V,L,F){var B=String(V);return!B||B.length>=L?V:""+Array(L+1-B.length).join(F)+V},P={s:_,z:function(V){var L=-V.utcOffset(),F=Math.abs(L),B=Math.floor(F/60),$=F%60;return(L<=0?"+":"-")+_(B,2,"0")+":"+_($,2,"0")},m:function V(L,F){if(L.date()<F.date())return-V(F,L);var B=12*(F.year()-L.year())+(F.month()-L.month()),$=L.clone().add(B,m),W=F-$<0,K=L.clone().add(B+(W?-1:1),m);return+(-(B+(F-$)/(W?$-K:K-$))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:m,y:v,w:f,d,D:w,h:u,m:c,s:a,ms:o,Q:g}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},O="en",D={};D[O]=R;var y="$isDayjsObject",b=function(V){return V instanceof k||!(!V||!V[y])},E=function V(L,F,B){var $;if(!L)return O;if(typeof L=="string"){var W=L.toLowerCase();D[W]&&($=W),F&&(D[W]=F,$=W);var K=L.split("-");if(!$&&K.length>1)return V(K[0])}else{var Z=L.name;D[Z]=L,$=Z}return!B&&$&&(O=$),$||!B&&O},j=function(V,L){if(b(V))return V.clone();var F=typeof L=="object"?L:{};return F.date=V,F.args=arguments,new k(F)},A=P;A.l=E,A.i=b,A.w=function(V,L){return j(V,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var k=function(){function V(F){this.$L=E(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[y]=!0}var L=V.prototype;return L.parse=function(F){this.$d=function(B){var $=B.date,W=B.utc;if($===null)return new Date(NaN);if(A.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var K=$.match(x);if(K){var Z=K[2]-1||0,se=(K[7]||"0").substring(0,3);return W?new Date(Date.UTC(K[1],Z,K[3]||1,K[4]||0,K[5]||0,K[6]||0,se)):new Date(K[1],Z,K[3]||1,K[4]||0,K[5]||0,K[6]||0,se)}}return new Date($)}(F),this.init()},L.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},L.$utils=function(){return A},L.isValid=function(){return this.$d.toString()!==N},L.isSame=function(F,B){var $=j(F);return this.startOf(B)<=$&&$<=this.endOf(B)},L.isAfter=function(F,B){return j(F)<this.startOf(B)},L.isBefore=function(F,B){return this.endOf(B)<j(F)},L.$g=function(F,B,$){return A.u(F)?this[B]:this.set($,F)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(F,B){var $=this,W=!!A.u(B)||B,K=A.p(F),Z=function(me,oe){var ve=A.w($.$u?Date.UTC($.$y,oe,me):new Date($.$y,oe,me),$);return W?ve:ve.endOf(d)},se=function(me,oe){return A.w($.toDate()[me].apply($.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(oe)),$)},z=this.$W,te=this.$M,ie=this.$D,Q="set"+(this.$u?"UTC":"");switch(K){case v:return W?Z(1,0):Z(31,11);case m:return W?Z(1,te):Z(0,te+1);case f:var G=this.$locale().weekStart||0,ee=(z<G?z+7:z)-G;return Z(W?ie-ee:ie+(6-ee),te);case d:case w:return se(Q+"Hours",0);case u:return se(Q+"Minutes",1);case c:return se(Q+"Seconds",2);case a:return se(Q+"Milliseconds",3);default:return this.clone()}},L.endOf=function(F){return this.startOf(F,!1)},L.$set=function(F,B){var $,W=A.p(F),K="set"+(this.$u?"UTC":""),Z=($={},$[d]=K+"Date",$[w]=K+"Date",$[m]=K+"Month",$[v]=K+"FullYear",$[u]=K+"Hours",$[c]=K+"Minutes",$[a]=K+"Seconds",$[o]=K+"Milliseconds",$)[W],se=W===d?this.$D+(B-this.$W):B;if(W===m||W===v){var z=this.clone().set(w,1);z.$d[Z](se),z.init(),this.$d=z.set(w,Math.min(this.$D,z.daysInMonth())).$d}else Z&&this.$d[Z](se);return this.init(),this},L.set=function(F,B){return this.clone().$set(F,B)},L.get=function(F){return this[A.p(F)]()},L.add=function(F,B){var $,W=this;F=Number(F);var K=A.p(B),Z=function(te){var ie=j(W);return A.w(ie.date(ie.date()+Math.round(te*F)),W)};if(K===m)return this.set(m,this.$M+F);if(K===v)return this.set(v,this.$y+F);if(K===d)return Z(1);if(K===f)return Z(7);var se=($={},$[c]=s,$[u]=r,$[a]=t,$)[K]||1,z=this.$d.getTime()+F*se;return A.w(z,this)},L.subtract=function(F,B){return this.add(-1*F,B)},L.format=function(F){var B=this,$=this.$locale();if(!this.isValid())return $.invalidDate||N;var W=F||"YYYY-MM-DDTHH:mm:ssZ",K=A.z(this),Z=this.$H,se=this.$m,z=this.$M,te=$.weekdays,ie=$.months,Q=$.meridiem,G=function(oe,ve,ke,Fe){return oe&&(oe[ve]||oe(B,W))||ke[ve].slice(0,Fe)},ee=function(oe){return A.s(Z%12||12,oe,"0")},me=Q||function(oe,ve,ke){var Fe=oe<12?"AM":"PM";return ke?Fe.toLowerCase():Fe};return W.replace(I,function(oe,ve){return ve||function(ke){switch(ke){case"YY":return String(B.$y).slice(-2);case"YYYY":return A.s(B.$y,4,"0");case"M":return z+1;case"MM":return A.s(z+1,2,"0");case"MMM":return G($.monthsShort,z,ie,3);case"MMMM":return G(ie,z);case"D":return B.$D;case"DD":return A.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return G($.weekdaysMin,B.$W,te,2);case"ddd":return G($.weekdaysShort,B.$W,te,3);case"dddd":return te[B.$W];case"H":return String(Z);case"HH":return A.s(Z,2,"0");case"h":return ee(1);case"hh":return ee(2);case"a":return me(Z,se,!0);case"A":return me(Z,se,!1);case"m":return String(se);case"mm":return A.s(se,2,"0");case"s":return String(B.$s);case"ss":return A.s(B.$s,2,"0");case"SSS":return A.s(B.$ms,3,"0");case"Z":return K}return null}(oe)||K.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(F,B,$){var W,K=this,Z=A.p(B),se=j(F),z=(se.utcOffset()-this.utcOffset())*s,te=this-se,ie=function(){return A.m(K,se)};switch(Z){case v:W=ie()/12;break;case m:W=ie();break;case g:W=ie()/3;break;case f:W=(te-z)/6048e5;break;case d:W=(te-z)/864e5;break;case u:W=te/r;break;case c:W=te/s;break;case a:W=te/t;break;default:W=te}return $?W:A.a(W)},L.daysInMonth=function(){return this.endOf(m).$D},L.$locale=function(){return D[this.$L]},L.locale=function(F,B){if(!F)return this.$L;var $=this.clone(),W=E(F,B,!0);return W&&($.$L=W),$},L.clone=function(){return A.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},V}(),S=k.prototype;return j.prototype=S,[["$ms",o],["$s",a],["$m",c],["$H",u],["$W",d],["$M",m],["$y",v],["$D",w]].forEach(function(V){S[V[1]]=function(L){return this.$g(L,V[0],V[1])}}),j.extend=function(V,L){return V.$i||(V(L,k,j),V.$i=!0),j},j.locale=E,j.isDayjs=b,j.unix=function(V){return j(1e3*V)},j.en=D[O],j.Ls=D,j.p={},j})}(Ui)),Ui.exports}var L_=O_();const Xe=ul(L_),kr="https://appointment-system-backend-n8dk.onrender.com/api/schedules",Dp=n=>{const e=Number(n.slots),t=Number(n.bookedSlots||0);if(isNaN(e)||e<=0)throw new Error("Invalid slots value - must be greater than 0");if(e<t)throw new Error(`Cannot set slots less than booked slots (${t} already booked)`);if(!n.date)throw new Error("Date is required");if(!n.startTime)throw new Error("Start time is required");if(!n.endTime)throw new Error("End time is required")},Op=n=>{const e=Number(n.slots),t=Number(n.bookedSlots||0),s=e-t;return{slots:e,date:new Date(n.date).toISOString(),startTime:n.startTime,endTime:n.endTime,bookedSlots:t,availableSlots:s}},Yl=n=>{throw n.response?new Error(n.response.data.message||"Server error"):n.request?new Error("No response from server"):new Error(n.message||"Request failed")},el=async()=>{var n,e;try{console.log("Fetching schedules from:",kr);const s=(await ae.get(kr)).data.map(r=>({...r,availableSlots:r.slots-(r.bookedSlots||0),bookedSlots:r.bookedSlots||0}));return console.log("Processed schedules:",s),s}catch(t){throw console.error("Error details:",t.response||t),new Error(((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.message)||"Failed to fetch schedules")}},F_=async n=>{try{Dp(n);const e=Op(n);return(await ae.post(kr,e)).data}catch(e){if(e.message)throw e;Yl(e)}},M_=async(n,e)=>{try{if(!n)throw new Error("Schedule ID is required");Dp(e);const t=Op(e);return console.log("Updating schedule with data:",t),(await ae.put(`${kr}/${n}`,t)).data}catch(t){if(t.message)throw t;Yl(t)}},V_=async n=>{try{if(!n)throw new Error("Schedule ID is required");return(await ae.delete(`${kr}/${n}`)).data}catch(e){Yl(e)}},Fd="https://appointment-system-backend-n8dk.onrender.com/api/bookings",B_=n=>{if(!n.scheduleId)throw new Error("Schedule ID is required");if(!n.studentId)throw new Error("Student ID is required");if(!n.date)throw new Error("Appointment date is required");if(!n.timeSlot)throw new Error("Time slot is required")},U_=async n=>{var e,t,s,r,o,a,c;try{B_(n);const u={studentId:n.studentId,scheduleId:n.scheduleId,date:n.date,timeSlot:n.timeSlot,purpose:n.purpose||"General Appointment"};console.log("Sending booking request to:",Fd),console.log("Request data:",JSON.stringify(u,null,2));const d=await ae.post(Fd,u);if(!d.data)throw new Error("No response data received");return console.log("Booking successful! Response:",JSON.stringify(d.data,null,2)),d.data}catch(u){throw console.error("Booking error details:",{message:u.message,response:(e=u.response)==null?void 0:e.data,status:(t=u.response)==null?void 0:t.status,config:u.config}),((s=u.response)==null?void 0:s.status)===409?new Error("This slot is no longer available. Please choose another time slot."):((r=u.response)==null?void 0:r.status)===404?new Error("Booking service not found. Please try again later."):((o=u.response)==null?void 0:o.status)===400?new Error(u.response.data.message||"Invalid booking data"):u.response?new Error(((c=(a=u.response)==null?void 0:a.data)==null?void 0:c.message)||"Failed to create booking"):new Error("Unable to connect to the booking service. Please try again later.")}},$_=n=>{const[e,t]=C.useState(Xe()),[s,r]=C.useState(null),[o,a]=C.useState(null),[c,u]=C.useState(null),[d,f]=C.useState({}),[m,g]=C.useState(""),[v,w]=C.useState(!1),[N,x]=C.useState(!1),[I,R]=C.useState([]),[_,P]=C.useState(!1),O=C.useCallback(L=>{const F={},B=Xe(),$=[...L].sort((W,K)=>Xe(W.date).valueOf()-Xe(K.date).valueOf());for(let W=1;W<=e.daysInMonth();W++){const K=e.date(W),Z=K.format("YYYY-MM-DD");if(K.day()===0||K.day()===6){F[Z]={status:"unavailable",reason:"Weekend"};continue}if(K.isBefore(B,"day")){F[Z]={status:"unavailable",reason:"Past date"};continue}const se=$.find(z=>Xe(z.date).format("YYYY-MM-DD")===Z);if(se){const z=typeof se.slots=="string"?parseInt(se.slots,10):se.slots,te=se.bookedSlots||0,ie=z-te;ie>0?F[Z]={status:"available",schedule:{...se,totalSlots:z,bookedSlots:te,availableSlots:ie,slots:ie,startTime:se.startTime||"No time specified",endTime:se.endTime||"No time specified"}}:F[Z]={status:"unavailable",reason:"Fully booked",schedule:{...se,totalSlots:z,bookedSlots:te,availableSlots:0}}}else F[Z]={status:"unavailable",reason:"No schedule"}}return F},[e]),D=C.useCallback(async()=>{try{x(!0);const L=await el();if(Array.isArray(L)){const F=O(L);f(F)}else g("Error loading schedules")}catch(L){console.error("Failed to load schedules:",L),g("Failed to load schedules")}finally{x(!1)}},[O]);C.useEffect(()=>{D()},[D]);const y=C.useCallback(L=>{a(L),g("")},[]),b=C.useCallback(async L=>{const F=L.format("YYYY-MM-DD"),B=d[F];if((B==null?void 0:B.status)==="available"&&B.schedule)try{const $=B.schedule,W=`${$.startTime} - ${$.endTime}`;R([W]),r({date:F,schedule:$,slots:B.slots}),a(null),g("")}catch($){console.error("Error processing date selection:",$),g("Error loading schedule details"),r(null)}else r(null),a(null),g((B==null?void 0:B.reason)||"Date not available")},[d]),E=async()=>{var L;if(!(s!=null&&s.date)||!o||!((L=s.schedule)!=null&&L._id)){g("Missing required booking information"),w(!1);return}try{P(!0);const B=(await el()).find(te=>te._id===s.schedule._id);if(!B||B.availableSlots<=0)throw new Error("This slot is no longer available");const $=localStorage.getItem("studentId"),W=JSON.parse(localStorage.getItem("appInfoFormData"));if(!$||!W)throw new Error("Please complete your personal information first");const K={date:s.date,timeSlot:o,scheduleId:s.schedule._id,studentId:$,purpose:localStorage.getItem("appointmentPurpose")||"General Appointment"};console.log("Submitting appointment data:",K);const Z=await U_(K);if(!Z)throw new Error("No response from booking service");console.log("Booking successful:",Z),localStorage.setItem("lastBookingResponse",JSON.stringify(Z));const se={...d},z=s.date;if(se[z]){const te=se[z],ie=te.schedule.availableSlots-1,Q=te.schedule.bookedSlots+1;ie<=0?se[z]={status:"unavailable",reason:"Fully booked",schedule:{...te.schedule,availableSlots:0,bookedSlots:te.schedule.totalSlots}}:se[z]={...te,schedule:{...te.schedule,availableSlots:ie,bookedSlots:Q}},f(se),await D()}w(!1),g(""),a(null),r(null),R([]),typeof n=="function"?n():console.error("onNext is not a function")}catch(F){console.error("Booking error:",F),g(F.message||"Failed to book appointment"),w(!1)}finally{P(!1)}},j=C.useCallback(()=>{if(!(s!=null&&s.date)||!o){g("Please select both date and time");return}if(!s.schedule||s.schedule.slots<=0){g("This schedule is no longer available");return}w(!0)},[s,o]),A=C.useCallback(()=>{w(!1)},[]),k=C.useCallback(()=>{t(L=>L.subtract(1,"month"))},[]),S=C.useCallback(()=>{t(L=>L.add(1,"month"))},[]),V=C.useCallback(()=>{const L=e.startOf("month"),F=e.endOf("month"),B=L.startOf("week"),$=F.endOf("week"),W=[];let K=B;for(;K.isBefore($)||K.isSame($,"day");)W.push(K),K=K.add(1,"day");return W},[e]);return C.useEffect(()=>{s&&o&&localStorage.setItem("currentBooking",JSON.stringify({date:s,timeSlot:o,lastUpdated:new Date().toISOString()}))},[s,o]),C.useEffect(()=>{const L=localStorage.getItem("currentBooking");if(L)try{const{date:F,timeSlot:B,lastUpdated:$}=JSON.parse(L),W=new Date($);new Date-W<30*60*1e3?(r(F),a(B)):localStorage.removeItem("currentBooking")}catch(F){console.error("Error recovering saved booking:",F),localStorage.removeItem("currentBooking")}},[]),C.useEffect(()=>{!v&&!s&&!o&&localStorage.removeItem("currentBooking")},[v,s,o]),{currentMonth:e,selectedDate:s,selectedTimeSlot:o,bookings:d,errorMessage:m,showConfirmation:v,loading:N,availableSlots:I,isSubmitting:_,daysInCalendar:V(),handleDateClick:b,handleTimeSlotClick:y,handleSubmit:j,handleConfirmSubmit:E,handleCancelSubmit:A,handlePrevMonth:k,handleNextMonth:S,isSameDay:(L,F)=>L.isSame(F,"day")}},Jl=({onNext:n,onBack:e,currentStep:t})=>{const{currentMonth:s,selectedDate:r,selectedTimeSlot:o,bookings:a,errorMessage:c,showConfirmation:u,loading:d,availableSlots:f,daysInCalendar:m,handleDateClick:g,handleTimeSlotClick:v,handleSubmit:w,handleConfirmSubmit:N,handleCancelSubmit:x,handlePrevMonth:I,handleNextMonth:R,isSameDay:_}=$_(n);return i.jsxs("div",{className:"bg-Primary h-screen relative",children:[i.jsxs("div",{className:"fixed inset-0 w-full h-full",children:[i.jsx("div",{className:"h-1/2 bg-cover bg-bottom relative",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')",backgroundAttachment:"fixed"},children:i.jsx("div",{className:"absolute inset-0 bg-Primary opacity-70"})}),i.jsx("div",{className:"h-1/2 bg-[#161f55]"})]}),i.jsxs("div",{className:"relative flex flex-col justify-center text-center",children:[i.jsx("h1",{className:"font-LatoBold text-[35px] text-Fwhite tracking-widest py-4",children:"REGISTRAR APPOINTMENT"}),i.jsxs("div",{className:"relative mx-auto bg-white p-5 rounded-lg shadow-md w-full max-w-[40%] text-center",children:[i.jsx("div",{className:"w-full max-w-[50%] place-self-center mt-4",children:i.jsx(Yr,{currentStep:t})}),i.jsx("p",{className:"text-[16px] w-[400px] mx-auto font-LatoItalic text-[#161F55] mt-16 mb-8",children:"Please note that you will receive an email confirmation once your appointment has been scheduled."}),i.jsx("p",{className:"text-center font-LatoRegular text-[#000] mb-6 w-[500px] mx-auto",children:"SELECT YOUR PREFERRED DATE AND TIME TO CLAIM YOUR DOCUMENT:"}),i.jsx("div",{className:"w-full flex justify-center px-2",children:i.jsxs("div",{className:"w-full max-w-[550px]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 px-4",children:[i.jsx("h2",{className:"text-lg font-bold text-[#161f55]",children:s.format("MMMM YYYY")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:I,className:"text-white font-bold text-xl bg-[#161F55] h-8 w-8 rounded-md",children:"<"}),i.jsx("button",{onClick:R,className:"text-white font-bold text-xl bg-[#161F55] h-8 w-8 rounded-md",children:">"})]})]}),i.jsx("div",{className:"grid grid-cols-7 text-center mb-2 gap-0 border-b-2 border-gray-300 pb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>i.jsx("div",{className:"text-[#161f55] font-bold text-md",children:P},P))}),d?i.jsx("div",{className:"text-center py-4",children:"Loading calendar..."}):i.jsx("div",{className:"grid grid-cols-7 text-center gap-0",children:m.map(P=>{const O=P.format("YYYY-MM-DD"),D=a[O],y=P.isSame(s,"month"),b=_(P,Xe());return i.jsxs("div",{className:`p-2 sm:p-3 text-xs sm:text-lg cursor-pointer border border-gray-300 transition-all duration-200 flex flex-col justify-center items-center
                          ${y?"text-black":"text-gray-400"}
                          ${b?"text-white bg-[#161f55] border-2 border-[#161f55] rounded":""}                          ${(D==null?void 0:D.status)==="available"?"bg-[#3A993D] hover:bg-[#86EFAC] hover:text-white space-y-0.5":(D==null?void 0:D.status)==="unavailable"&&(D==null?void 0:D.reason)==="Fully booked"?"bg-[#D52121] hover:bg-[#FCA5A5] hover:text-white":"hover:bg-gray-200"}`,onClick:()=>g(P),children:[i.jsx("span",{children:P.date()}),(D==null?void 0:D.status)==="available"?i.jsx("span",{className:"text-xs font-semibold text-white"}):(D==null?void 0:D.status)==="unavailable"&&(D==null?void 0:D.reason)==="Fully booked"?i.jsx("span",{className:"text-xs font-semibold text-white",children:"Full"}):null]},O)})})]})}),i.jsxs("div",{className:"mt-6 min-h-[100px] transition-all duration-300 max-w-[530px] mx-auto",children:[d?i.jsx("div",{className:"text-center py-4",children:"Loading available slots..."}):r?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-lg font-bold text-[#161f55] text-start",children:Xe(r.date).format("MMMM D, YYYY")}),f.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"mt-1 font-bold text-start text-[#3A993D] text-md py-2",children:["Available Slots (",r.schedule.availableSlots," ","remaining)"]}),i.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:f.map((P,O)=>i.jsx("button",{className:`px-2 py-1 rounded text-md 
                            ${o===P?"bg-[#161f55] text-white":"bg-gray-300 hover:bg-gray-400"}`,onClick:()=>v(P),children:P},O))})]}):i.jsx("p",{className:"text-center text-gray-500",children:"No available slots for this date"})]}):i.jsx("p",{className:"text-gray-500 text-center text-sm",children:"Select a date to see available slots."}),c&&i.jsx("p",{className:"text-red-500 text-center mt-2 text-sm",children:c})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:()=>e(2),className:"bg-[#161f55] text-white border border-[#161f55] px-6 py-2 rounded text-sm hover:bg-blue-700",children:"Back"}),i.jsx("button",{onClick:w,disabled:!o,className:`px-6 py-2 rounded text-sm ${o?"bg-[#161f55] hover:bg-blue-700 text-white":"bg-gray-300 text-white cursor-not-allowed"}`,children:"Submit"})]})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg w-80",children:[i.jsx("p",{className:"text-md font-LatoRegular text-[#000] py-2 text-center",children:"Are you sure you want to submit now?"}),i.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[i.jsx("button",{onClick:N,className:" text-[#161f55] px-4 py-1 rounded text-md",children:"Yes"}),i.jsx("button",{onClick:x,className:" text-gray-800 px-4 py-1 rounded text-md",children:"Cancel"})]})]})})]})]})};Jl.propTypes={onNext:je.func,onBack:je.func,currentStep:je.number};function q_(n){return we({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(n)}const z_=()=>{localStorage.removeItem("appInfoFormData"),localStorage.removeItem("uploadedFiles"),localStorage.removeItem("studentId"),localStorage.removeItem("selectedDocuments"),localStorage.removeItem("appointmentSchedule")},H_=()=>{const n=vs(),e=()=>{z_(),n("/home/announcement")};return i.jsx("div",{className:"h-full flex items-center justify-center bg-[#161f55]",children:i.jsxs("div",{className:"relative h-screen w-screen bg-cover bg-center flex items-center justify-center",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')"},children:[i.jsx("div",{className:"absolute inset-0 bg-[#161f55] bg-opacity-70"}),i.jsxs("div",{className:"relative bg-[#FFFFFF] p-6 rounded-lg font-LatoMedium shadow-lg text-center w-[600px] py-8",children:[i.jsxs("p",{className:"text-[#161F55] font-LatoMedium mb-6",children:["Thank you for completing the form. Please wait for the email",i.jsx("br",{}),"notification regarding the status of your document request."]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{className:"px-4 py-2 bg-[#C9C9C9] font-LatoSemiBold text-[#161F55] rounded hover:bg-gray-400 transition flex justify-center items-center gap-3",onClick:e,children:["Return to Home",i.jsx(q_,{})]})})]})]})})},Lp=({onNext:n,transactionNumber:e,name:t})=>{const[s,r]=C.useState({easyToUse:0,features:0,responsiveness:0,reliability:0}),[o,a]=C.useState(null),c=(d,f)=>{r({...s,[d]:f})},u=async()=>{try{if(!Object.values(s).every(g=>g>0)){a("Please provide ratings for all categories");return}console.log("Submitting feedback:",{name:t,transactionNumber:e,ratings:s});const f=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,transactionNumber:e,ratings:s})}),m=await f.json();if(!f.ok){let g="Failed to submit feedback";throw m.message&&(g=m.message,m.details&&(g+=": "+Object.entries(m.details).map(([v,w])=>`${v}: ${w}`).join(", "))),new Error(g)}console.log("Feedback submitted successfully:",m),n()}catch(d){console.error("Error submitting feedback:",d),a(d.message||"Failed to submit feedback. Please try again.")}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#161f55]",children:[i.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[i.jsx("div",{className:"h-1/2 bg-cover bg-bottom",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')",opacity:"0.3",backgroundAttachment:"fixed"}}),i.jsx("div",{className:"h-1/2 bg-[#161f55]"})]}),i.jsxs("div",{className:"relative mx-auto flex flex-col bg-white p-8 rounded-lg shadow-md w-[500px] max-w-[90%] text-center z-10",children:[i.jsx("h3",{className:"text-[16px] tracking-widest font-bold text-[#161f55] mb-4",children:"ALMOST DONE!"}),i.jsxs("p",{className:"text-[18px] tracking-wide font-normal text-[#161f55] mb-6",children:["How would you rate your experience with our ",i.jsx("br",{})," LV AppointEase?"]}),o&&i.jsx("div",{className:"text-red-500 mb-4",children:o}),i.jsx("div",{className:"space-y-4 font-LatoRegular",children:[{label:"Is easy to use",category:"easyToUse"},{label:"Has the features I want",category:"features"},{label:"Feels fast and responsive",category:"responsiveness"},{label:"Is reliable",category:"reliability"}].map((d,f)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-[16px] text-[#161f55]",children:d.label}),i.jsx(Fp,{category:d.category,currentRating:s[d.category],onRate:c})]},f))}),i.jsx("p",{className:"text-sm text-gray-500 mt-6",children:"We will really appreciate your feedback. Thank you!"}),i.jsx("button",{className:"px-6 py-2 bg-[#161f55] text-white rounded mt-6 hover:bg-blue-700",onClick:u,children:"Done"})]})]})},Fp=({category:n,currentRating:e,onRate:t})=>i.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(s=>i.jsx("button",{className:`w-6 h-6 ${s<=e?"text-blue-500":"text-gray-300"}`,onClick:()=>t(n,s),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2.25l3.09 6.26 6.91 1.01-5 4.88 1.18 6.88L12 17.27l-6.18 3.25L7 14.4l-5-4.88 6.91-1.01L12 2.25z"})})},s))});Fp.propTypes={category:je.string,currentRating:je.number,onRate:je.func};Lp.propTypes={onNext:je.func,transactionNumber:je.string,name:je.string};const G_="https://appointment-system-backend-n8dk.onrender.com/api/document-requests",W_=async n=>{var e;try{return(await ae.post(`${G_}/docs`,n)).data}catch(t){throw((e=t.response)==null?void 0:e.data)||{message:"Failed to create document request"}}},K_=n=>{const e="selectDocumentsFormData",[t,s]=C.useState(()=>{const x=localStorage.getItem(e);return x?JSON.parse(x):{showModal:!1,selectedDocuments:[],purpose:"",date:"",claimOption:null}}),[r,o]=C.useState({});C.useEffect(()=>{localStorage.setItem(e,JSON.stringify(t))},[t]),C.useEffect(()=>{t.purpose.trim()&&o(x=>({...x,purpose:""})),t.date&&o(x=>({...x,date:""})),t.selectedDocuments.length>0&&o(x=>({...x,selectedDocuments:""}))},[t.purpose,t.date,t.selectedDocuments]);const a=[{label:"Certificate of Enrollment",value:"certificate_of_enrollment"},{label:"Good Moral Certificate",value:"good_moral_certificate"},{label:"Form 137",value:"form_137"},{label:"Certified True Copy of Documents",value:"certified_copy"},{label:"Transcript of Records",value:"transcript_of_records"},{label:"Education Service Contracting Certificate",value:"education_service_contracting_certificate"}],c=x=>{s(I=>({...I,...x}))},u=x=>{c({selectedDocuments:t.selectedDocuments.includes(x)?t.selectedDocuments.filter(I=>I!==x):[...t.selectedDocuments,x]})},d=x=>{c({selectedDocuments:t.selectedDocuments.filter(I=>I!==x)})},f=()=>{let x={};return t.selectedDocuments.length===0&&(x.selectedDocuments="Please select at least one document."),t.purpose.trim()||(x.purpose="This field is required."),t.date||(x.date="Please select a date."),o(x),Object.keys(x).length===0},m=()=>{f()&&c({showModal:!0})},g=x=>{c({claimOption:x})},v=()=>t.selectedDocuments.map(x=>a.find(R=>R.value===x).label),w=async()=>{try{const x=localStorage.getItem("studentId");console.log("Student ID from localStorage:",x);const I={selectedDocuments:v(),purpose:t.purpose,dateOfRequest:t.date,studentId:x};await W_(I),N(),c({showModal:!1}),t.claimOption==="personal"?n(5):t.claimOption==="authorized"&&n(4)}catch(x){o(I=>({...I,submit:x.message||"Failed to submit document request"})),c({showModal:!1})}},N=()=>{localStorage.removeItem(e)};return{showModal:t.showModal,selectedDocuments:t.selectedDocuments,purpose:t.purpose,setPurpose:x=>c({purpose:x}),date:t.date,setDate:x=>c({date:x}),errors:r,setErrors:o,claimOption:t.claimOption,documentsList:a,handleDocumentSelection:u,removeDocument:d,handleNext:m,handleClaimOption:g,handleModalNext:w,setShowModal:x=>c({showModal:x}),clearSavedData:N}},Mp=({onNext:n,onBack:e,currentStep:t})=>{const{showModal:s,selectedDocuments:r,purpose:o,date:a,errors:c,setErrors:u,claimOption:d,documentsList:f,handleDocumentSelection:m,removeDocument:g,setPurpose:v,setDate:w,handleNext:N,handleClaimOption:x,handleModalNext:I,setShowModal:R}=K_(n);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`bg-Primary h-screen relative ${s?"blur-sm":""}`,children:i.jsxs("div",{className:"bg-Primary h-screen relative",children:[i.jsxs("div",{className:"fixed inset-0 w-full h-full",children:[i.jsx("div",{className:"h-1/2 bg-cover bg-bottom relative",style:{backgroundImage:"url('/assets/image/la_verdad_christian_school_apalit_pampanga_cover.jpeg')",backgroundAttachment:"fixed"},children:i.jsx("div",{className:"absolute inset-0 bg-Primary opacity-70"})}),i.jsx("div",{className:"h-1/2 bg-[#161f55]"})]}),i.jsxs("div",{className:"relative flex flex-col justify-center text-center",children:[i.jsxs("h2",{className:"font-LatoBold text-[32px] text-Fwhite tracking-widest py-3",children:["APPLICATION FOR ",i.jsx("br",{})," RECORDS"]}),i.jsxs("div",{className:"relative mx-auto bg-white p-5 rounded-lg shadow-md w-full max-w-[60%] text-center z-10",children:[i.jsx("div",{className:"w-full max-w-[50%] place-self-center mt-2 ",children:i.jsx(Yr,{currentStep:t})}),c.submit&&i.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:i.jsx("span",{className:"block sm:inline",children:c.submit})}),i.jsx("h2",{className:"uppercase text-lg text-left font-LatoBold my-4",children:"Request:"}),i.jsx("label",{className:"text-start block font-LatoRegular text-[#000]",children:"SELECT DOCUMENTS:"}),i.jsxs("div",{className:`border rounded-lg p-4 shadow-md font-LatoRegular ${c.selectedDocuments?"border-red-600 ":"border-[#000000] border-opacity-40 "}`,children:[i.jsx("div",{className:"grid grid-cols-2 gap-y-2 gap-x-2 ml-8",children:f.map(_=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",value:_.value,onChange:()=>m(_.value),checked:r.includes(_.value),className:"h-5 w-5 "}),i.jsx("span",{children:_.label})]},_.value))}),i.jsx("div",{children:c.selectedDocuments?i.jsx("p",{className:"text-red-600",children:c.selectedDocuments}):i.jsx("p",{className:"invisible",children:"Placeholder"})}),i.jsxs("div",{className:" text-start font-LatoRegular min-h-[135px] ",children:[i.jsx("strong",{className:"ml-8",children:"Selected Documents:"})," ",r.length>0?i.jsx("ul",{className:"grid grid-cols-2 gap-y-1 gap-x-6 mt-1",children:r.map(_=>{var O;const P=(O=f.find(D=>D.value===_))==null?void 0:O.label;return i.jsxs("li",{className:"flex justify-between font-LatoRegular text-[16px] items-center bg-gray-200 px-2 py-1 rounded-md",children:[i.jsx("span",{className:"text-gray-800",children:P}),i.jsx("button",{onClick:()=>g(_),className:"text-red-600 font-LatoRegular hover:text-red-800",children:"Remove"})]},_)})}):i.jsx("span",{className:"text-gray-500 flex ml-8",children:"No documents selected."})]})]}),i.jsxs("div",{className:"text-start mt-4",children:[i.jsx("label",{className:"uppercase font-LatoRegular",children:"State your purpose for applying:"}),i.jsx("textarea",{value:o,onChange:_=>{v(_.target.value),u(P=>({...P,purpose:""}))},placeholder:"Type here...",className:`w-full border h-20 rounded-md pl-2 pt-2 shadow-md ${c.purpose?"border-red-600":"border-[#000000] border-opacity-40"}`}),c.purpose?i.jsx("p",{className:"text-red-600",children:c.purpose}):i.jsx("p",{className:"invisible",children:"Placeholder"})]}),i.jsx("label",{className:"mt-1 block text-start uppercase",children:"Date of Request"}),i.jsx("input",{type:"date",value:a,onChange:_=>{w(_.target.value),u(P=>({...P,date:""}))},className:`pl-2 mt-1 block w-full max-w-[20%] border h-8 rounded-md ${c.date?"border-red-600":"border-[#000000] border-opacity-40"}`}),c.date?i.jsx("p",{className:"text-red-600 text-start",children:c.date}):i.jsx("p",{className:"invisible",children:"Placeholder"}),i.jsxs("div",{className:"flex justify-end space-x-2  ",children:[i.jsx("button",{className:"px-6 py-2  bg-[#161f55] text-white rounded-md",onClick:e,children:"Back"}),i.jsx("button",{className:"px-6 py-2 bg-[#161f55] text-white rounded-md",onClick:N,children:"Next"})]})]})]})]})}),s&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full text-center",children:[i.jsx("h2",{className:"uppercase text-lg text-left font-LatoBold my-8",children:"Upon Claiming the Document:"}),i.jsxs("div",{className:"text-left text-gray-800",children:[i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"claim_option",value:"personal",onChange:()=>x("personal"),checked:d==="personal",className:"h-5 w-5 text-indigo-600 border-gray-300 rounded-full"}),i.jsx("span",{children:"I will claim my document personally."})]}),i.jsxs("label",{className:"flex items-center space-x-2 mt-4 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"claim_option",value:"authorized",onChange:()=>x("authorized"),checked:d==="authorized",className:"h-5 w-5 text-indigo-600 border-gray-300 rounded-full"}),i.jsx("span",{children:"I will authorize someone else to claim it on my behalf."})]}),i.jsx("p",{className:"mt-4 text-sm text-[#161f55] italic",children:"Please note that if you authorize someone to claim your documents, the following must be provided:"}),i.jsxs("ul",{className:"list-disc pl-5 text-sm text-[#161f55] ",children:[i.jsx("li",{children:"Authorization Letter indicating the name of the person authorized."}),i.jsx("li",{children:"Photocopy of Valid ID (front and back) of the student/alumnus, with 3 signatures."}),i.jsx("li",{children:"Photocopy of Valid ID (front and back) of the authorized person processing the request, with 3 signatures."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx("button",{className:"px-6 py-2 bg-gray-300 rounded-md",onClick:()=>R(!1),children:"Back"}),i.jsx("button",{className:"px-6 py-2 bg-[#161f55] text-white rounded-md hover:bg-[#1b2a6b]",onClick:I,children:"Next"})]})]})})]})};Mp.propTypes={onNext:je.func.isRequired,onBack:je.func.isRequired,currentStep:je.number.isRequired};const Y_=()=>{const[n,e]=bm(),[t,s]=C.useState(()=>{const u=n.get("step");return u?parseInt(u,10):1}),[r,o]=C.useState({name:"",transactionNumber:""}),a=(u,d={})=>{const f=u||t+1;console.log("Moving to step:",f),s(f),e({step:f.toString()}),d.name&&o(m=>({...m,name:d.name})),d.transactionNumber&&o(m=>({...m,transactionNumber:d.transactionNumber}))},c=u=>{const d=u||t-1;console.log("Moving back to step:",d),s(d),e({step:d.toString()})};return i.jsxs(i.Fragment,{children:[t===1&&i.jsx(tp,{onNext:a}),t===2&&i.jsx(kp,{onNext:a,onBack:c,currentStep:1}),t===3&&i.jsx(Mp,{onNext:a,onBack:c,currentStep:2}),t===4&&i.jsx(Kl,{onNext:a,onBack:c,currentStep:3}),t===5&&i.jsx(Jl,{onNext:a,onBack:c,currentStep:4}),t===6&&i.jsx(Lp,{onNext:a,onBack:c,currentStep:5,name:r.name,transactionNumber:r.transactionNumber}),t===7&&i.jsx(H_,{onNext:a,onBack:c,currentStep:6})]})},tl=({videoSrc:n,title:e})=>{const t=C.useRef(null),[s,r]=C.useState(!1),[o,a]=C.useState(!1),c=()=>{t.current.play(),r(!0),a(!0)},u=()=>{r(!1)};return i.jsx("div",{className:"w-full max-w-[900px] mx-auto mb-10",children:i.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[i.jsxs("video",{ref:t,className:"w-full",onPlay:()=>{r(!0),a(!0)},onPause:u,onEnded:u,controls:!0,children:[i.jsx("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]}),!s&&i.jsx("button",{onClick:c,className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 transition duration-300",children:i.jsx(Km,{className:"text-white text-6xl hover:scale-110 transition-transform duration-200"})}),!s&&!o&&i.jsx("div",{className:"absolute bottom-4 left-4 text-white text-2xl font-semibold",children:e.split(`
`).map((d,f)=>i.jsx("div",{children:d},f))})]})})};tl.propTypes={videoSrc:je.string.isRequired,title:je.string.isRequired};const Md=()=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"font-LatoRegular",children:[i.jsxs("div",{className:"relative w-full h-[900px] bg-cover  bg-center flex items-center justify-center text-white text-center",style:{backgroundImage:"url('/assets/image/BackGround.png')",filter:"brightness(1.5)"},children:[i.jsx("div",{className:"absolute inset-0 bg-custom-gradient_howtoappoint z-10 pb-10"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),i.jsxs("div",{className:"relative z-10 px-4 max-w-[800px] ",children:[i.jsxs("h1",{className:"text-[50px] font-LatoSemiBold uppercase tracking-widest",children:["WISDOM BASED ON THE ",i.jsx("br",{})," TRUTH IS PRICELESS"]}),i.jsx("div",{className:"border-b-8 border-white my-4"}),i.jsx("p",{className:"text-[30px] ",children:"Well-known for offering quality education with a focus on Christian values, moral development, and academic excellence."})]})]}),i.jsx(dl,{}),i.jsxs("div",{className:"bg-[#161F55] text-white pb-10 flex justify-center items-center mx-auto min-h-[900px] w-full",children:[i.jsxs("div",{className:"w-[70%]",children:[i.jsxs("div",{className:"flex flex-col justify-start tracking-widest leading-normal pt-28 text-start pl-20",children:[i.jsx("h2",{className:"text-[35px] font-semibold tracking-[12px]",children:"APPOINTMENT SCHEDULING"}),i.jsx("span",{className:" border-b-[8px] border-[#F3BC62] my-4 w-[690px] ml-4"}),i.jsx("p",{className:"text-[30px] uppercase pt-10 tracking-widest py-20",children:"How to schedule an appointment in 5 easy steps"})]}),i.jsxs("div",{className:"space-y-5 bg-gray-200 p-6 rounded-xl shadow-md w-[90%] mx-auto",children:[i.jsx(tl,{videoSrc:"/assets/videos/English.mp4",title:"LV AppointEase: Appointment Scheduling Tutorial (English Ver.)"}),i.jsx(tl,{videoSrc:"/assets/videos/TAGALOG.mp4",title:"LV AppointEase: Appointment Scheduling Tutorial (Tagalog Ver.)"})]})]}),i.jsx("div",{className:"flex justify-center items-center w-[30%] pt-[360px]",children:i.jsxs("div",{className:"space-y-6 tracking-wider text-[20px] ",children:[i.jsxs("div",{className:"flex items-center pb-2 ",children:[i.jsx("span",{className:"text-5xl font-bold",children:"01."}),i.jsx("span",{className:"border-r-[8px] border-[#F3BC62] h-[260px] mx-5"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"uppercase text-3xl font-bold ",children:"Step 1:"}),i.jsxs("p",{className:"text-1xl ",children:["Click the appointment button. Agree to the Data Privacy"," ",i.jsx("br",{})," Agreement Form."]}),i.jsx("p",{className:"italic",children:"I-click ang “appoint now” button. Pindutin ang checkbox upang mag-agree sa Data Privacy Agreement."})]})]}),i.jsxs("div",{className:"flex items-center pb-2",children:[i.jsx("span",{className:"text-5xl font-bold",children:"02."}),i.jsx("span",{className:"border-r-[8px] border-[#F3BC62] h-[130px] mx-5"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"uppercase text-3xl font-bold  gap-4",children:"Step 2:"}),i.jsx("p",{className:"text-1xl",children:"Fill out the request form."}),i.jsx("p",{className:"italic",children:"Sagutan ang request form."})]})]}),i.jsxs("div",{className:"flex items-center pb-2",children:[i.jsx("span",{className:"text-5xl font-bold ",children:"03."}),i.jsx("span",{className:"border-r-[8px] border-[#F3BC62] h-[170px] mx-5"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"uppercase text-3xl font-bold ",children:"Step 3:"}),i.jsx("p",{className:"text-1xl ",children:"Upload the necessary requirements."}),i.jsx("p",{className:"italic",children:"I-upload ang mga kailangang requirements."})]})]}),i.jsxs("div",{className:"flex items-center pb-2",children:[i.jsx("span",{className:"text-5xl font-bold ",children:"04."}),i.jsx("span",{className:"border-r-[8px] border-[#F3BC62] h-[130px] mx-5"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"uppercase text-3xl font-bold ",children:"Step 4:"}),i.jsx("p",{className:"text-1xl",children:"Choose an appointment date."}),i.jsx("p",{className:"italic",children:"Pumili ng appointment date."})]})]}),i.jsxs("div",{className:"flex items-center pb-2",children:[i.jsx("span",{className:"text-5xl font-bold ",children:"05."}),i.jsx("span",{className:"border-r-[8px] border-[#F3BC62] h-[225px] mx-5"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"uppercase text-3xl font-bold ",children:"Step 5:"}),i.jsx("p",{className:"text-1xl",children:"Submit and wait for an email of approval."}),i.jsx("p",{className:"italic",children:"Isumite ang request form at hintayin ang email na na-aprubahan na ang iyong appointment."})]})]})]})})]})]})}),J_=()=>i.jsx("div",{children:i.jsx(wm,{})});function Q_(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(n)}function X_(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(n)}function Z_(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128 192l128 128 128-128z"},child:[]}]})(n)}function eE(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M170.718 216.482L141.6 245.6l93.6 93.6 208-208-29.118-29.118L235.2 279.918l-64.482-63.436zM422.4 256c0 91.518-74.883 166.4-166.4 166.4S89.6 347.518 89.6 256 164.482 89.6 256 89.6c15.6 0 31.2 2.082 45.764 6.241L334 63.6C310.082 53.2 284.082 48 256 48 141.6 48 48 141.6 48 256s93.6 208 208 208 208-93.6 208-208h-41.6z"},child:[]}]})(n)}function tE(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M208 448V320h96v128h97.6V256H464L256 64 48 256h62.4v192z"},child:[]}]})(n)}const Gs=Math.min,ds=Math.max,ao=Math.round,Ti=Math.floor,Xt=n=>({x:n,y:n}),nE={left:"right",right:"left",bottom:"top",top:"bottom"},sE={start:"end",end:"start"};function nl(n,e,t){return ds(n,Gs(e,t))}function Jr(n,e){return typeof n=="function"?n(e):n}function gs(n){return n.split("-")[0]}function Qr(n){return n.split("-")[1]}function Vp(n){return n==="x"?"y":"x"}function Ql(n){return n==="y"?"height":"width"}function Ws(n){return["top","bottom"].includes(gs(n))?"y":"x"}function Xl(n){return Vp(Ws(n))}function rE(n,e,t){t===void 0&&(t=!1);const s=Qr(n),r=Xl(n),o=Ql(r);let a=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=lo(a)),[a,lo(a)]}function iE(n){const e=lo(n);return[sl(n),e,sl(e)]}function sl(n){return n.replace(/start|end/g,e=>sE[e])}function oE(n,e,t){const s=["left","right"],r=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:s:e?s:r;case"left":case"right":return e?o:a;default:return[]}}function aE(n,e,t,s){const r=Qr(n);let o=oE(gs(n),t==="start",s);return r&&(o=o.map(a=>a+"-"+r),e&&(o=o.concat(o.map(sl)))),o}function lo(n){return n.replace(/left|right|bottom|top/g,e=>nE[e])}function lE(n){return{top:0,right:0,bottom:0,left:0,...n}}function Bp(n){return typeof n!="number"?lE(n):{top:n,right:n,bottom:n,left:n}}function co(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function Vd(n,e,t){let{reference:s,floating:r}=n;const o=Ws(e),a=Xl(e),c=Ql(a),u=gs(e),d=o==="y",f=s.x+s.width/2-r.width/2,m=s.y+s.height/2-r.height/2,g=s[c]/2-r[c]/2;let v;switch(u){case"top":v={x:f,y:s.y-r.height};break;case"bottom":v={x:f,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:m};break;case"left":v={x:s.x-r.width,y:m};break;default:v={x:s.x,y:s.y}}switch(Qr(e)){case"start":v[a]-=g*(t&&d?-1:1);break;case"end":v[a]+=g*(t&&d?-1:1);break}return v}const cE=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:o=[],platform:a}=t,c=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:f,y:m}=Vd(d,s,u),g=s,v={},w=0;for(let N=0;N<c.length;N++){const{name:x,fn:I}=c[N],{x:R,y:_,data:P,reset:O}=await I({x:f,y:m,initialPlacement:s,placement:g,strategy:r,middlewareData:v,rects:d,platform:a,elements:{reference:n,floating:e}});f=R??f,m=_??m,v={...v,[x]:{...v[x],...P}},O&&w<=50&&(w++,typeof O=="object"&&(O.placement&&(g=O.placement),O.rects&&(d=O.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):O.rects),{x:f,y:m}=Vd(d,g,u)),N=-1)}return{x:f,y:m,placement:g,strategy:r,middlewareData:v}};async function Up(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:o,rects:a,elements:c,strategy:u}=n,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:g=!1,padding:v=0}=Jr(e,n),w=Bp(v),x=c[g?m==="floating"?"reference":"floating":m],I=co(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(x)))==null||t?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:d,rootBoundary:f,strategy:u})),R=m==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),P=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},O=co(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:R,offsetParent:_,strategy:u}):R);return{top:(I.top-O.top+w.top)/P.y,bottom:(O.bottom-I.bottom+w.bottom)/P.y,left:(I.left-O.left+w.left)/P.x,right:(O.right-I.right+w.right)/P.x}}const uE=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:o,platform:a,elements:c,middlewareData:u}=e,{element:d,padding:f=0}=Jr(n,e)||{};if(d==null)return{};const m=Bp(f),g={x:t,y:s},v=Xl(r),w=Ql(v),N=await a.getDimensions(d),x=v==="y",I=x?"top":"left",R=x?"bottom":"right",_=x?"clientHeight":"clientWidth",P=o.reference[w]+o.reference[v]-g[v]-o.floating[w],O=g[v]-o.reference[v],D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let y=D?D[_]:0;(!y||!await(a.isElement==null?void 0:a.isElement(D)))&&(y=c.floating[_]||o.floating[w]);const b=P/2-O/2,E=y/2-N[w]/2-1,j=Gs(m[I],E),A=Gs(m[R],E),k=j,S=y-N[w]-A,V=y/2-N[w]/2+b,L=nl(k,V,S),F=!u.arrow&&Qr(r)!=null&&V!==L&&o.reference[w]/2-(V<k?j:A)-N[w]/2<0,B=F?V<k?V-k:V-S:0;return{[v]:g[v]+B,data:{[v]:L,centerOffset:V-L-B,...F&&{alignmentOffset:B}},reset:F}}}),dE=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:o,rects:a,initialPlacement:c,platform:u,elements:d}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:N=!0,...x}=Jr(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const I=gs(r),R=Ws(c),_=gs(c)===c,P=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=g||(_||!N?[lo(c)]:iE(c)),D=w!=="none";!g&&D&&O.push(...aE(c,N,w,P));const y=[c,...O],b=await Up(e,x),E=[];let j=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&E.push(b[I]),m){const V=rE(r,a,P);E.push(b[V[0]],b[V[1]])}if(j=[...j,{placement:r,overflows:E}],!E.every(V=>V<=0)){var A,k;const V=(((A=o.flip)==null?void 0:A.index)||0)+1,L=y[V];if(L)return{data:{index:V,overflows:j},reset:{placement:L}};let F=(k=j.filter(B=>B.overflows[0]<=0).sort((B,$)=>B.overflows[1]-$.overflows[1])[0])==null?void 0:k.placement;if(!F)switch(v){case"bestFit":{var S;const B=(S=j.filter($=>{if(D){const W=Ws($.placement);return W===R||W==="y"}return!0}).map($=>[$.placement,$.overflows.filter(W=>W>0).reduce((W,K)=>W+K,0)]).sort(($,W)=>$[1]-W[1])[0])==null?void 0:S[0];B&&(F=B);break}case"initialPlacement":F=c;break}if(r!==F)return{reset:{placement:F}}}return{}}}};async function hE(n,e){const{placement:t,platform:s,elements:r}=n,o=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=gs(t),c=Qr(t),u=Ws(t)==="y",d=["left","top"].includes(a)?-1:1,f=o&&u?-1:1,m=Jr(e,n);let{mainAxis:g,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return c&&typeof w=="number"&&(v=c==="end"?w*-1:w),u?{x:v*f,y:g*d}:{x:g*d,y:v*f}}const fE=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:o,placement:a,middlewareData:c}=e,u=await hE(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:r+u.x,y:o+u.y,data:{...u,placement:a}}}}},pE=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:c={fn:x=>{let{x:I,y:R}=x;return{x:I,y:R}}},...u}=Jr(n,e),d={x:t,y:s},f=await Up(e,u),m=Ws(gs(r)),g=Vp(m);let v=d[g],w=d[m];if(o){const x=g==="y"?"top":"left",I=g==="y"?"bottom":"right",R=v+f[x],_=v-f[I];v=nl(R,v,_)}if(a){const x=m==="y"?"top":"left",I=m==="y"?"bottom":"right",R=w+f[x],_=w-f[I];w=nl(R,w,_)}const N=c.fn({...e,[g]:v,[m]:w});return{...N,data:{x:N.x-t,y:N.y-s}}}}};function Oo(){return typeof window<"u"}function rr(n){return $p(n)?(n.nodeName||"").toLowerCase():"#document"}function Dt(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function sn(n){var e;return(e=($p(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function $p(n){return Oo()?n instanceof Node||n instanceof Dt(n).Node:!1}function qt(n){return Oo()?n instanceof Element||n instanceof Dt(n).Element:!1}function nn(n){return Oo()?n instanceof HTMLElement||n instanceof Dt(n).HTMLElement:!1}function Bd(n){return!Oo()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Dt(n).ShadowRoot}function Xr(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=zt(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!["inline","contents"].includes(r)}function mE(n){return["table","td","th"].includes(rr(n))}function Lo(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Zl(n){const e=ec(),t=qt(n)?zt(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(t.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(t.contain||"").includes(s))}function gE(n){let e=Yn(n);for(;nn(e)&&!Ks(e);){if(Zl(e))return e;if(Lo(e))return null;e=Yn(e)}return null}function ec(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ks(n){return["html","body","#document"].includes(rr(n))}function zt(n){return Dt(n).getComputedStyle(n)}function Fo(n){return qt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Yn(n){if(rr(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Bd(n)&&n.host||sn(n);return Bd(e)?e.host:e}function qp(n){const e=Yn(n);return Ks(e)?n.ownerDocument?n.ownerDocument.body:n.body:nn(e)&&Xr(e)?e:qp(e)}function Dr(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=qp(n),o=r===((s=n.ownerDocument)==null?void 0:s.body),a=Dt(r);if(o){const c=rl(a);return e.concat(a,a.visualViewport||[],Xr(r)?r:[],c&&t?Dr(c):[])}return e.concat(r,Dr(r,[],t))}function rl(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function zp(n){const e=zt(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=nn(n),o=r?n.offsetWidth:t,a=r?n.offsetHeight:s,c=ao(t)!==o||ao(s)!==a;return c&&(t=o,s=a),{width:t,height:s,$:c}}function tc(n){return qt(n)?n:n.contextElement}function Fs(n){const e=tc(n);if(!nn(e))return Xt(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:o}=zp(e);let a=(o?ao(t.width):t.width)/s,c=(o?ao(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const xE=Xt(0);function Hp(n){const e=Dt(n);return!ec()||!e.visualViewport?xE:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yE(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Dt(n)?!1:e}function xs(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),o=tc(n);let a=Xt(1);e&&(s?qt(s)&&(a=Fs(s)):a=Fs(n));const c=yE(o,t,s)?Hp(o):Xt(0);let u=(r.left+c.x)/a.x,d=(r.top+c.y)/a.y,f=r.width/a.x,m=r.height/a.y;if(o){const g=Dt(o),v=s&&qt(s)?Dt(s):s;let w=g,N=rl(w);for(;N&&s&&v!==w;){const x=Fs(N),I=N.getBoundingClientRect(),R=zt(N),_=I.left+(N.clientLeft+parseFloat(R.paddingLeft))*x.x,P=I.top+(N.clientTop+parseFloat(R.paddingTop))*x.y;u*=x.x,d*=x.y,f*=x.x,m*=x.y,u+=_,d+=P,w=Dt(N),N=rl(w)}}return co({width:f,height:m,x:u,y:d})}function nc(n,e){const t=Fo(n).scrollLeft;return e?e.left+t:xs(sn(n)).left+t}function Gp(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:nc(n,s)),o=s.top+e.scrollTop;return{x:r,y:o}}function vE(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const o=r==="fixed",a=sn(s),c=e?Lo(e.floating):!1;if(s===a||c&&o)return t;let u={scrollLeft:0,scrollTop:0},d=Xt(1);const f=Xt(0),m=nn(s);if((m||!m&&!o)&&((rr(s)!=="body"||Xr(a))&&(u=Fo(s)),nn(s))){const v=xs(s);d=Fs(s),f.x=v.x+s.clientLeft,f.y=v.y+s.clientTop}const g=a&&!m&&!o?Gp(a,u,!0):Xt(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-u.scrollLeft*d.x+f.x+g.x,y:t.y*d.y-u.scrollTop*d.y+f.y+g.y}}function bE(n){return Array.from(n.getClientRects())}function wE(n){const e=sn(n),t=Fo(n),s=n.ownerDocument.body,r=ds(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),o=ds(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+nc(n);const c=-t.scrollTop;return zt(s).direction==="rtl"&&(a+=ds(e.clientWidth,s.clientWidth)-r),{width:r,height:o,x:a,y:c}}function _E(n,e){const t=Dt(n),s=sn(n),r=t.visualViewport;let o=s.clientWidth,a=s.clientHeight,c=0,u=0;if(r){o=r.width,a=r.height;const d=ec();(!d||d&&e==="fixed")&&(c=r.offsetLeft,u=r.offsetTop)}return{width:o,height:a,x:c,y:u}}function EE(n,e){const t=xs(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,o=nn(n)?Fs(n):Xt(1),a=n.clientWidth*o.x,c=n.clientHeight*o.y,u=r*o.x,d=s*o.y;return{width:a,height:c,x:u,y:d}}function Ud(n,e,t){let s;if(e==="viewport")s=_E(n,t);else if(e==="document")s=wE(sn(n));else if(qt(e))s=EE(e,t);else{const r=Hp(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return co(s)}function Wp(n,e){const t=Yn(n);return t===e||!qt(t)||Ks(t)?!1:zt(t).position==="fixed"||Wp(t,e)}function NE(n,e){const t=e.get(n);if(t)return t;let s=Dr(n,[],!1).filter(c=>qt(c)&&rr(c)!=="body"),r=null;const o=zt(n).position==="fixed";let a=o?Yn(n):n;for(;qt(a)&&!Ks(a);){const c=zt(a),u=Zl(a);!u&&c.position==="fixed"&&(r=null),(o?!u&&!r:!u&&c.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Xr(a)&&!u&&Wp(n,a))?s=s.filter(f=>f!==a):r=c,a=Yn(a)}return e.set(n,s),s}function SE(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const a=[...t==="clippingAncestors"?Lo(e)?[]:NE(e,this._c):[].concat(t),s],c=a[0],u=a.reduce((d,f)=>{const m=Ud(e,f,r);return d.top=ds(m.top,d.top),d.right=Gs(m.right,d.right),d.bottom=Gs(m.bottom,d.bottom),d.left=ds(m.left,d.left),d},Ud(e,c,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function TE(n){const{width:e,height:t}=zp(n);return{width:e,height:t}}function IE(n,e,t){const s=nn(e),r=sn(e),o=t==="fixed",a=xs(n,!0,o,e);let c={scrollLeft:0,scrollTop:0};const u=Xt(0);if(s||!s&&!o)if((rr(e)!=="body"||Xr(r))&&(c=Fo(e)),s){const g=xs(e,!0,o,e);u.x=g.x+e.clientLeft,u.y=g.y+e.clientTop}else r&&(u.x=nc(r));const d=r&&!s&&!o?Gp(r,c):Xt(0),f=a.left+c.scrollLeft-u.x-d.x,m=a.top+c.scrollTop-u.y-d.y;return{x:f,y:m,width:a.width,height:a.height}}function ba(n){return zt(n).position==="static"}function $d(n,e){if(!nn(n)||zt(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return sn(n)===t&&(t=t.ownerDocument.body),t}function Kp(n,e){const t=Dt(n);if(Lo(n))return t;if(!nn(n)){let r=Yn(n);for(;r&&!Ks(r);){if(qt(r)&&!ba(r))return r;r=Yn(r)}return t}let s=$d(n,e);for(;s&&mE(s)&&ba(s);)s=$d(s,e);return s&&Ks(s)&&ba(s)&&!Zl(s)?t:s||gE(n)||t}const CE=async function(n){const e=this.getOffsetParent||Kp,t=this.getDimensions,s=await t(n.floating);return{reference:IE(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function jE(n){return zt(n).direction==="rtl"}const AE={convertOffsetParentRelativeRectToViewportRelativeRect:vE,getDocumentElement:sn,getClippingRect:SE,getOffsetParent:Kp,getElementRects:CE,getClientRects:bE,getDimensions:TE,getScale:Fs,isElement:qt,isRTL:jE};function RE(n,e){let t=null,s;const r=sn(n);function o(){var c;clearTimeout(s),(c=t)==null||c.disconnect(),t=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),o();const{left:d,top:f,width:m,height:g}=n.getBoundingClientRect();if(c||e(),!m||!g)return;const v=Ti(f),w=Ti(r.clientWidth-(d+m)),N=Ti(r.clientHeight-(f+g)),x=Ti(d),R={rootMargin:-v+"px "+-w+"px "+-N+"px "+-x+"px",threshold:ds(0,Gs(1,u))||1};let _=!0;function P(O){const D=O[0].intersectionRatio;if(D!==u){if(!_)return a();D?a(!1,D):s=setTimeout(()=>{a(!1,1e-7)},1e3)}_=!1}try{t=new IntersectionObserver(P,{...R,root:r.ownerDocument})}catch{t=new IntersectionObserver(P,R)}t.observe(n)}return a(!0),o}function PE(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,d=tc(n),f=r||o?[...d?Dr(d):[],...Dr(e)]:[];f.forEach(I=>{r&&I.addEventListener("scroll",t,{passive:!0}),o&&I.addEventListener("resize",t)});const m=d&&c?RE(d,t):null;let g=-1,v=null;a&&(v=new ResizeObserver(I=>{let[R]=I;R&&R.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var _;(_=v)==null||_.observe(e)})),t()}),d&&!u&&v.observe(d),v.observe(e));let w,N=u?xs(n):null;u&&x();function x(){const I=xs(n);N&&(I.x!==N.x||I.y!==N.y||I.width!==N.width||I.height!==N.height)&&t(),N=I,w=requestAnimationFrame(x)}return t(),()=>{var I;f.forEach(R=>{r&&R.removeEventListener("scroll",t),o&&R.removeEventListener("resize",t)}),m==null||m(),(I=v)==null||I.disconnect(),v=null,u&&cancelAnimationFrame(w)}}const kE=fE,DE=pE,OE=dE,LE=uE,qd=(n,e,t)=>{const s=new Map,r={platform:AE,...t},o={...r.platform,_c:s};return cE(n,e,{...r,platform:o})};var wa={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var zd;function FE(){return zd||(zd=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(o=r(o,s(c)))}return o}function s(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var c in o)e.call(o,c)&&o[c]&&(a=r(a,c));return a}function r(o,a){return a?o?o+" "+a:o+a:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(wa)),wa.exports}var ME=FE();const il=ul(ME);var Hd={};const VE="react-tooltip-core-styles",BE="react-tooltip-base-styles",Gd={core:!1,base:!1};function Wd({css:n,id:e=BE,type:t="base",ref:s}){var r,o;if(!n||typeof document>"u"||Gd[t]||t==="core"&&typeof process<"u"&&(!((r=process==null?void 0:Hd)===null||r===void 0)&&r.REACT_TOOLTIP_DISABLE_CORE_STYLES)||t!=="base"&&typeof process<"u"&&(!((o=process==null?void 0:Hd)===null||o===void 0)&&o.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;t==="core"&&(e=VE),s||(s={});const{insertAt:a}=s;if(document.getElementById(e))return;const c=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.id=e,u.type="text/css",a==="top"&&c.firstChild?c.insertBefore(u,c.firstChild):c.appendChild(u),u.styleSheet?u.styleSheet.cssText=n:u.appendChild(document.createTextNode(n)),Gd[t]=!0}const Kd=async({elementReference:n=null,tooltipReference:e=null,tooltipArrowReference:t=null,place:s="top",offset:r=10,strategy:o="absolute",middlewares:a=[kE(Number(r)),OE({fallbackAxisSideDirection:"start"}),DE({padding:5})],border:c})=>{if(!n)return{tooltipStyles:{},tooltipArrowStyles:{},place:s};if(e===null)return{tooltipStyles:{},tooltipArrowStyles:{},place:s};const u=a;return t?(u.push(LE({element:t,padding:5})),qd(n,e,{placement:s,strategy:o,middleware:u}).then(({x:d,y:f,placement:m,middlewareData:g})=>{var v,w;const N={left:`${d}px`,top:`${f}px`,border:c},{x,y:I}=(v=g.arrow)!==null&&v!==void 0?v:{x:0,y:0},R=(w={top:"bottom",right:"left",bottom:"top",left:"right"}[m.split("-")[0]])!==null&&w!==void 0?w:"bottom",_=c&&{borderBottom:c,borderRight:c};let P=0;if(c){const O=`${c}`.match(/(\d+)px/);P=O!=null&&O[1]?Number(O[1]):1}return{tooltipStyles:N,tooltipArrowStyles:{left:x!=null?`${x}px`:"",top:I!=null?`${I}px`:"",right:"",bottom:"",..._,[R]:`-${4+P}px`},place:m}})):qd(n,e,{placement:"bottom",strategy:o,middleware:u}).then(({x:d,y:f,placement:m})=>({tooltipStyles:{left:`${d}px`,top:`${f}px`},tooltipArrowStyles:{},place:m}))},Yd=(n,e)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(n,e),Jd=(n,e,t)=>{let s=null;const r=function(...o){const a=()=>{s=null};!s&&(n.apply(this,o),s=setTimeout(a,e))};return r.cancel=()=>{s&&(clearTimeout(s),s=null)},r},Qd=n=>n!==null&&!Array.isArray(n)&&typeof n=="object",ol=(n,e)=>{if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e))return n.length===e.length&&n.every((r,o)=>ol(r,e[o]));if(Array.isArray(n)!==Array.isArray(e))return!1;if(!Qd(n)||!Qd(e))return n===e;const t=Object.keys(n),s=Object.keys(e);return t.length===s.length&&t.every(r=>ol(n[r],e[r]))},UE=n=>{if(!(n instanceof HTMLElement||n instanceof SVGElement))return!1;const e=getComputedStyle(n);return["overflow","overflow-x","overflow-y"].some(t=>{const s=e.getPropertyValue(t);return s==="auto"||s==="scroll"})},Xd=n=>{if(!n)return null;let e=n.parentElement;for(;e;){if(UE(e))return e;e=e.parentElement}return document.scrollingElement||document.documentElement},$E=typeof window<"u"?C.useLayoutEffect:C.useEffect,Ft=n=>{n.current&&(clearTimeout(n.current),n.current=null)},qE="DEFAULT_TOOLTIP_ID",zE={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},HE=C.createContext({getTooltipData:()=>zE});function Yp(n=qE){return C.useContext(HE).getTooltipData(n)}var Ts={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},_a={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const GE=({forwardRef:n,id:e,className:t,classNameArrow:s,variant:r="dark",anchorId:o,anchorSelect:a,place:c="top",offset:u=10,events:d=["hover"],openOnClick:f=!1,positionStrategy:m="absolute",middlewares:g,wrapper:v,delayShow:w=0,delayHide:N=0,float:x=!1,hidden:I=!1,noArrow:R=!1,clickable:_=!1,closeOnEsc:P=!1,closeOnScroll:O=!1,closeOnResize:D=!1,openEvents:y,closeEvents:b,globalCloseEvents:E,imperativeModeOnly:j,style:A,position:k,afterShow:S,afterHide:V,disableTooltip:L,content:F,contentWrapperRef:B,isOpen:$,defaultIsOpen:W=!1,setIsOpen:K,activeAnchor:Z,setActiveAnchor:se,border:z,opacity:te,arrowColor:ie,role:Q="tooltip"})=>{var G;const ee=C.useRef(null),me=C.useRef(null),oe=C.useRef(null),ve=C.useRef(null),ke=C.useRef(null),[Fe,bt]=C.useState({tooltipStyles:{},tooltipArrowStyles:{},place:c}),[Ge,ge]=C.useState(!1),[qe,Gt]=C.useState(!1),[Me,re]=C.useState(null),Le=C.useRef(!1),it=C.useRef(null),{anchorRefs:nt,setActiveAnchor:Ae}=Yp(e),ot=C.useRef(!1),[be,De]=C.useState([]),Nt=C.useRef(!1),an=f||d.includes("click"),Nn=an||(y==null?void 0:y.click)||(y==null?void 0:y.dblclick)||(y==null?void 0:y.mousedown),Sn=y?{...y}:{mouseover:!0,focus:!0,mouseenter:!1,click:!1,dblclick:!1,mousedown:!1};!y&&an&&Object.assign(Sn,{mouseenter:!1,focus:!1,mouseover:!1,click:!0});const Mt=b?{...b}:{mouseout:!0,blur:!0,mouseleave:!1,click:!1,dblclick:!1,mouseup:!1};!b&&an&&Object.assign(Mt,{mouseleave:!1,blur:!1,mouseout:!1});const St=E?{...E}:{escape:P||!1,scroll:O||!1,resize:D||!1,clickOutsideAnchor:Nn||!1};j&&(Object.assign(Sn,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(Mt,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(St,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),$E(()=>(Nt.current=!0,()=>{Nt.current=!1}),[]);const ze=Y=>{Nt.current&&(Y&&Gt(!0),setTimeout(()=>{Nt.current&&(K==null||K(Y),$===void 0&&ge(Y))},10))};C.useEffect(()=>{if($===void 0)return()=>null;$&&Gt(!0);const Y=setTimeout(()=>{ge($)},10);return()=>{clearTimeout(Y)}},[$]),C.useEffect(()=>{if(Ge!==Le.current)if(Ft(ke),Le.current=Ge,Ge)S==null||S();else{const Y=(ce=>{const de=ce.match(/^([\d.]+)(ms|s)$/);if(!de)return 0;const[,Ue,st]=de;return Number(Ue)*(st==="ms"?1:1e3)})(getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay"));ke.current=setTimeout(()=>{Gt(!1),re(null),V==null||V()},Y+25)}},[Ge]);const Tn=Y=>{bt(ce=>ol(ce,Y)?ce:Y)},Jn=(Y=w)=>{Ft(oe),qe?ze(!0):oe.current=setTimeout(()=>{ze(!0)},Y)},In=(Y=N)=>{Ft(ve),ve.current=setTimeout(()=>{ot.current||ze(!1)},Y)},ln=Y=>{var ce;if(!Y)return;const de=(ce=Y.currentTarget)!==null&&ce!==void 0?ce:Y.target;if(!(de!=null&&de.isConnected))return se(null),void Ae({current:null});w?Jn():ze(!0),se(de),Ae({current:de}),Ft(ve)},cn=()=>{_?In(N||100):N?In():ze(!1),Ft(oe)},un=({x:Y,y:ce})=>{var de;const Ue={getBoundingClientRect:()=>({x:Y,y:ce,width:0,height:0,top:ce,left:Y,right:Y,bottom:ce})};Kd({place:(de=Me==null?void 0:Me.place)!==null&&de!==void 0?de:c,offset:u,elementReference:Ue,tooltipReference:ee.current,tooltipArrowReference:me.current,strategy:m,middlewares:g,border:z}).then(st=>{Tn(st)})},Ot=Y=>{if(!Y)return;const ce=Y,de={x:ce.clientX,y:ce.clientY};un(de),it.current=de},dn=Y=>{var ce;if(!Ge)return;const de=Y.target;de.isConnected&&(!((ce=ee.current)===null||ce===void 0)&&ce.contains(de)||[document.querySelector(`[id='${o}']`),...be].some(Ue=>Ue==null?void 0:Ue.contains(de))||(ze(!1),Ft(oe)))},Cn=Jd(ln,50),Be=Jd(cn,50),wt=Y=>{Be.cancel(),Cn(Y)},le=()=>{Cn.cancel(),Be()},_e=C.useCallback(()=>{var Y,ce;const de=(Y=Me==null?void 0:Me.position)!==null&&Y!==void 0?Y:k;de?un(de):x?it.current&&un(it.current):Z!=null&&Z.isConnected&&Kd({place:(ce=Me==null?void 0:Me.place)!==null&&ce!==void 0?ce:c,offset:u,elementReference:Z,tooltipReference:ee.current,tooltipArrowReference:me.current,strategy:m,middlewares:g,border:z}).then(Ue=>{Nt.current&&Tn(Ue)})},[Ge,Z,F,A,c,Me==null?void 0:Me.place,u,m,k,Me==null?void 0:Me.position,x]);C.useEffect(()=>{var Y,ce;const de=new Set(nt);be.forEach(Re=>{L!=null&&L(Re)||de.add({current:Re})});const Ue=document.querySelector(`[id='${o}']`);Ue&&!(L!=null&&L(Ue))&&de.add({current:Ue});const st=()=>{ze(!1)},Lt=Xd(Z),at=Xd(ee.current);St.scroll&&(window.addEventListener("scroll",st),Lt==null||Lt.addEventListener("scroll",st),at==null||at.addEventListener("scroll",st));let lt=null;St.resize?window.addEventListener("resize",st):Z&&ee.current&&(lt=PE(Z,ee.current,_e,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const Tt=Re=>{Re.key==="Escape"&&ze(!1)};St.escape&&window.addEventListener("keydown",Tt),St.clickOutsideAnchor&&window.addEventListener("click",dn);const Oe=[],jn=Re=>{Ge&&(Re==null?void 0:Re.target)===Z||ln(Re)},ir=Re=>{Ge&&(Re==null?void 0:Re.target)===Z&&cn()},Qn=["mouseover","mouseout","mouseenter","mouseleave","focus","blur"],Vt=["click","dblclick","mousedown","mouseup"];Object.entries(Sn).forEach(([Re,Pt])=>{Pt&&(Qn.includes(Re)?Oe.push({event:Re,listener:wt}):Vt.includes(Re)&&Oe.push({event:Re,listener:jn}))}),Object.entries(Mt).forEach(([Re,Pt])=>{Pt&&(Qn.includes(Re)?Oe.push({event:Re,listener:le}):Vt.includes(Re)&&Oe.push({event:Re,listener:ir}))}),x&&Oe.push({event:"pointermove",listener:Ot});const or=()=>{ot.current=!0},ar=()=>{ot.current=!1,cn()};return _&&!Nn&&((Y=ee.current)===null||Y===void 0||Y.addEventListener("mouseenter",or),(ce=ee.current)===null||ce===void 0||ce.addEventListener("mouseleave",ar)),Oe.forEach(({event:Re,listener:Pt})=>{de.forEach(_s=>{var An;(An=_s.current)===null||An===void 0||An.addEventListener(Re,Pt)})}),()=>{var Re,Pt;St.scroll&&(window.removeEventListener("scroll",st),Lt==null||Lt.removeEventListener("scroll",st),at==null||at.removeEventListener("scroll",st)),St.resize?window.removeEventListener("resize",st):lt==null||lt(),St.clickOutsideAnchor&&window.removeEventListener("click",dn),St.escape&&window.removeEventListener("keydown",Tt),_&&!Nn&&((Re=ee.current)===null||Re===void 0||Re.removeEventListener("mouseenter",or),(Pt=ee.current)===null||Pt===void 0||Pt.removeEventListener("mouseleave",ar)),Oe.forEach(({event:_s,listener:An})=>{de.forEach(Bo=>{var Rn;(Rn=Bo.current)===null||Rn===void 0||Rn.removeEventListener(_s,An)})})}},[Z,_e,qe,nt,be,y,b,E,an,w,N]),C.useEffect(()=>{var Y,ce;let de=(ce=(Y=Me==null?void 0:Me.anchorSelect)!==null&&Y!==void 0?Y:a)!==null&&ce!==void 0?ce:"";!de&&e&&(de=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`);const Ue=new MutationObserver(st=>{const Lt=[],at=[];st.forEach(lt=>{if(lt.type==="attributes"&&lt.attributeName==="data-tooltip-id"&&(lt.target.getAttribute("data-tooltip-id")===e?Lt.push(lt.target):lt.oldValue===e&&at.push(lt.target)),lt.type==="childList"){if(Z){const Tt=[...lt.removedNodes].filter(Oe=>Oe.nodeType===1);if(de)try{at.push(...Tt.filter(Oe=>Oe.matches(de))),at.push(...Tt.flatMap(Oe=>[...Oe.querySelectorAll(de)]))}catch{}Tt.some(Oe=>{var jn;return!!(!((jn=Oe==null?void 0:Oe.contains)===null||jn===void 0)&&jn.call(Oe,Z))&&(Gt(!1),ze(!1),se(null),Ft(oe),Ft(ve),!0)})}if(de)try{const Tt=[...lt.addedNodes].filter(Oe=>Oe.nodeType===1);Lt.push(...Tt.filter(Oe=>Oe.matches(de))),Lt.push(...Tt.flatMap(Oe=>[...Oe.querySelectorAll(de)]))}catch{}}}),(Lt.length||at.length)&&De(lt=>[...lt.filter(Tt=>!at.includes(Tt)),...Lt])});return Ue.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"],attributeOldValue:!0}),()=>{Ue.disconnect()}},[e,a,Me==null?void 0:Me.anchorSelect,Z]),C.useEffect(()=>{_e()},[_e]),C.useEffect(()=>{if(!(B!=null&&B.current))return()=>null;const Y=new ResizeObserver(()=>{setTimeout(()=>_e())});return Y.observe(B.current),()=>{Y.disconnect()}},[F,B==null?void 0:B.current]),C.useEffect(()=>{var Y;const ce=document.querySelector(`[id='${o}']`),de=[...be,ce];Z&&de.includes(Z)||se((Y=be[0])!==null&&Y!==void 0?Y:ce)},[o,be,Z]),C.useEffect(()=>(W&&ze(!0),()=>{Ft(oe),Ft(ve)}),[]),C.useEffect(()=>{var Y;let ce=(Y=Me==null?void 0:Me.anchorSelect)!==null&&Y!==void 0?Y:a;if(!ce&&e&&(ce=`[data-tooltip-id='${e.replace(/'/g,"\\'")}']`),ce)try{const de=Array.from(document.querySelectorAll(ce));De(de)}catch{De([])}},[e,a,Me==null?void 0:Me.anchorSelect]),C.useEffect(()=>{oe.current&&(Ft(oe),Jn(w))},[w]);const Ze=(G=Me==null?void 0:Me.content)!==null&&G!==void 0?G:F,Wt=Ge&&Object.keys(Fe.tooltipStyles).length>0;return C.useImperativeHandle(n,()=>({open:Y=>{if(Y!=null&&Y.anchorSelect)try{document.querySelector(Y.anchorSelect)}catch{return void console.warn(`[react-tooltip] "${Y.anchorSelect}" is not a valid CSS selector`)}re(Y??null),Y!=null&&Y.delay?Jn(Y.delay):ze(!0)},close:Y=>{Y!=null&&Y.delay?In(Y.delay):ze(!1)},activeAnchor:Z,place:Fe.place,isOpen:!!(qe&&!I&&Ze&&Wt)})),qe&&!I&&Ze?Ct.createElement(v,{id:e,role:Q,className:il("react-tooltip",Ts.tooltip,_a.tooltip,_a[r],t,`react-tooltip__place-${Fe.place}`,Ts[Wt?"show":"closing"],Wt?"react-tooltip__show":"react-tooltip__closing",m==="fixed"&&Ts.fixed,_&&Ts.clickable),onTransitionEnd:Y=>{Ft(ke),Ge||Y.propertyName!=="opacity"||(Gt(!1),re(null),V==null||V())},style:{...A,...Fe.tooltipStyles,opacity:te!==void 0&&Wt?te:void 0},ref:ee},Ze,Ct.createElement(v,{className:il("react-tooltip-arrow",Ts.arrow,_a.arrow,s,R&&Ts.noArrow),style:{...Fe.tooltipArrowStyles,background:ie?`linear-gradient(to right bottom, transparent 50%, ${ie} 50%)`:void 0},ref:me})):null},WE=({content:n})=>Ct.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),Ut=Ct.forwardRef(({id:n,anchorId:e,anchorSelect:t,content:s,html:r,render:o,className:a,classNameArrow:c,variant:u="dark",place:d="top",offset:f=10,wrapper:m="div",children:g=null,events:v=["hover"],openOnClick:w=!1,positionStrategy:N="absolute",middlewares:x,delayShow:I=0,delayHide:R=0,float:_=!1,hidden:P=!1,noArrow:O=!1,clickable:D=!1,closeOnEsc:y=!1,closeOnScroll:b=!1,closeOnResize:E=!1,openEvents:j,closeEvents:A,globalCloseEvents:k,imperativeModeOnly:S=!1,style:V,position:L,isOpen:F,defaultIsOpen:B=!1,disableStyleInjection:$=!1,border:W,opacity:K,arrowColor:Z,setIsOpen:se,afterShow:z,afterHide:te,disableTooltip:ie,role:Q="tooltip"},G)=>{const[ee,me]=C.useState(s),[oe,ve]=C.useState(r),[ke,Fe]=C.useState(d),[bt,Ge]=C.useState(u),[ge,qe]=C.useState(f),[Gt,Me]=C.useState(I),[re,Le]=C.useState(R),[it,nt]=C.useState(_),[Ae,ot]=C.useState(P),[be,De]=C.useState(m),[Nt,an]=C.useState(v),[Nn,Sn]=C.useState(N),[Mt,St]=C.useState(null),[ze,Tn]=C.useState(null),Jn=C.useRef($),{anchorRefs:In,activeAnchor:ln}=Yp(n),cn=Be=>Be==null?void 0:Be.getAttributeNames().reduce((wt,le)=>{var _e;return le.startsWith("data-tooltip-")&&(wt[le.replace(/^data-tooltip-/,"")]=(_e=Be==null?void 0:Be.getAttribute(le))!==null&&_e!==void 0?_e:null),wt},{}),un=Be=>{const wt={place:le=>{var _e;Fe((_e=le)!==null&&_e!==void 0?_e:d)},content:le=>{me(le??s)},html:le=>{ve(le??r)},variant:le=>{var _e;Ge((_e=le)!==null&&_e!==void 0?_e:u)},offset:le=>{qe(le===null?f:Number(le))},wrapper:le=>{var _e;De((_e=le)!==null&&_e!==void 0?_e:m)},events:le=>{const _e=le==null?void 0:le.split(" ");an(_e??v)},"position-strategy":le=>{var _e;Sn((_e=le)!==null&&_e!==void 0?_e:N)},"delay-show":le=>{Me(le===null?I:Number(le))},"delay-hide":le=>{Le(le===null?R:Number(le))},float:le=>{nt(le===null?_:le==="true")},hidden:le=>{ot(le===null?P:le==="true")},"class-name":le=>{St(le)}};Object.values(wt).forEach(le=>le(null)),Object.entries(Be).forEach(([le,_e])=>{var Ze;(Ze=wt[le])===null||Ze===void 0||Ze.call(wt,_e)})};C.useEffect(()=>{me(s)},[s]),C.useEffect(()=>{ve(r)},[r]),C.useEffect(()=>{Fe(d)},[d]),C.useEffect(()=>{Ge(u)},[u]),C.useEffect(()=>{qe(f)},[f]),C.useEffect(()=>{Me(I)},[I]),C.useEffect(()=>{Le(R)},[R]),C.useEffect(()=>{nt(_)},[_]),C.useEffect(()=>{ot(P)},[P]),C.useEffect(()=>{Sn(N)},[N]),C.useEffect(()=>{Jn.current!==$&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")},[$]),C.useEffect(()=>{typeof window<"u"&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:$==="core",disableBase:$}}))},[]),C.useEffect(()=>{var Be;const wt=new Set(In);let le=t;if(!le&&n&&(le=`[data-tooltip-id='${n.replace(/'/g,"\\'")}']`),le)try{document.querySelectorAll(le).forEach(ce=>{wt.add({current:ce})})}catch{console.warn(`[react-tooltip] "${le}" is not a valid CSS selector`)}const _e=document.querySelector(`[id='${e}']`);if(_e&&wt.add({current:_e}),!wt.size)return()=>null;const Ze=(Be=ze??_e)!==null&&Be!==void 0?Be:ln.current,Wt=new MutationObserver(ce=>{ce.forEach(de=>{var Ue;if(!Ze||de.type!=="attributes"||!(!((Ue=de.attributeName)===null||Ue===void 0)&&Ue.startsWith("data-tooltip-")))return;const st=cn(Ze);un(st)})}),Y={attributes:!0,childList:!1,subtree:!1};if(Ze){const ce=cn(Ze);un(ce),Wt.observe(Ze,Y)}return()=>{Wt.disconnect()}},[In,ln,ze,e,t]),C.useEffect(()=>{V!=null&&V.border&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),W&&!Yd("border",`${W}`)&&console.warn(`[react-tooltip] "${W}" is not a valid \`border\`.`),V!=null&&V.opacity&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),K&&!Yd("opacity",`${K}`)&&console.warn(`[react-tooltip] "${K}" is not a valid \`opacity\`.`)},[]);let Ot=g;const dn=C.useRef(null);if(o){const Be=o({content:(ze==null?void 0:ze.getAttribute("data-tooltip-content"))||ee||null,activeAnchor:ze});Ot=Be?Ct.createElement("div",{ref:dn,className:"react-tooltip-content-wrapper"},Be):null}else ee&&(Ot=ee);oe&&(Ot=Ct.createElement(WE,{content:oe}));const Cn={forwardRef:G,id:n,anchorId:e,anchorSelect:t,className:il(a,Mt),classNameArrow:c,content:Ot,contentWrapperRef:dn,place:ke,variant:bt,offset:ge,wrapper:be,events:Nt,openOnClick:w,positionStrategy:Nn,middlewares:x,delayShow:Gt,delayHide:re,float:it,hidden:Ae,noArrow:O,clickable:D,closeOnEsc:y,closeOnScroll:b,closeOnResize:E,openEvents:j,closeEvents:A,globalCloseEvents:k,imperativeModeOnly:S,style:V,position:L,isOpen:F,defaultIsOpen:B,border:W,opacity:K,arrowColor:Z,setIsOpen:se,afterShow:z,afterHide:te,disableTooltip:ie,activeAnchor:ze,setActiveAnchor:Be=>Tn(Be),role:Q};return Ct.createElement(GE,{...Cn})});typeof window<"u"&&window.addEventListener("react-tooltip-inject-styles",n=>{n.detail.disableCore||Wd({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),n.detail.disableBase||Wd({css:`
.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}`,type:"base"})});function KE(n){return we({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4.5 1L4 1.5V3.02746C4.16417 3.00932 4.331 3 4.5 3C4.669 3 4.83583 3.00932 5 3.02746V2H14V7H12.2929L11 8.29289V7H8.97254C8.99068 7.16417 9 7.331 9 7.5C9 7.669 8.99068 7.83583 8.97254 8H10V9.5L10.8536 9.85355L12.7071 8H14.5L15 7.5V1.5L14.5 1H4.5Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6.41705 10.4288C7.37039 9.80348 8 8.72527 8 7.5C8 5.567 6.433 4 4.5 4C2.567 4 1 5.567 1 7.5C1 8.72527 1.62961 9.80348 2.58295 10.4288C2.11364 10.6498 1.68557 10.9505 1.31802 11.318C0.900156 11.7359 0.568688 12.232 0.342542 12.7779C0.180451 13.1692 0.0747425 13.5807 0.0278638 14C0.00933826 14.1657 0 14.3326 0 14.5V15H1L0.999398 14.5C0.999398 14.4784 0.999599 14.4567 1 14.4351C1.00811 13.9975 1.09823 13.5651 1.26587 13.1604C1.44179 12.7357 1.69964 12.3498 2.0247 12.0247C2.34976 11.6996 2.73566 11.4418 3.16038 11.2659C3.57088 11.0958 4.00986 11.0056 4.45387 10.9997C4.46922 10.9999 4.4846 11 4.5 11C4.5154 11 4.53078 10.9999 4.54613 10.9997C4.99014 11.0056 5.42912 11.0958 5.83962 11.2659C6.26433 11.4418 6.65024 11.6996 6.9753 12.0247C7.30036 12.3498 7.55821 12.7357 7.73413 13.1604C7.90177 13.5651 7.99189 13.9975 8 14.4351C8.0004 14.4567 8.0006 14.4784 8.0006 14.5L8 15H9V14.5C9 14.3326 8.99066 14.1657 8.97214 14C8.92526 13.5807 8.81955 13.1692 8.65746 12.7779C8.43131 12.232 8.09984 11.7359 7.68198 11.318C7.31443 10.9505 6.88636 10.6498 6.41705 10.4288ZM4.5 10C3.11929 10 2 8.88071 2 7.5C2 6.11929 3.11929 5 4.5 5C5.88071 5 7 6.11929 7 7.5C7 8.88071 5.88071 10 4.5 10Z"},child:[]}]})(n)}const rn=({isSidebarOpen:n})=>{const e=Ys(),t=C.useRef();C.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[e.pathname]);const s=c=>e.pathname===c,r=n?"bg-[#D9D9D9] text-black rounded-xl pl-4 py-2 flex items-center gap-4 cursor-pointer w-full":"bg-[#D9D9D9] text-black rounded-xl w-[50px] h-[50px] flex items-center justify-center cursor-pointer mx-auto",o=n?"flex items-center gap-4 pl-4 py-2 cursor-pointer hover:bg-white/10 rounded-lg transition-colors w-full":"w-[50px] h-[50px] flex items-center justify-center cursor-pointer hover:bg-white/10 rounded-full transition-colors mx-auto",a=[{title:"DASHBOARD",items:[{path:"/registrarHome",icon:i.jsx(tE,{}),label:"HOME"},{path:"/events",icon:i.jsx(Gm,{}),label:"EVENTS"},{path:"/students",icon:i.jsx(Zm,{}),label:"STUDENTS/ALUMNI"},{path:"/appointments",icon:i.jsx(Qm,{}),label:"APPOINTMENTS"},{path:"/feedback",icon:i.jsx(KE,{}),label:"FEEDBACK"}]},{title:"MAINTENANCE",items:[{path:"/schedule",icon:i.jsx(eg,{}),label:"SCHEDULE"},{path:"/holidays",icon:i.jsx(Wm,{}),label:"HOLIDAYS"},{path:"/archived",icon:i.jsx($m,{}),label:"ARCHIVED"}]}];return i.jsxs("aside",{ref:t,className:`h-full bg-side-bar_bg text-white ${n?"w-[300px]":"w-[100px]"} overflow-hidden transition-all duration-300`,children:[i.jsxs("div",{className:`flex ${n?"items-center justify-start pl-4":"items-center justify-center"} mt-6`,children:[i.jsx("img",{src:"/assets/image/LV_logo.png",alt:"LVCC Logo",className:`${n?"w-[100px] h-[100px]":"w-[60px] h-[60px]"} transition-all duration-300`}),n&&i.jsxs("div",{className:"ml-4",children:[i.jsx("h1",{className:"text-2xl font-regular",children:"LVCC"}),i.jsx("p",{className:"text-xl",children:"REGISTRAR"})]})]}),i.jsx("div",{className:`border-b-2 border-white w-full ${n?"my-6":"my-4 w-[60%] mx-auto mb-10"}`}),i.jsx("nav",{className:n?"px-4":"",children:a.map((c,u)=>i.jsxs("div",{className:`${u===0?n?"mt-6":"mt-4":"mt-10"}`,children:[n&&i.jsx("div",{className:"pl-4 pb-4",children:i.jsx("h1",{className:"text-[20px] font-semibold",children:c.title})}),i.jsx("ul",{className:"space-y-2",children:c.items.map(({path:d,icon:f,label:m})=>i.jsxs("li",{className:"flex justify-center",children:[i.jsxs(dt,{to:d,className:s(d)?r:o,"data-tooltip-id":`tooltip-${d}`,"data-tooltip-content":m,"data-tooltip-place":"right",onClick:g=>g.stopPropagation(),children:[i.jsx("div",{className:`${n?"text-[20px] w-6 flex justify-center":"text-[25px]"}`,children:f}),n&&i.jsx("span",{className:"ml-4 text-lg",children:m})]}),!n&&i.jsx(Ut,{id:`tooltip-${d}`,className:"custom-tooltip",style:{backgroundColor:"#2D3748",color:"white",borderRadius:"6px",padding:"8px 12px",fontSize:"14px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:9999,textShadow:"0 1px 1px rgba(0,0,0,0.3)"},border:"1px solid rgba(255,255,255,0.1)",opacity:1,noArrow:!1,delayShow:50,place:"right"})]},d))})]},u))})]})};rn.propTypes={isSidebarOpen:je.bool.isRequired,setIsSidebarOpen:je.func};function YE(n){return we({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:"currentColor"},child:[]}]})(n)}function JE(n){return we({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(n)}const Mo="https://appointment-system-backend-n8dk.onrender.com/api/users",QE=async(n,e,t)=>{var s;try{const r=new FormData;return r.append("profilePicture",e),(await ae.post(`${Mo}/${n}/profile-picture`,r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}})).data}catch(r){throw((s=r.response)==null?void 0:s.data)||{message:"Failed to upload profile picture"}}},XE=async(n,e)=>{var t;try{return(await ae.get(`${Mo}/${n}`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to fetch user profile"}}},ZE=async(n,e,t)=>{var s;try{return(await ae.put(`${Mo}/${n}`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(r){throw((s=r.response)==null?void 0:s.data)||{message:"Failed to update user profile"}}},e2=async(n,e)=>{var t;try{return(await ae.delete(`${Mo}/${n}/profile-picture`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Failed to delete profile picture"}}},sc="https://appointment-system-backend-n8dk.onrender.com/api/notifications",t2=async()=>{try{return(await ae.get(sc)).data.map(e=>({...e,id:e._id,time:r2(e.createdAt)}))}catch(n){throw console.error("Error fetching notifications:",n),n}},n2=async n=>{try{return(await ae.put(`${sc}/mark-read/${n}`)).data}catch(e){throw console.error("Error marking notification as read:",e),e}},s2=async()=>{try{return(await ae.put(`${sc}/mark-all-read`)).data}catch(n){throw console.error("Error marking all notifications as read:",n),n}},r2=n=>{const e=new Date(n),s=Math.floor((new Date-e)/1e3),r=Math.floor(s/60),o=Math.floor(r/60),a=Math.floor(o/24);return a>0?a===1?"1 day ago":`${a} days ago`:o>0?o===1?"1 hour ago":`${o} hours ago`:r>0?r===1?"1 minute ago":`${r} minutes ago`:s<=5?"just now":`${s} seconds ago`},i2=(n="")=>{const[e,t]=C.useState(!1),[s,r]=C.useState(!1),[o,a]=C.useState([]),[c,u]=C.useState(!1),[d]=C.useState(null),[f,m]=C.useState("unread"),[g,v]=C.useState(n),w=vs(),{user:N,updateUser:x,logout:I}=Lr(),R=C.useRef(null),_=C.useRef(null),P=C.useRef(null),O=C.useRef(null);C.useEffect(()=>{(async()=>{if(N!=null&&N.id)try{const F=localStorage.getItem("token");if(!F)return;const B=await XE(N.id,F);B&&x({...N,picture:B.picture||B.profilePicture,profilePicture:B.profilePicture||B.picture})}catch(F){console.error("Error fetching user profile:",F)}})()},[N==null?void 0:N.id]);const D=async()=>{u(!0);try{const L=await t2();a(L)}catch(L){console.error("Error fetching notifications:",L)}finally{u(!1)}};C.useEffect(()=>{D();const L=setInterval(D,15e3);return()=>clearInterval(L)},[]),C.useEffect(()=>{const L=F=>{R.current&&!R.current.contains(F.target)&&P.current&&!P.current.contains(F.target)&&t(!1),_.current&&!_.current.contains(F.target)&&O.current&&!O.current.contains(F.target)&&r(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const y=o.filter(L=>f==="unread"?!L.read:f==="all"?!0:f==="archive"?L.read:!0),b=o.filter(L=>!L.read).length;return{isProfileDropdownOpen:e,isNotificationOpen:s,isLoadingNotifications:c,notificationError:d,activeTab:f,title:g,setTitle:v,filteredNotifications:y,unreadCount:b,profileDropdownRef:R,notificationDropdownRef:_,profileToggleRef:P,notificationToggleRef:O,toggleProfileDropdown:()=>{t(L=>!L),r(!1)},toggleNotificationDropdown:()=>{r(L=>!L),t(!1)},handleSignOut:()=>{t(!1),I(),w("/signin")},handleProfile:()=>{t(!1),w("/profile")},markAllAsRead:async()=>{try{await s2(),a(L=>L.map(F=>({...F,read:!0})))}catch(L){console.error("Error marking all notifications as read:",L)}},markAsRead:async L=>{try{await n2(L),a(F=>F.map(B=>B.id===L?{...B,read:!0}:B))}catch(F){console.error("Error marking notification as read:",F)}},setActiveTab:m,refreshNotifications:D}},on=({toggleSidebar:n,title:e})=>{const{isProfileDropdownOpen:t,isNotificationOpen:s,isLoadingNotifications:r,notificationError:o,activeTab:a,title:c,filteredNotifications:u,unreadCount:d,profileDropdownRef:f,notificationDropdownRef:m,profileToggleRef:g,notificationToggleRef:v,toggleProfileDropdown:w,toggleNotificationDropdown:N,handleSignOut:x,handleProfile:I,markAllAsRead:R,setActiveTab:_,markAsRead:P,refreshNotifications:O}=i2(e),{user:D}=Lr();return i.jsxs("header",{className:"z-10 flex justify-between items-center bg-Bbackground h-[87px] px-5 shadow-md",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:n,className:"p-2 text-black rounded text-2xl font-bold hover:bg-gray-200 transition-colors","aria-label":"Toggle Sidebar",children:i.jsx(YE,{})}),i.jsx("h1",{className:"text-xl font-bold ml-4 hidden sm:block",children:c})]}),i.jsxs("div",{className:"relative flex items-center gap-3",children:[i.jsxs("div",{className:"relative ",ref:v,children:[i.jsxs("button",{onClick:N,className:"relative p-1 rounded-full hover:bg-gray-200 transition-colors","aria-label":`Notifications (${d} unread)`,disabled:r,children:[i.jsx("img",{src:"/assets/icons/notification.svg",alt:"Notification Icon",className:"w-8 h-8"}),d>0&&i.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 transform translate-x-1/2 -translate-y-1/2 rounded-full bg-red-500 text-white text-[10px] flex items-center justify-center ring-2 ring-white",children:d})]}),s&&i.jsxs("div",{ref:m,className:"absolute right-0 top-full mt-2 bg-white border border-gray-200 shadow-lg rounded-lg w-[500px] z-20 max-h-[32rem] overflow-y-auto",children:[i.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 pb-3 relative inline-block text-2xl",children:["Notifications",i.jsx("span",{className:"absolute bottom-1 left-0 w-full h-1 bg-[#F3BC62]"})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:y=>{y.stopPropagation(),O()},className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:"Refresh notifications",disabled:r,children:r?i.jsx(Gc,{className:"h-5 w-5 animate-spin"}):i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]}),i.jsxs("div",{className:"flex border-b bg-[#D9D9D9] align-middle rounded-lg p-1 mb-5",children:[i.jsx("button",{className:`flex-1 py-2 mx-1 text-base font-medium transition-all ${a==="unread"?"text-[#161F55] bg-white rounded-lg shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>_("unread"),children:"Unread"}),i.jsx("button",{className:`flex-1 py-2 mx-1 text-base font-medium transition-all ${a==="all"?"text-[#161F55] bg-white rounded-lg shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>_("all"),children:"All"}),i.jsx("button",{className:`flex-1 py-2 mx-1 text-base font-medium transition-all ${a==="archive"?"text-[#161F55] bg-white rounded-lg shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>_("archive"),children:"Archive"})]}),i.jsx("div",{className:"divide-y",children:r?i.jsxs("div",{className:"flex justify-center items-center p-8 text-gray-500",children:[i.jsx(Gc,{className:"animate-spin mr-3 text-xl"})," ","Loading..."]}):o?i.jsx("div",{className:"px-6 py-5 text-red-600 text-base text-center",children:o}):u.length>0?u.map(y=>i.jsxs("div",{className:`px-6 py-6 cursor-pointer hover:bg-gray-50 mb-3 ${y.read?"bg-white":"bg-gray-100"}
        shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1),0_2px_4px_-1px_rgba(0,0,0,0.06)] hover:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.1),0_4px_6px_-2px_rgba(0,0,0,0.05)] 
        transition-shadow relative rounded-lg`,onClick:()=>P(y.id),children:[i.jsx("div",{className:"absolute left-1 top-4 bottom-4 w-1 bg-blue-500 rounded-r"}),i.jsxs("div",{className:"flex items-start gap-4",children:[y.type==="user-action"&&i.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-[#34A853] flex items-center justify-center ml-2",children:i.jsx("span",{className:"text-white font-medium text-lg",children:y.initials})}),i.jsx("div",{className:`flex-1 min-w-0 ${y.type!=="user-action"?"pl-4":""}`,children:i.jsxs("div",{className:"flex justify-between items-start gap-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:`text-base ${y.read?"text-gray-600":"text-gray-900"}`,children:y.type==="user-action"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"font-bold",children:y.userName})," ",y.action," ",y.reference&&i.jsxs("span",{className:"font-mono text-blue-600",children:["#",y.reference]})," ",y.status&&i.jsx("span",{className:`${y.status.toLowerCase()==="completed"?"text-blue-600":y.status.toLowerCase()==="approved"?"text-green-600":y.status.toLowerCase()==="rejected"?"text-red-600":""} uppercase`,children:y.status})]}):i.jsxs(i.Fragment,{children:[y.event," ",y.action]})}),y.details&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:y.details})]}),y.time&&i.jsx("p",{className:`text-sm ${y.read?"text-gray-500":"text-gray-700"} whitespace-nowrap`,children:y.time})]})}),!y.read&&i.jsx("div",{className:"ml-2 flex-shrink-0 mt-1",children:i.jsx("span",{className:"h-3 w-3 rounded-full bg-blue-600 block"})})]})]},y.id)):i.jsx("div",{className:"px-6 py-5 text-base text-gray-500 text-center",children:"No notifications available"})}),i.jsx("div",{className:"px-6 py-3 border-t text-right",children:i.jsx("button",{onClick:R,className:"text-base text-blue-600 hover:underline font-medium",children:"Mark all as read"})})]})]}),i.jsx("div",{className:"border-r-2 border-gray-300 h-8"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{ref:g,className:"flex items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-200",onClick:w,children:[D&&(D.picture||D.profilePicture)?i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:i.jsx("img",{src:D.picture||D.profilePicture,alt:`${D.name}'s profile`,className:"w-full h-full object-cover",onError:y=>{y.target.onerror=null,y.target.src="/assets/icons/default-profile.svg",console.log("Failed to load profile picture:",D.picture||D.profilePicture)}})}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:i.jsx(JE,{className:"text-3xl text-gray-600"})}),i.jsx("span",{className:"text-base hidden sm:inline text-gray-700",children:(D==null?void 0:D.name)||"Guest"}),i.jsx(Z_,{className:"text-2xl text-gray-600"})]}),t&&i.jsxs("div",{ref:f,className:"absolute right-0 top-full mt-2 bg-white border border-gray-200 shadow-lg rounded-lg py-2 w-48 z-20",children:[i.jsxs("button",{className:"flex items-center px-4 py-2 text-left text-gray-700 hover:bg-gray-100 w-full text-sm",onClick:I,children:[i.jsx(Xm,{className:"mr-2 w-5 h-5 text-gray-500"}),"Edit Profile"]}),i.jsxs("button",{className:"flex items-center px-4 py-2 text-left text-gray-700 hover:bg-gray-100 w-full text-sm",onClick:x,children:[i.jsx(Ym,{className:"mr-2 w-5 h-5 text-gray-500"}),"Sign Out"]})]})]})]})]})};on.propTypes={toggleSidebar:je.func.isRequired,title:je.string};const En=()=>i.jsx("footer",{className:"bg-Bbackground h-[70px] flex items-center justify-end pr-9 w-full",children:i.jsx("p",{className:"font-regular",children:"LA VERDAD CHRISTIAN COLLEGE, INC."})}),o2=n=>{const[e,t]=C.useState([]),[s,r]=C.useState(!0),[o,a]=C.useState(null),[c,u]=C.useState(""),[d,f]=C.useState(10),[m,g]=C.useState(1),[v,w]=C.useState(()=>{const A=localStorage.getItem("sidebarOpen");return A!==null?JSON.parse(A):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(v))},[v]);const N=C.useCallback(()=>{w(A=>!A)},[]),x=e.filter(A=>{var S,V,L,F,B,$,W;const k=c.toLowerCase();return((S=A.transactionNumber)==null?void 0:S.toLowerCase().includes(k))||((V=A.name)==null?void 0:V.toLowerCase().includes(k))||((L=A.lastSY)==null?void 0:L.toLowerCase().includes(k))||((F=A.program)==null?void 0:F.toLowerCase().includes(k))||((B=A.contact)==null?void 0:B.toLowerCase().includes(k))||(($=A.email)==null?void 0:$.toLowerCase().includes(k))||((W=A.request)==null?void 0:W.toLowerCase().includes(k))}),I=x.length,R=Math.ceil(I/d),_=I>0?(m-1)*d+1:0,P=Math.min(m*d,I),O=[];if(R>0)for(let A=1;A<=R;A++)O.push(A);const D=A=>{u(A.target.value),g(1)},y=A=>{const k=parseInt(A.target.value);!isNaN(k)&&k>0&&(f(k),g(1))},b=()=>{m<R&&g(m+1)},E=()=>{m>1&&g(m-1)},j=A=>{g(A)};return C.useEffect(()=>{const A=async()=>{r(!0),a(null),t([]);try{const S=await fetch(n);if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const V=await S.json(),L=JSON.parse(localStorage.getItem("archivedAppointments")||"[]"),F=new Set(L.map($=>$.transactionNumber)),B=V.filter($=>!F.has($.transactionNumber));t(B)}catch(S){console.error("Failed to fetch student data:",S),a(S.message||"An error occurred while fetching data."),t([])}finally{r(!1)}};A();const k=setInterval(A,3e4);return()=>clearInterval(k)},[n]),{appointments:e,loading:s,error:o,currentPage:m,entriesPerPage:d,totalFilteredEntries:I,calculatedTotalPages:R,startEntry:_,endEntry:P,pageNumbers:O,filteredAppointments:x,handleSearchChange:D,handleEntriesPerPageChange:y,handleNextPage:b,handlePreviousPage:E,handlePageChange:j,searchTerm:c,isSidebarOpen:v,toggleSidebar:N}},a2=()=>{const n="/api/document-requests/docs-with-details",{loading:e,error:t,currentPage:s,entriesPerPage:r,totalFilteredEntries:o,calculatedTotalPages:a,startEntry:c,endEntry:u,pageNumbers:d,filteredAppointments:f,handleSearchChange:m,handleEntriesPerPageChange:g,handleNextPage:v,handlePreviousPage:w,handlePageChange:N,searchTerm:x,isSidebarOpen:I,toggleSidebar:R}=o2(n);return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`${I?"w-[300px]":"w-[100px]"}`,children:i.jsx(rn,{isSidebarOpen:I})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("main",{className:"h-auto",children:[i.jsx(on,{toggleSidebar:R,isSidebarOpen:I,title:"Students/Alumni's Records Request"}),i.jsxs("section",{className:"min-h-[calc(100vh-160px)] z-10 bg-white p-5 my-5",children:[i.jsxs("div",{className:"bg-[#D9D9D9] h-52 m-4 pt-2 rounded-md",children:[i.jsx("div",{className:"text-[#161F55] px-3 pt-2 ml-3",children:i.jsxs("h2",{className:"text-3xl font-bold tracking-[5px] pt-1",children:["LIST OF STUDENTS/ALUMNI'S RECORDS REQUEST",i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[900px] my-3"})]})}),i.jsxs("div",{className:"flex justify-between items-center mt-16 ml-4 mr-5",children:[i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px] flex items-center",children:[i.jsx("label",{htmlFor:"show-entries",className:"mr-2",children:"SHOW"}),i.jsxs("select",{id:"show-entries",name:"show-entries",value:r,onChange:g,className:"text-center w-20 p-2 border border-gray-400 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-[#161F55]",children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"15",children:"15"}),i.jsx("option",{value:"20",children:"20"}),i.jsx("option",{value:"25",children:"25"})]}),i.jsx("span",{className:"ml-2",children:"ENTRIES"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{id:"search",type:"search",value:x,onChange:m,className:"border-[#989898] py-2 bg-white text-[#161F55] pl-10 pr-3 rounded-md focus:outline-none focus:ring-2 focus:ring-[#161F55]",placeholder:"Search"})]})]})]}),i.jsxs("table",{className:"text-[15px] w-[97%] border-collapse text-[#161F55] mt-8 mx-auto",style:{tableLayout:"fixed"},children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-center",children:[i.jsx("th",{className:"border p-5",children:"TRANSACTION NO."}),i.jsx("th",{className:"border p-5",children:"NAME"}),i.jsx("th",{className:"border p-5",children:"LAST S.Y. ATTENDED"}),i.jsxs("th",{className:"border p-5",children:["PROGRAM/GRADE/",i.jsx("br",{}),"STRAND"]}),i.jsx("th",{className:"border p-5",children:"CONTACT NO."}),i.jsx("th",{className:"border p-5",children:"EMAIL ADDRESS"}),i.jsx("th",{className:"border p-5",children:"ATTACHMENT PROOF"}),i.jsx("th",{className:"border p-5",children:"REQUEST"}),i.jsx("th",{className:"border p-5",children:"DATE OF REQUEST"})]})}),i.jsxs("tbody",{children:[e&&i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"text-center p-5",children:"Loading student records..."})}),t&&i.jsx("tr",{children:i.jsxs("td",{colSpan:"9",className:"text-center p-5 text-red-500",children:["Error: ",t]})}),!e&&!t&&f.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"text-center p-5",children:x?"No matching records found.":"No student records found."})}),!e&&!t&&f.slice((s-1)*r,s*r).map((_,P)=>i.jsxs("tr",{className:`${P%2===0?"bg-gray-100":""} text-center`,children:[i.jsx("td",{className:"border p-5 text-[#354CCE] font-bold",children:_.transactionNumber}),i.jsx("td",{className:"border p-5",children:_.name}),i.jsx("td",{className:"border p-5",children:_.lastSY}),i.jsx("td",{className:"border p-5",children:_.program}),i.jsx("td",{className:"border p-5",children:_.contact}),i.jsx("td",{className:"border p-5",children:_.email}),i.jsx("td",{className:"border p-5",children:_.attachment&&_.attachment!=="No attachments"?i.jsx("div",{className:"flex flex-col gap-1",children:_.attachment.split(", ").map((O,D)=>i.jsx("span",{className:"text-blue-600 hover:underline cursor-pointer text-sm",title:O,children:O.length>30?`${O.substring(0,30)}...`:O},D))}):i.jsx("span",{className:"text-gray-500 text-sm",children:"No attachments"})}),i.jsx("td",{className:"border p-5",children:_.request}),i.jsx("td",{className:"border p-5",children:new Date(_.date).toLocaleDateString()})]},_.transactionNumber||P))]})]}),a>0&&i.jsxs("div",{className:"flex justify-between items-center mt-10 text-[18px] px-4 mx-auto w-[97%]",children:[i.jsxs("span",{className:"text-[#161F55]",children:["SHOWING ",c," TO ",u," OF ",o," ENTRIES"]}),a>1&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:w,disabled:s===1,className:"border px-3 py-1 text-[#161F55] rounded-l-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),d.map(_=>i.jsx("button",{onClick:()=>N(_),className:`border-t border-b px-3 py-1 ${s===_?"bg-[#161F55] text-white":"text-[#161F55] hover:bg-gray-100"}`,children:_},_)),i.jsx("button",{onClick:v,disabled:s===a,className:"border px-3 py-1 text-[#161F55] rounded-r-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),i.jsx(En,{})]})})]})};function Jp(n){return we({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(n)}function Ii(n){return we({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm127.978 274.82-.034.006c-.023.007-.042.018-.083.059L512 466.745l-127.86-127.86c-.042-.041-.06-.052-.084-.059a.118.118 0 0 0-.07 0c-.022.007-.041.018-.082.059l-45.02 45.019c-.04.04-.05.06-.058.083a.118.118 0 0 0 0 .07l.01.022a.268.268 0 0 0 .049.06L466.745 512l-127.86 127.862c-.041.04-.052.06-.059.083a.118.118 0 0 0 0 .07c.007.022.018.041.059.082l45.019 45.02c.04.04.06.05.083.058a.118.118 0 0 0 .07 0c.022-.007.041-.018.082-.059L512 557.254l127.862 127.861c.04.041.06.052.083.059a.118.118 0 0 0 .07 0c.022-.007.041-.018.082-.059l45.02-45.019c.04-.04.05-.06.058-.083a.118.118 0 0 0 0-.07l-.01-.022a.268.268 0 0 0-.049-.06L557.254 512l127.861-127.86c.041-.042.052-.06.059-.084a.118.118 0 0 0 0-.07c-.007-.022-.018-.041-.059-.082l-45.019-45.02c-.04-.04-.06-.05-.083-.058a.118.118 0 0 0-.07 0Z"},child:[]}]})(n)}function al(n){return we({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 0 0 0-51.5zm-63.57-320.64L836 122.88a8 8 0 0 0-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 0 0 0 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 0 0 0 11.31L155.17 889a8 8 0 0 0 11.31 0l712.15-712.12a8 8 0 0 0 0-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 0 0-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 0 1 146.2-106.69L401.31 546.2A112 112 0 0 1 396 512z"},child:[]},{tag:"path",attr:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 0 0 227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 0 1-112 112z"},child:[]}]})(n)}function ll(n){return we({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"},child:[]}]})(n)}const On="https://appointment-system-backend-n8dk.onrender.com/api",uo={signup:async n=>{var e;try{return(await ae.post(`${On}/signup`,n)).data}catch(t){throw console.error("Signup error:",t.response||t),((e=t.response)==null?void 0:e.data)||{message:"An error occurred during signup"}}},signin:async n=>{var e;try{return(await ae.post(`${On}/signin`,n)).data}catch(t){throw console.error("Signin error:",t.response||t),((e=t.response)==null?void 0:e.data)||{message:"Invalid email or password"}}},verifyOtp:async(n,e)=>{var t;try{return(await ae.post(`${On}/verify-otp`,{email:n,otp:e})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Invalid OTP"}}},getAllUsers:async n=>{var e;try{return(await ae.get(`${On}/signup`,{headers:{Authorization:`Bearer ${n}`}})).data}catch(t){throw((e=t.response)==null?void 0:e.data)||{message:"Error fetching users"}}},getUserById:async(n,e)=>{var t;try{return(await ae.get(`${On}/signup/${n}`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Error fetching user"}}},updateUser:async(n,e,t)=>{var s,r,o,a,c,u,d;try{if(console.log("Updating user with ID:",n),console.log("Update data:",e),console.log("Token present:",!!t),console.log("API URL being called:",`${On}/signup/${n}`),!n)throw new Error("User ID is required for update");if(!t)throw new Error("Authentication token is required");try{const f=await ae.put(`${On}/signup/${n}`,e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return console.log("Update response:",f.data),f.data}catch(f){throw console.error("Axios error details:",{message:f.message,status:(s=f.response)==null?void 0:s.status,statusText:(r=f.response)==null?void 0:r.statusText,data:(o=f.response)==null?void 0:o.data,config:{url:(a=f.config)==null?void 0:a.url,method:(c=f.config)==null?void 0:c.method,headers:(u=f.config)==null?void 0:u.headers}}),f.code==="ECONNREFUSED"?new Error("Cannot connect to the server. Please make sure the backend server is running."):f.response?f.response.status===401?new Error("Your session has expired. Please sign in again."):f.response.status===403?new Error("You do not have permission to update this profile."):f.response.status===404?new Error("User profile not found. Please sign in again."):f.response.status===500?new Error("Server error. Please try again later."):((d=f.response)==null?void 0:d.data)||{message:"Error updating user profile"}:new Error("Network error. Please check your internet connection.")}}catch(f){throw console.error("Update user error:",f),f}},deleteUser:async(n,e)=>{var t;try{return(await ae.delete(`${On}/signup/${n}`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw((t=s.response)==null?void 0:t.data)||{message:"Error deleting user"}}}},l2=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[r,o]=C.useState(!1),[a,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(!1),[g,v]=C.useState(!1),{updateUser:w}=Lr(),N=vs();return C.useEffect(()=>{const D=localStorage.getItem("savedEmail");D&&(e(D),o(!0))},[]),{email:n,password:t,remember:r,error:a,showPassword:u,isLoading:f,isGoogleLoading:g,handleEmail:D=>e(D.target.value),handlePassword:D=>s(D.target.value),handleRemember:D=>o(D.target.checked),handleSignIn:async D=>{var y,b;if(D.preventDefault(),c(null),m(!0),!n.trim()||!t.trim()){c("Please enter both email and password."),m(!1);return}try{console.log("Attempting to sign in with:",{email:n,password:t});const E=await uo.signin({email:n,password:t});console.log("Sign in response:",E),r?localStorage.setItem("savedEmail",n):localStorage.removeItem("savedEmail"),E.token&&(localStorage.setItem("token",E.token),ae.defaults.headers.common.Authorization=`Bearer ${E.token}`);const j=E.user||E;console.log("User response:",j);const A={email:j.email||n.trim(),name:j.name||E.name,id:j.id||j._id||E.id,picture:j.picture||j.profilePicture||E.picture||E.profilePicture||null,profilePicture:j.profilePicture||j.picture||E.profilePicture||E.picture||null,role:j.role};w(A),localStorage.setItem("user",JSON.stringify(A)),m(!1),console.log("Navigating to registrarHome"),N("/registrarHome")}catch(E){console.error("Sign in error:",E),c(((b=(y=E.response)==null?void 0:y.data)==null?void 0:b.message)||E.message||"Invalid email or password"),m(!1)}},handleGmail:async D=>{var y,b,E,j,A,k,S,V;D.preventDefault(),c(null),v(!0);try{const F=(await Yh(Zf,ep)).user,B=await uo.signin({email:F.email,googleAuth:!0,name:F.displayName,googleId:F.uid,picture:F.photoURL});B.token&&localStorage.setItem("token",B.token);const $={email:F.email,name:((y=B.user)==null?void 0:y.name)||F.displayName,id:((b=B.user)==null?void 0:b.id)||((E=B.user)==null?void 0:E._id)||B.id,picture:((j=B.user)==null?void 0:j.picture)||((A=B.user)==null?void 0:A.profilePicture)||F.photoURL||null,profilePicture:((k=B.user)==null?void 0:k.profilePicture)||((S=B.user)==null?void 0:S.picture)||F.photoURL||null,role:(V=B.user)==null?void 0:V.role};w($),v(!1),N("/registrarHome")}catch(L){console.error("Google signin error:",L),c(L.message||"Google sign-in failed"),v(!1)}},handleTogglePasswordVisibility:()=>{d(D=>!D)}}},Zr=()=>i.jsxs("header",{className:"flex items-center absolute p-5",children:[i.jsx("img",{src:"/assets/image/LV_logo.png",alt:"LV logo",className:"w-16 h-16 mr-4"}),i.jsxs("h1",{className:"text-2xl text-white",children:[i.jsx("span",{className:"font-regular",children:"LVCC"})," ",i.jsx("span",{className:"font-LatoSemiBold",children:"AppointEase"})]})]}),c2=()=>{const{email:n,password:e,remember:t,error:s,showPassword:r,handleEmail:o,handlePassword:a,handleRemember:c,handleSignIn:u,handleGmail:d,handleTogglePasswordVisibility:f,isLoading:m,isGoogleLoading:g}=l2();return i.jsxs("div",{className:"w-full min-h-screen bg-cover bg-center relative",style:{backgroundImage:"url('/assets/image/SignIn.png')",backgroundSize:"cover",backgroundPosition:"bottom"},children:[i.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(2, 17, 74, 0.5), rgba(3, 21, 125, 0.5), rgba(107, 123, 222, 0.4))"}}),i.jsx(Zr,{}),i.jsx("section",{className:"relative flex items-center justify-center pt-20 pb-10 px-4",children:i.jsxs("div",{className:"bg-[#FEFEFE] bg-opacity-30 p-8 rounded-lg shadow-lg max-w-lg w-full",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-2 tracking-wider",children:"SIGN IN"}),i.jsx("div",{className:"w-48 h-1 bg-[#F3BC62] mb-6"}),i.jsxs("div",{className:"bg-white bg-opacity-70 p-8 rounded-lg shadow-lg",children:[i.jsxs("form",{onSubmit:u,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-[#161f55] uppercase mb-2",children:"Email"}),i.jsx("input",{id:"email",value:n,onChange:o,type:"email",required:!0,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Enter your email"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-[#161f55] uppercase mb-2",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",value:e,onChange:a,type:r?"text":"password",required:!0,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 pr-10",placeholder:"Enter your password"}),i.jsx("button",{type:"button",onClick:f,className:"absolute inset-y-0 right-0 px-3 flex items-center","aria-label":r?"Hide password":"Show password","aria-pressed":r,children:r?i.jsx(al,{}):i.jsx(ll,{})})]})]}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:t,onChange:c,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),i.jsx(dt,{to:"/forgot-password",className:"text-sm text-blue-500 hover:underline",children:"Forgot Password?"})]}),i.jsx("button",{type:"submit",disabled:m,className:"w-full py-2 px-4 bg-[#161F55] text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Signing In...":"Log In"}),i.jsx("div",{className:"mt-4 text-center text-gray-600",children:"or"}),i.jsxs("button",{type:"button",onClick:d,disabled:g,className:"mt-4 w-full py-2 px-4 text-[#161f55] border-2 border-[#161f55] rounded-md flex items-center justify-center hover:bg-[#161f55] hover:text-white disabled:opacity-50",children:[i.jsx(Jp,{className:"text-2xl mr-2"}),g?"Processing...":"Log in with Google"]})]}),i.jsxs("p",{className:"mt-4 text-center text-[16px] font-semibold text-[#161f55]",children:["Don't have an account?"," ",i.jsx(dt,{to:"/signup",className:"text-[#F3BC62] hover:text-[#161f55]",children:"Sign Up"})]}),s&&i.jsx("p",{className:"mt-2 text-center text-red-500 font-semibold",children:s})]})]})})]})},u2=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[r,o]=C.useState(""),[a,c]=C.useState(""),[u,d]=C.useState(null),{updateUser:f}=Lr(),m=vs();return{name:n,email:t,password:r,confirmPassword:a,error:u,handleName:R=>{e(R.target.value)},handleEmail:R=>{s(R.target.value)},handlePassword:R=>{o(R.target.value)},handleConfirmPassword:R=>{c(R.target.value)},handleSignUp:async R=>{var _,P,O,D,y;if(R.preventDefault(),r!==a){d("Passwords do not match.");return}if(r.length<8){d("Password must be at least 8 characters.");return}try{const b=await uo.signup({name:n.trim(),email:t.trim(),password:r,confirmPassword:a});if(b.success){const E={email:t.trim(),name:n.trim(),picture:((_=b.user)==null?void 0:_.picture)||((P=b.user)==null?void 0:P.profilePicture)||null,profilePicture:((O=b.user)==null?void 0:O.profilePicture)||((D=b.user)==null?void 0:D.picture)||null,id:b.userId,role:(y=b.user)==null?void 0:y.role};b.token&&localStorage.setItem("token",b.token),f(E),m("/registrarHome")}else m("/signin")}catch(b){d(b.message||"An error occurred during sign up")}},handleGoogleSignUp:async()=>{var R,_,P,O,D;try{const y=await Yh(Zf,ep),b=await uo.signup({name:y.user.displayName,email:y.user.email,password:null,confirmPassword:null,googleAuth:!0}),E={email:y.user.email,name:y.user.displayName,picture:((R=b.user)==null?void 0:R.picture)||((_=b.user)==null?void 0:_.profilePicture)||y.user.photoURL||null,profilePicture:((P=b.user)==null?void 0:P.profilePicture)||((O=b.user)==null?void 0:O.picture)||y.user.photoURL||null,id:b.userId||y.user.uid,role:(D=b.user)==null?void 0:D.role};f(E),m("/registrarHome")}catch(y){d(y.message)}}}},d2=()=>{const{name:n,email:e,password:t,confirmPassword:s,error:r,handleName:o,handleEmail:a,handlePassword:c,handleConfirmPassword:u,handleSignUp:d,handleGoogleSignUp:f}=u2();return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"w-full h-screen bg-cover bg-center relative",style:{backgroundImage:"url('/assets/image/SignIn.png')",backgroundSize:"cover",backgroundPosition:"bottom"},children:[i.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(2, 17, 74, 0.5), rgba(3, 21, 125, 0.5), rgba(107, 123, 222, 0.4))"}}),i.jsx(Zr,{}),i.jsx("section",{className:"absolute inset-0 flex items-center justify-center mt-10",children:i.jsxs("div",{className:"bg-white bg-opacity-30 p-8 rounded-lg shadow-lg h-[640px] max-w-lg w-full",children:[i.jsx("h2",{className:"text-[30px] font-LatoBold text-[#fefefe] mb-2 tracking-wider mt-[-10px]",children:"SIGN UP"}),i.jsx("div",{className:"w-[200px] h-1 bg-[#F3BC62] mb-6"}),i.jsxs("div",{className:"bg-[#FEFEFE] bg-opacity-70 p-10 rounded-lg shadow-lg max-w-md h-[500px] w-full",children:[i.jsxs("form",{onSubmit:d,children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsx("div",{children:i.jsx("input",{placeholder:"Name",type:"text",value:n,onChange:o,className:"w-full px-4 py-2 border-[#6F6F6F] rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 placeholder:opacity-50 placeholder-[#000]",required:!0})}),i.jsx("div",{children:i.jsx("input",{placeholder:"Email",value:e,onChange:a,type:"email",className:"w-full px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 placeholder:opacity-50 placeholder-[#000]",required:!0})}),i.jsx("div",{children:i.jsx("input",{value:t,onChange:c,type:"password",placeholder:"Password",className:"w-full px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 placeholder:opacity-50 placeholder-[#000]",required:!0})}),i.jsx("div",{children:i.jsx("input",{placeholder:"Confirm Password",type:"password",value:s,onChange:u,className:"w-full px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 placeholder:opacity-50 placeholder-[#000]",required:!0})})]}),r&&i.jsx("p",{className:"mt-2 text-red-500 text-sm text-center",children:r}),i.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 mt-6 bg-[#161F55] text-[20px] text-[#fefefe] font-LatoRegular rounded-md hover:bg-blue-700 focus:outline-none",children:"Sign Up"}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-[16px] mt-4 text-[#161f55] font-LatoRegular tracking-wider",children:["Already have an account?"," ",i.jsx(dt,{to:"/signin",className:"font-LatoSemiBold text-[#F3BC62] hover:text-[#161f55]",children:"Sign In"})]})})]}),i.jsxs("div",{className:"mt-4 text-center",children:[i.jsx("p",{className:"text-gray-600",children:"or"}),i.jsxs("button",{type:"button",onClick:f,className:"mt-4 w-full py-2 px-4 text-[#161f55] font-LatoRegular border-2 border-[#161f55] rounded-md flex items-center justify-center hover:bg-[#161f55] hover:text-white",children:[i.jsx(Jp,{className:"text-2xl mr-2"}),"Sign Up with Google"]})]})]})]})})]})})},Zd="http://localhost:5000/api/forgot-password",eh={REQUEST_OTP:`${Zd}/request-otp`,VERIFY_OTP:`${Zd}/verify-otp`},Qp=({email:n,onVerifyOtp:e})=>{const[t,s]=C.useState(["","","","","",""]),[r,o]=C.useState(!1),[a,c]=C.useState(null),[u,d]=C.useState(!1),[f,m]=C.useState(0),g=[C.useRef(),C.useRef(),C.useRef(),C.useRef(),C.useRef(),C.useRef()],v=vs(),w=()=>{d(!0),m(30);const _=setInterval(()=>{m(P=>P<=1?(clearInterval(_),d(!1),0):P-1)},1e3)},N=async()=>{var _,P;try{const O=await ae.post(eh.REQUEST_OTP,{email:n});if(O.data.success)c(null),w();else throw new Error(O.data.message)}catch(O){c(((P=(_=O.response)==null?void 0:_.data)==null?void 0:P.message)||"Failed to resend verification code")}},x=(_,P)=>{if(P.length>1||P&&!/^\d+$/.test(P))return;const O=[...t];O[_]=P,s(O),P&&_<5&&g[_+1].current.focus()},I=(_,P)=>{P.key==="Backspace"&&!t[_]&&_>0&&g[_-1].current.focus()},R=async _=>{var O,D;_.preventDefault(),o(!0),c(null);const P=t.join("");if(P.length!==6){c("Please enter all 6 digits"),o(!1);return}try{const y=await ae.post(eh.VERIFY_OTP,{email:n,otp:P});if(y.data.success)await e(y.data.email),v("/new-password",{state:{email:y.data.email}});else throw new Error(y.data.message||"Verification failed")}catch(y){c(((D=(O=y.response)==null?void 0:O.data)==null?void 0:D.message)||y.message||"Invalid verification code. Please try again."),s(["","","","","",""]),g[0].current.focus()}finally{o(!1)}};return i.jsxs("div",{className:"w-full min-h-screen bg-cover bg-center relative",style:{backgroundImage:'url("/assets/image/SignIn.png")',backgroundSize:"cover",backgroundPosition:"bottom"},children:[i.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(2, 17, 74, 0.5), rgba(3, 21, 125, 0.5), rgba(107, 123, 222, 0.4))"}}),i.jsx(Zr,{}),i.jsx("section",{className:"relative flex items-center justify-center pt-40 px-4",children:i.jsxs("div",{className:"bg-[#FEFEFE] bg-opacity-30 p-12 rounded-[20px] shadow-lg max-w-xl w-full",children:[i.jsx("h2",{className:"flex justify-center text-3xl font-LatoBold text-white mb-2 tracking-wider",children:"Enter Verification Code"}),i.jsx("div",{className:"w-80 h-1 bg-[#F3BC62] mb-6 mx-auto"}),i.jsxs("p",{className:"text-center text-[20px] text-[#fefefe] font-LatoRegular mb-8",children:["We sent a code to ",n]}),i.jsx("div",{className:"bg-white bg-opacity-70 p-8 rounded-lg shadow-lg",children:i.jsxs("form",{onSubmit:R,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center space-x-4 flex-wrap gap-y-4",children:t.map((_,P)=>i.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:"1",ref:g[P],value:_,onChange:O=>x(P,O.target.value),onKeyDown:O=>I(P,O),className:"w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#F3BC62] focus:border-transparent",required:!0,autoComplete:"off"},P))}),a&&i.jsxs("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-md text-center text-sm",children:[i.jsx("svg",{className:"w-5 h-5 inline mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 px-4 bg-[#161F55] text-white text-lg rounded-md hover:bg-[#252F6A] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:r?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Code"}),i.jsx("div",{className:"text-center mt-4",children:i.jsx("button",{type:"button",onClick:N,disabled:u,className:"text-[#161f55] hover:text-[#F3BC62] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?`Resend code in ${f}s`:"Didn't receive the code? Resend"})}),i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",onClick:()=>v("/signin"),className:"inline-flex items-center text-[#161f55] hover:text-[#F3BC62] transition-all duration-200",children:[i.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Sign In"]})})]})})]})})]})};Qp.propTypes={email:je.string.isRequired,onVerifyOtp:je.func.isRequired};const h2=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(!1),[r,o]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState(!1),f=vs(),m=async v=>{var w,N;v.preventDefault(),s(!0),c(null),o(null);try{const x=await ae.post("http://localhost:5000/api/forgot-password/request-otp",{email:n});x.data.success?(o(`Verification code has been sent to ${n}`),d(!0)):c(x.data.message||"Failed to send verification code")}catch(x){c(((N=(w=x.response)==null?void 0:w.data)==null?void 0:N.message)||"Failed to send verification code. Please try again.")}finally{s(!1)}},g=async v=>{o("Email verified successfully!")};return u?i.jsx(Qp,{email:n,onVerifyOtp:g}):i.jsxs("div",{className:"w-full min-h-screen bg-cover bg-center relative",style:{backgroundImage:'url("/assets/image/SignIn.png")',backgroundSize:"cover",backgroundPosition:"bottom"},children:[i.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(2, 17, 74, 0.5), rgba(3, 21, 125, 0.5), rgba(107, 123, 222, 0.4))"}}),i.jsx(Zr,{}),i.jsx("section",{className:"relative flex items-center justify-center pt-40 px-4",children:i.jsxs("div",{className:"bg-[#FEFEFE] bg-opacity-30 p-12 rounded-[20px] shadow-lg max-w-xl w-full",children:[i.jsx("h2",{className:"text-3xl font-LatoBold tracking-wider text-white text-center mb-2",children:"Forgot password?"}),i.jsx("div",{className:"w-[260px] h-1 bg-[#F3BC62] mb-4 mx-auto"}),i.jsxs("p",{className:"text-white text-[16px] font-LatoRegular text-center mb-6",children:["We’ll send you reset instructions."," "]}),i.jsxs("form",{onSubmit:m,className:"bg-white p-6 rounded-lg space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"email",className:"block text-[#161F55] font-LatoSemiBold text-[16px] tracking-wider",children:"Email"}),i.jsx("input",{id:"email",type:"email",value:n,onChange:v=>e(v.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),i.jsx("button",{type:"submit",disabled:t,className:"w-full py-2 bg-[#161F55] text-white rounded-md hover:bg-[#252F6A] transition-colors disabled:opacity-50",children:t?"Sending...":"Send Verification Code"}),r&&i.jsx("div",{className:"p-3 bg-green-100 text-green-700 rounded-md text-center",children:r}),a&&i.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-center",children:a}),i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",onClick:()=>f("/signin"),className:"inline-flex items-center text-[#161f55] hover:text-[#F3BC62] transition-all duration-200",children:[i.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Sign In"]})})]})]})})]})},f2="http://localhost:5000/api/forgot-password",p2=({onClose:n})=>i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-sm w-full mx-4 relative",children:[i.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full  mb-4",children:i.jsx(eE,{className:"text-[#161F55] w-24 h-24"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Successfull password reset!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You can now use your new password to login to your account."}),i.jsx("button",{onClick:n,className:"w-full bg-[#161F55] text-white rounded-md py-2 hover:bg-[#252F6A] transition-colors",children:"Login"})]})]})}),m2=()=>{var A;const[n,e]=C.useState(""),[t,s]=C.useState(""),[r,o]=C.useState(!1),[a,c]=C.useState(null),[u,d]=C.useState(null),[f,m]=C.useState(!1),[g,v]=C.useState(!1),[w,N]=C.useState(!1),x=vs(),R=(A=Ys().state)==null?void 0:A.email,_=n.length>=8&&n.length<=30,P=/[A-Z]/.test(n),O=/[a-z]/.test(n),D=/[0-9]/.test(n),y=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(n);C.useEffect(()=>{R||x("/signin")},[R,x]);const b=async k=>{var S,V;if(k.preventDefault(),o(!0),d(null),c(null),n!==t){d("Passwords do not match"),o(!1);return}try{const L=await ae.post(`${f2}/reset-password`,{email:R,newPassword:n});if(L.data.success)N(!0);else throw new Error(L.data.message||"Failed to reset password")}catch(L){console.error("Reset password error:",L),d(((V=(S=L.response)==null?void 0:S.data)==null?void 0:V.message)||"Failed to reset password. Please try again.")}finally{o(!1)}},E=()=>{N(!1),x("/signin",{replace:!0})},j=k=>{k==="password"?m(!f):v(!g)};return R?i.jsxs("div",{className:"w-full min-h-screen bg-cover bg-center relative",style:{backgroundImage:'url("/assets/image/SignIn.png")',backgroundSize:"cover",backgroundPosition:"bottom"},children:[i.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(2, 17, 74, 0.5), rgba(3, 21, 125, 0.5), rgba(107, 123, 222, 0.4))"}}),i.jsxs("div",{className:`${w?"blur-sm":""} transition-all duration-300`,children:[i.jsx(Zr,{}),i.jsx("section",{className:"relative flex items-center justify-center pt-28 px-4",children:i.jsxs("div",{className:"bg-white bg-opacity-30 p-8 rounded-[20px] shadow-lg max-w-xl w-full",children:[i.jsx("h2",{className:"text-3xl text-white text-center mb-4",children:"Create New Password"}),i.jsx("div",{className:"w-[280px] h-1 bg-[#F3BC62] mb-4 mx-auto"}),u&&i.jsx("p",{className:"text-white text-center text-sm mb-4",children:u}),i.jsxs("form",{onSubmit:b,className:"bg-white p-6 rounded-lg space-y-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("p",{className:"text-[#161F55] font-LatoSemiBold ",children:"New Password"}),i.jsx("input",{type:f?"text":"password",value:n,onChange:k=>e(k.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"}),i.jsx("button",{type:"button",onClick:()=>j("password"),className:"absolute right-3 top-2/3 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 flex items-center justify-center",children:f?i.jsx(al,{}):i.jsx(ll,{})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("p",{className:"text-[#161F55] font-LatoSemiBold",children:"Confirm New Password"}),i.jsx("input",{type:g?"text":"password",value:t,onChange:k=>s(k.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"}),i.jsx("button",{type:"button",onClick:()=>j("confirm"),className:"absolute right-3 top-2/3 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 flex items-center justify-center",children:g?i.jsx(al,{}):i.jsx(ll,{})})]}),i.jsxs("div",{className:"text-sm mt-4",children:[i.jsx("p",{className:"font-medium mb-2 text-gray-700",children:"Password requirements:"}),i.jsxs("ul",{className:"pl-5 space-y-1",children:[i.jsxs("li",{className:`flex items-center ${_?"text-green-600":"text-red-600"}`,children:[i.jsx("span",{className:"mr-2",children:_?i.jsx(hi,{}):i.jsx(Ii,{})}),"Contain 8 to 30 characters"]}),i.jsxs("li",{className:`flex items-center ${P&&O?"text-green-600":"text-red-600"}`,children:[i.jsx("span",{className:"mr-2",children:P&&O?i.jsx(hi,{}):i.jsx(Ii,{})}),"Contain both lower and uppercase letters"]}),i.jsxs("li",{className:`flex items-center ${D?"text-green-600":"text-red-600"}`,children:[i.jsx("span",{className:"mr-2",children:D?i.jsx(hi,{}):i.jsx(Ii,{})}),"Contain 1 number"]}),i.jsxs("li",{className:`flex items-center ${y?"text-green-600":"text-red-600"}`,children:[i.jsx("span",{className:"mr-2",children:y?i.jsx(hi,{}):i.jsx(Ii,{})}),"Contain 1 special character ",i.jsx("code",{children:"!@#$%^&*()+"})]})]})]}),i.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 bg-[#161F55] text-white rounded-md hover:bg-[#252F6A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?i.jsxs("span",{className:"flex items-center justify-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"}),i.jsx("div",{className:"text-center pt-4",children:i.jsxs(dt,{to:"/signin",className:"text-[#161F55] hover:text-[#F3BC62] transition-colors inline-flex items-center",children:[i.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Sign In"]})})]})]})})]}),w&&i.jsx(p2,{onClose:E})]}):null},th="http://localhost:5000/api",g2="http://localhost:5000/api",x2=()=>{const[n,e]=C.useState(Xe()),[t,s]=C.useState(()=>{const b=localStorage.getItem("sidebarOpen");return b!==null?JSON.parse(b):!0}),[r,o]=C.useState([]),[a,c]=C.useState([]),[u,d]=C.useState([]),[f,m]=C.useState({});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]);const g=()=>{s(b=>!b)},v=n.daysInMonth(),w=n.startOf("month").day(),N=n.format("MMMM"),x=n.year(),I=C.useCallback(async()=>{try{const b=await ae.get(`${g2}/events`);d(b.data)}catch(b){console.error("Error fetching events for dashboard:",b),d([])}},[]);C.useEffect(()=>{I()},[I]),C.useEffect(()=>{const b={};u.forEach(E=>{const j=Xe(E.startDate),A=Xe(E.endDate);let k=j;for(;k.isBefore(A)||k.isSame(A,"day");){const S=k.format("YYYY-MM"),V=k.date();b[S]||(b[S]={}),b[S][V]={label:"Event",color:E.color||"bg-yellow-500"},k=k.add(1,"day")}}),m(b)},[u]);const R=C.useCallback(async()=>{try{const E=(await ae.get(`${th}/holidays`)).data.map(j=>{let A="";if(j.date)try{const k=j.date.includes("T")?j.date:`${j.date}T00:00:00`,S=new Date(k),V=S.getFullYear(),L=String(S.getMonth()+1).padStart(2,"0"),F=String(S.getDate()).padStart(2,"0");A=`${V}-${L}-${F}`}catch(k){console.error("Error parsing holiday date in useRegistrarHome:",j.date,k)}return{id:j._id,date:A,name:j.description}});o(E)}catch(b){console.error("Error fetching holidays for registrar home:",b),o([])}},[]);C.useEffect(()=>{R()},[R]),C.useEffect(()=>{if(r.length>0){const b=n.format("YYYY-MM"),E=r.filter(j=>j.date&&j.date.startsWith(b));c(E)}else c([])},[n,r]);const _=()=>{e(n.subtract(1,"month"))},P=()=>{e(n.add(1,"month"))},O=b=>{const j=n.date(b).day();return j===0||j===6};C.useEffect(()=>{const b=E=>{const j=document.querySelector(".sidebar-container"),A=document.querySelector(".sidebar-toggle-button");j&&!j.contains(E.target)&&!(A!=null&&A.contains(E.target))&&t&&s(!1)};return t&&document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[t]);const[D,y]=C.useState({APPROVED:0,PENDING:0,COMPLETED:0,REJECTED:0,total:0,morning:{APPROVED:0,PENDING:0,COMPLETED:0,REJECTED:0},afternoon:{APPROVED:0,PENDING:0,COMPLETED:0,REJECTED:0}});return C.useEffect(()=>{const b=async()=>{try{const j=await ae.get(`${th}/dashboard/stats`);y(j.data)}catch(j){console.error("Error fetching dashboard stats:",j)}};b();const E=setInterval(b,3e4);return()=>clearInterval(E)},[]),{isSidebarOpen:t,setIsSidebarOpen:s,currentDate:n,toggleSidebar:g,daysInMonth:v,startOfMonth:w,monthName:N,year:x,holidays:r,handlePrevMonth:_,handleNextMonth:P,isWeekend:O,currentMonthHolidays:a,events:f,stats:D}},y2=()=>{var N,x,I,R,_,P;const{isSidebarOpen:n,setIsSidebarOpen:e,currentDate:t,toggleSidebar:s,daysInMonth:r,startOfMonth:o,monthName:a,year:c,holidays:u,currentMonthHolidays:d,events:f,handlePrevMonth:m,handleNextMonth:g,isWeekend:v,stats:w}=x2();return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`sidebar-container ${n?"w-[300px]":"w-[100px]"} z-20`,children:i.jsx(rn,{isSidebarOpen:n,setIsSidebarOpen:e})}),i.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:'url("/assets/image/BackGround.png")'},children:i.jsx("div",{className:"absolute inset-0 bg-[#161f55] bg-opacity-90"})}),i.jsxs("div",{className:"flex-1 overflow-y-auto z-10 relative",children:[i.jsx(on,{toggleSidebar:s,isSidebarOpen:n,title:"Registrar Office Dashboard"}),i.jsxs("div",{className:"p-6",children:[i.jsx("section",{className:"h-auto bg-white max-w-[1300px] mx-auto p-5 my-5 rounded-lg shadow-lg",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-3xl font-LatoRegular tracking-[5px] text-[#000]",children:"Overview of the Month"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[410px] my-3"}),i.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-6",children:[i.jsx("div",{className:"bg-[#FFFFFF] border-2 border-[#DCE0E5] p-6 rounded-lg shadow-md",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center bg-[#8BE68E] bg-opacity-60 text-[#299057] text-[30px] font-LatoBold",children:w.APPROVED||0}),i.jsxs("div",{className:"ml-4 text-left",children:[i.jsx("h3",{className:"text-[#299057] text-xl font-semibold",children:"Approved"}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#299057] text-[16px] opacity-50",children:"●"})," ","Morning"," ",i.jsx("span",{className:"ml-4 font-LatoBold",children:((N=w.morning)==null?void 0:N.APPROVED)||0})]}),i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#299057] text-[16px] opacity-50",children:"●"})," ","Afternoon"," ",i.jsx("span",{className:"ml-2 font-LatoBold",children:((x=w.afternoon)==null?void 0:x.APPROVED)||0})]})]})]})]})}),i.jsx("div",{className:"bg-[#FFFFFF] border-2 border-[#DCE0E5] p-6 rounded-lg shadow-md",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center bg-[#E5E68B] bg-opacity-60 text-[#A0A112] text-[30px] font-LatoBold",children:w.PENDING||0}),i.jsxs("div",{className:"ml-4 text-left",children:[i.jsx("h3",{className:"text-[#A0A112] text-xl font-semibold",children:"Pendings"}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#E5E68B] text-[16px] ",children:"●"})," ","Morning"," ",i.jsx("span",{className:"ml-4 font-LatoBold",children:((I=w.morning)==null?void 0:I.PENDING)||0})]}),i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#E5E68B] text-[16px] ",children:"●"})," ","Afternoon"," ",i.jsx("span",{className:"ml-2 font-LatoBold",children:((R=w.afternoon)==null?void 0:R.PENDING)||0})]})]})]})]})}),i.jsx("div",{className:"bg-[#FFFFFF] border-2 border-[#DCE0E5] p-6 rounded-lg shadow-md",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center bg-[#354CCE] bg-opacity-60 text-[#354CCE] text-[30px] font-LatoBold",children:w.COMPLETED||0}),i.jsxs("div",{className:"ml-4 text-left",children:[i.jsx("h3",{className:"text-[#354CCE] text-xl font-semibold",children:"Completed"}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#354CCE] text-[16px] ",children:"●"})," ","Morning"," ",i.jsx("span",{className:"ml-4 font-LatoBold",children:((_=w.morning)==null?void 0:_.COMPLETED)||0})]}),i.jsxs("p",{className:"text-[#000] text-[13px] font-LatoRegular",children:[i.jsx("span",{className:"text-[#354CCE] text-[16px] ",children:"●"})," ","Afternoon"," ",i.jsx("span",{className:"ml-2 font-LatoBold",children:((P=w.afternoon)==null?void 0:P.COMPLETED)||0})]})]})]})]})})]})]})}),i.jsxs("section",{className:"bg-white max-w-[1300px] mx-auto p-5 my-5 rounded-lg shadow-lg grid grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-2 p-5 border-2 border-[#161f55] rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsxs("h2",{className:"text-3xl font-LatoSemiBold tracking-[5px] text-[#161F55]",children:[a," ",c,i.jsx("div",{className:"border-b-4 border-[#F3BC62]  my-3"})]}),i.jsxs("div",{children:[i.jsx("button",{onClick:m,className:"px-4 py-2 mr-2 bg-[#161f55] text-white rounded hover:bg-blue-600",children:"<"}),i.jsx("button",{onClick:g,className:"px-4 py-2 bg-[#161f55] text-white rounded hover:bg-blue-600",children:">"})]})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-[1px] bg-[#161f55] text-center mt-6",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((O,D)=>i.jsx("div",{className:"font-bold text-[#161F55] text-lg bg-white",children:O},D)),Array.from({length:o}).map((O,D)=>i.jsx("div",{className:"bg-white"},D)),Array.from({length:r}).map((O,D)=>{var F;const y=D+1,b=`${c}-${t.format("MM")}-${String(y).padStart(2,"0")}`,E=v(y),j=d.find(B=>B.date===b),A=(F=f[t.format("YYYY-MM")])==null?void 0:F[y];let k="p-2 h-[90px] cursor-pointer relative hover:bg-blue-100",S=null,V="",L="";return A?(S="Event",L=A.label,V=A.color,k+=" bg-white"):j?(S="Holiday",L=j.name||"Holiday",V="bg-purple-500",k+=" bg-purple-100"):E?k+=" bg-gray-100":k+=" bg-white",t.date()===y&&t.month()===Xe().month()&&t.year()===Xe().year()&&(k=k.replace(/bg-(white|purple-100|gray-100)/g,""),k+=" bg-blue-300 font-bold ring-2 ring-blue-500"),i.jsxs("div",{className:k.trim(),children:[y,S&&i.jsx("span",{className:`absolute bottom-1 left-1 right-1 text-center text-xs text-white px-1 py-0.5 rounded ${V}`,children:L})]},`day-${y}`)})]})]}),i.jsxs("div",{className:"p-5 border-2 border-[#161f55] rounded-lg",children:[i.jsx("h3",{className:"text-2xl font-bold tracking-[3px] text-[#161F55]",children:"Holidays"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[120px] my-3"}),u.length>0?i.jsx("ul",{className:"space-y-2 text-lg max-h-[500px] overflow-y-auto pr-2",children:u.slice().sort((O,D)=>new Date(O.date)-new Date(D.date)).map(O=>{const D=Xe(O.date).format("MMM DD");return i.jsxs("li",{className:"text-[#161F55] text-base",children:[i.jsxs("span",{className:"font-semibold",children:[D,":"]})," ",O.name]},O.id)})}):i.jsx("p",{className:"text-gray-500 mt-2 text-base",children:"No holidays scheduled or fetched."})]})]})]}),i.jsx(En,{})]})]})},Ea="http://localhost:5000/api",v2=()=>{const[n,e]=C.useState(()=>{const k=localStorage.getItem("sidebarOpen");return k!==null?JSON.parse(k):!0}),[t,s]=C.useState(Xe()),[r,o]=C.useState([]),[a,c]=C.useState({}),u={title:"",description:"",startDate:"",endDate:"",color:"bg-blue-500"},[d,f]=C.useState(u),[m,g]=C.useState(null);C.useEffect(()=>{localStorage.setItem("sidebarOpenEventsPage",JSON.stringify(n))},[n]);const v=()=>e(k=>!k),w=C.useCallback(async()=>{var k,S;try{const V=await ae.get(`${Ea}/events`);o(V.data)}catch(V){console.error("Error fetching events:",V),o([]),alert(`Failed to fetch events: ${((S=(k=V.response)==null?void 0:k.data)==null?void 0:S.message)||V.message}`)}},[]);C.useEffect(()=>{w()},[w]),C.useEffect(()=>{const k={};r.forEach(S=>{if(!S.startDate||!S.endDate)return;const V=Xe(S.startDate),L=Xe(S.endDate);let F=V;for(;F.isBefore(L)||F.isSame(L,"day");){const B=F.format("YYYY-MM"),$=F.date();k[B]||(k[B]={}),k[B][$]={id:S._id,label:S.title,description:S.description||"",startDate:Xe(S.startDate).format("YYYY-MM-DD"),endDate:Xe(S.endDate).format("YYYY-MM-DD"),color:S.color||"bg-blue-500"},F=F.add(1,"day")}}),c(k)},[r]);const N=()=>s(t.subtract(1,"month")),x=()=>s(t.add(1,"month")),I=t.daysInMonth(),R=t.startOf("month").day(),_=t.format("YYYY-MM"),P=t.format("MMMM"),O=t.year();return{isSidebarOpen:n,currentDate:t,events:a,allEvents:r,newEvent:d,selectedEvent:m,toggleSidebar:v,handlePrevMonth:N,handleNextMonth:x,handleInputChange:k=>{const{name:S,value:V}=k.target;f({...d,[S]:V})},handleSaveEvent:async()=>{var $,W;const{title:k,startDate:S,endDate:V,description:L,color:F}=d;if(!k||!S||!V){alert("Event title, start date, and end date are required.");return}if(Xe(V).isBefore(Xe(S))){alert("End date cannot be before start date.");return}const B={title:k,startDate:S,endDate:V,description:L,color:F};try{await ae.post(`${Ea}/events`,B),w(),f(u)}catch(K){console.error("Error saving event:",K),alert(`Failed to save event: ${((W=($=K.response)==null?void 0:$.data)==null?void 0:W.message)||K.message}`)}},handleCancelEvent:()=>{f(u)},handleDayClick:k=>{var V;const S=(V=a[_])==null?void 0:V[k];if(S)g(S);else{const L=t.date(k).format("YYYY-MM-DD");f({...u,startDate:L,endDate:L}),g(null)}},handleDeleteEvent:async()=>{var k,S;if(!m||!m.id){alert("No event selected for deletion or event ID is missing.");return}try{await ae.delete(`${Ea}/events/${m.id}`),w(),g(null)}catch(V){console.error("Error deleting event:",V),alert(`Failed to delete event: ${((S=(k=V.response)==null?void 0:k.data)==null?void 0:S.message)||V.message}`)}},handleCloseModal:()=>{g(null)},daysInMonth:I,startOfMonth:R,monthKey:_,monthName:P,year:O}},b2=()=>{const{isSidebarOpen:n,currentDate:e,events:t,newEvent:s,selectedEvent:r,toggleSidebar:o,handlePrevMonth:a,handleNextMonth:c,handleInputChange:u,handleSaveEvent:d,handleCancelEvent:f,handleDayClick:m,handleDeleteEvent:g,handleCloseModal:v,daysInMonth:w,startOfMonth:N,monthKey:x,monthName:I,year:R}=v2();return i.jsx("div",{className:"flex h-screen font-LatoRegular flex-col",children:i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsx("div",{className:`${n?"w-[300px]":"w-[100px]"} z-20`,children:i.jsx(rn,{isSidebarOpen:n})}),i.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:'url("/assets/image/BackGround.png")'},children:i.jsx("div",{className:"absolute inset-0 bg-[#161f55] bg-opacity-90"})}),i.jsxs("div",{className:"flex-1 overflow-y-auto z-10 relative",children:[i.jsx(on,{toggleSidebar:o,isSidebarOpen:n,title:"Upcoming Events"}),i.jsxs("div",{className:"p-6 flex-1",children:[i.jsx("p",{className:"h-auto font-LatoRegular text-[30px] text-[#fefefe] pb-10",children:"EVENT CALENDAR"}),i.jsxs("section",{className:"bg-white max-w-[1300px] mx-auto p-5 my-5 rounded-lg shadow-lg grid grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-2 p-5 border-2 border-[#161f55] rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsxs("h2",{className:"text-3xl font-bold tracking-[5px] text-[#161F55]",children:[I," ",R,i.jsx("div",{className:"border-b-4 border-[#F3BC62] my-3"})]}),i.jsxs("div",{children:[i.jsx("button",{onClick:a,className:"px-4 py-2 mr-2 bg-[#161f55] text-white rounded hover:bg-blue-600",children:"<"}),i.jsx("button",{onClick:c,className:"px-4 py-2 bg-[#161f55] text-white rounded hover:bg-blue-600",children:">"})]})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-[1px] bg-[#161f55] text-center mt-6",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((_,P)=>i.jsx("div",{className:"font-bold text-[#161F55] text-lg bg-white",children:_},P)),Array.from({length:N}).map((_,P)=>i.jsx("div",{className:"bg-white"},P)),Array.from({length:w}).map((_,P)=>{var y;const O=P+1,D=(y=t[x])==null?void 0:y[O];return i.jsxs("div",{className:`p-2 bg-white h-[90px] cursor-pointer relative hover:bg-blue-100 ${e.date()===O&&e.month()===e.get("month")&&e.year()===e.get("year")?"bg-blue-300 font-bold ring-2 ring-blue-500":""}`,onClick:()=>m(O),children:[O,D&&i.jsx("span",{className:`absolute bottom-1 left-1 right-1 text-center text-xs text-white px-1 py-0.5 rounded ${D.color}`,children:D.label})]},`day-${O}`)})]})]}),i.jsxs("div",{className:"p-5 border-2 border-[#161f55] rounded-lg",children:[i.jsx("h3",{className:"text-2xl font-LatoSemiBold tracking-[3px] text-[#161F55]",children:"Add New Event"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[200px] my-3"}),i.jsxs("form",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"title",className:"block font-LatoSemiBold text-[#161f55] text-[18px] mb-2",children:"Title"}),i.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:u,className:"w-full p-2 border rounded",placeholder:"Event Title"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"description",className:"block font-LatoSemiBold text-[#161f55] text-[18px] mb-2",children:"Description"}),i.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:u,className:"w-full p-2 border rounded",placeholder:"Event Description"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"startDate",className:"block font-LatoSemiBold text-[#161f55] text-[18px] mb-2",children:"Start Date"}),i.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:u,className:"w-full p-2 border rounded"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"endDate",className:"block font-LatoSemiBold text-[#161f55] text-[18px] mb-2",children:"End Date"}),i.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:u,className:"w-full p-2 border rounded"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"button",onClick:d,className:"w-full px-4 py-2 bg-[#3A993D] text-white font-LatoSemiBold uppercase rounded hover:bg-green-600",children:"Save"}),i.jsx("button",{type:"button",onClick:f,className:"w-full px-4 py-2 bg-[#9CA3AF] text-white font-LatoSemiBold uppercase rounded hover:bg-gray-500",children:"Cancel"})]})]})]})]})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[400px]",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:r.label}),i.jsx("p",{className:"mb-4",children:r.description}),i.jsxs("p",{className:"mb-2 text-gray-600",children:[i.jsx("strong",{children:"Start Date:"})," ",r.startDate]}),i.jsxs("p",{className:"mb-4 text-gray-600",children:[i.jsx("strong",{children:"End Date:"})," ",r.endDate]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:g,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"}),i.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Close"})]})]})}),i.jsx(En,{})]})]})})};function Vo(n){return we({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"},child:[]}]})(n)}const w2=()=>{const[n,e]=C.useState(()=>{const z=localStorage.getItem("sidebarOpen");return z!==null?JSON.parse(z):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(n))},[n]);const t=()=>e(z=>!z),[s,r]=C.useState(!1),[o,a]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState(!1),[m,g]=C.useState(null),[v,w]=C.useState(!1),[N,x]=C.useState(null),[I,R]=C.useState(null),[_,P]=C.useState(null),O={slots:"",date:"",startTime:"",endTime:""},[D,y]=C.useState(O),[b,E]=C.useState([]),j=C.useCallback((z,te)=>({no:(te+1).toString(),slots:z.slots.toString(),availableSlots:(z.slots-(z.bookedSlots||0)).toString(),bookedSlots:(z.bookedSlots||0).toString(),date:$(z.date.split("T")[0]),startTime:z.startTime,endTime:z.endTime,_id:z._id}),[]),A=C.useCallback(async()=>{w(!0);try{const te=(await el()).map((ie,Q)=>j(ie,Q));E(te)}catch(z){console.error("Error fetching schedules:",z),x("Failed to fetch schedules")}finally{w(!1)}},[j]);C.useEffect(()=>{A();const z=setInterval(A,3e4);return()=>clearInterval(z)},[A]);const k=()=>{y(O),x(null),r(!0)},S=()=>{y(O),x(null),r(!1)},V=z=>{const te=b[z];if(!te)return;const ie={...te,date:B(te.date),startTime:te.startTime,endTime:te.endTime};u(z),y(ie),P(ie),R(null),a(!0)},L=()=>{y(O),P(null),u(null),R(null),a(!1)},F=z=>{const{name:te,value:ie}=z.target;y(Q=>({...Q,[te]:ie})),N&&x(null),I&&R(null)},B=z=>{if(!z)return"";const te=new Date(z),ie=te.getFullYear(),Q=String(te.getMonth()+1).padStart(2,"0"),G=String(te.getDate()).padStart(2,"0");return`${ie}-${Q}-${G}`},$=z=>{if(!z)return"";const te=new Date(z),ie=String(te.getMonth()+1).padStart(2,"0"),Q=String(te.getDate()).padStart(2,"0"),G=te.getFullYear();return`${ie}/${Q}/${G}`},W=async()=>{if(c===null||!_)return;if(!D.slots||!D.date||!D.startTime||!D.endTime){R("All fields are required");return}const z=parseInt(D.slots),te=parseInt(_.slots),ie=parseInt(_.bookedSlots)||0;if(z<ie){R(`Cannot reduce slots below booked amount (${ie} slots already booked)`);return}if(!(z!==te||D.date!==_.date||D.startTime!==_.startTime||D.endTime!==_.endTime)){R("No changes made to the schedule.");return}try{const G=b[c],ee={...D,slots:z,bookedSlots:ie,availableSlots:z-ie};await M_(G._id,ee)&&(await A(),L())}catch(G){console.error("Error updating schedule:",G),R(G.message||"Failed to update schedule")}},K=async()=>{if(!D.slots||!D.date||!D.startTime||!D.endTime){x("All fields are required");return}try{await F_(D)&&(await A(),S())}catch(z){console.error("Error adding schedule:",z),x("Failed to add schedule")}},Z=z=>{g(z),f(!0)},se=async()=>{var z,te;if(m!==null)try{const ie=b[m],Q=await V_(ie._id);await A(),closeDeleteModal(),toast.success("Schedule deleted successfully"),Q.notification}catch(ie){console.error("Error deleting schedule:",ie),toast.error(((te=(z=ie.response)==null?void 0:z.data)==null?void 0:te.message)||"Failed to delete schedule")}};return{isSidebarOpen:n,isAddModalOpen:s,isEditModalOpen:o,editIndex:c,isDeleteModalOpen:d,deleteIndex:m,newSchedule:D,schedules:b,loading:v,addModalError:N,editModalError:I,toggleSidebar:t,openAddModal:k,closeAddModal:S,addSchedule:K,openEditModal:V,closeEditModal:L,handleInputChange:F,handleUpdateSchedule:W,openDeleteModal:Z,closeDeleteModal,confirmDelete:se}},_2=()=>{const{isSidebarOpen:n,isAddModalOpen:e,isEditModalOpen:t,isDeleteModalOpen:s,newSchedule:r,schedules:o,toggleSidebar:a,openAddModal:c,closeAddModal:u,openEditModal:d,closeEditModal:f,handleInputChange:m,addSchedule:g,openDeleteModal:v,closeDeleteModal:w,confirmDelete:N,handleUpdateSchedule:x,editModalError:I,addModalError:R}=w2();return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`${n?"w-[300px]":"w-[100px]"}`,children:i.jsx(rn,{isSidebarOpen:n})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("main",{className:"h-auto",children:[i.jsx(on,{toggleSidebar:a,isSidebarOpen:n,title:"Schedule Records"}),i.jsxs("section",{className:"h-[1200px] z-10 bg-white p-5 my-5",children:[i.jsxs("div",{className:"bg-[#D9D9D9] h-52 m-4 pt-2",children:[i.jsxs("div",{className:"text-[#161F55] flex justify-between px-3 pt-2 ml-3",children:[i.jsxs("h2",{className:"text-3xl font-bold tracking-[5px] pt-1",children:["LIST OF SCHEDULES",i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[360px] my-3"})]}),i.jsx("div",{children:i.jsx("button",{className:"bg-[#161F55] text-white px-5 py-1 mt-2 mr-2 rounded-md hover:bg-blue-800",onClick:c,children:"+ ADD"})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-16 ml-4",children:[i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px]",children:[i.jsx("label",{htmlFor:"show",className:"mr-2",children:"SHOW"}),i.jsx("input",{id:"show",name:"show",type:"number",min:"1",max:"10",defaultValue:"1",className:"text-center always-show-spinner"}),i.jsx("span",{className:"ml-2",children:"ENTRIES"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{id:"search",type:"search",className:"border-[#989898] py-2 bg-white text-[#161F55] mr-5 pl-8",placeholder:"Search"})]})]})]}),i.jsxs("table",{className:"text-[18px] w-[97%] border-collapse text-[#161F55] mt-8 mx-auto",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-center",children:[i.jsx("th",{className:"border p-4",children:"NO."}),i.jsxs("th",{className:"border p-4",children:["SLOTS",i.jsx("br",{}),"(Available / Total)"]}),i.jsx("th",{className:"border p-4",children:"DATE"}),i.jsx("th",{className:"border p-4",children:"START TIME"}),i.jsx("th",{className:"border p-4",children:"END TIME"}),i.jsx("th",{className:"border p-4",children:"ACTIONS"})]})}),i.jsx("tbody",{children:o&&o.length>0?o.slice(0,9).map((_,P)=>i.jsxs("tr",{className:`${P%2===0?"bg-gray-100":""} text-center`,children:[i.jsx("td",{className:"border p-5",children:(_==null?void 0:_.no)||P+1})," ",i.jsxs("td",{className:`border p-5 ${parseInt((_==null?void 0:_.availableSlots)||0)===0?"bg-red-100 text-red-700 font-semibold":parseInt((_==null?void 0:_.availableSlots)||0)<=2?"bg-yellow-100 text-yellow-700 font-semibold":""}`,children:[(_==null?void 0:_.availableSlots)||"0"," / ",(_==null?void 0:_.slots)||"0",parseInt((_==null?void 0:_.availableSlots)||0)===0&&i.jsx("span",{className:"block text-xs text-red-600",children:"Fully Booked"})]}),i.jsx("td",{className:"border p-5",children:(_==null?void 0:_.date)||""}),i.jsx("td",{className:"border p-5",children:(_==null?void 0:_.startTime)||""}),i.jsx("td",{className:"border p-5",children:(_==null?void 0:_.endTime)||""}),i.jsx("td",{className:"border p-5",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("div",{"data-tooltip-id":"edit-tooltip","data-tooltip-content":"Edit",className:"bg-[#CF5824] p-2 rounded cursor-pointer hover:bg-orange-700",onClick:()=>d(P),children:i.jsx(oh,{className:"text-white"})}),i.jsx("div",{"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"bg-[#6F6F6F] p-2 rounded cursor-pointer hover:bg-gray-700",onClick:()=>v(P),children:i.jsx(Vo,{className:"text-white"})})]})})]},(_==null?void 0:_.id)||P)):Array.from({length:9}).map((_,P)=>i.jsx("tr",{className:`${P%2===0?"bg-gray-100":""} text-center`,children:i.jsxs("td",{className:"border p-5 h-[69px]",colSpan:6,children:[" ",P===0&&(!o||o.length===0)?"No schedules available":""]})},P))})]}),i.jsxs("div",{className:"flex justify-between items-center mt-10 text-[18px] pl-4",children:[i.jsxs("span",{className:"text-[#161F55]",children:["SHOWING 1 TO ",o?Math.min(o.length,10):0," OF ",o?o.length:0," ENTRIES "]}),i.jsxs("div",{className:"mr-6",children:[i.jsx("button",{className:"border p-1 text-[#161F55]",children:"Previous"}),i.jsx("button",{className:"border bg-[#161F55] text-[#D9D9D9] w-[40px] h-[35px]",children:"1"}),i.jsx("button",{className:"border p-1 text-[#161F55]",children:"Next"})]})]})]}),i.jsx(En,{})]})}),e&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-50 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl tracking-wider font-LatoBold text-[#161f55] mb-2",children:"ADD SCHEDULE"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[170px] my-2"}),i.jsxs("div",{className:"w-96 mt-4",children:[i.jsx("p",{children:"SLOTS"}),i.jsx("input",{name:"slots",type:"number",value:r.slots,onChange:m,placeholder:"Enter number of slots",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"DATE"}),i.jsx("input",{name:"date",type:"date",value:r.date,onChange:m,placeholder:"Date",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"START TIME"}),i.jsx("input",{name:"startTime",type:"time",value:r.startTime,onChange:m,placeholder:"Start Time",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"END TIME"}),i.jsx("input",{name:"endTime",type:"time",value:r.endTime,onChange:m,placeholder:"End Time",className:"border w-full p-2 mb-2"})]}),R&&i.jsx("p",{className:"mt-4 text-center text-red-500 text-sm",children:R}),i.jsxs("div",{className:"flex justify-center gap-10 mt-6",children:[i.jsx("button",{className:"bg-gray-300 text-black px-8 py-2 rounded-2xl",onClick:u,children:"Cancel"}),i.jsx("button",{className:"bg-[#161f55] text-white px-8 py-2 rounded-2xl",onClick:g,children:"Add"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 uppercase",children:"Update Schedule"})," ",i.jsx("div",{className:"border-b-2 border-[#F3BC62] w-60 my-2"}),i.jsxs("div",{className:"w-96",children:[i.jsx("p",{children:"Edit Slots"}),i.jsx("input",{name:"slots",type:"number",value:r.slots,onChange:m,placeholder:"Enter number of slots",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"Date"}),i.jsx("input",{name:"date",type:"date",value:r.date,onChange:m,placeholder:"Date",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"Start Time"}),i.jsx("input",{name:"startTime",type:"time",value:r.startTime,onChange:m,placeholder:"Start Time",className:"border w-full p-2 mb-2"}),i.jsx("p",{children:"End Time"}),i.jsx("input",{name:"endTime",type:"time",value:r.endTime,onChange:m,placeholder:"End Time",className:"border w-full p-2 mb-2"})]}),I&&i.jsx("p",{className:"mt-4 text-center text-red-500 text-sm",children:I}),i.jsxs("div",{className:"flex justify-center gap-10 mt-6",children:[" ",i.jsx("button",{className:"bg-gray-300 text-black px-8 py-2 rounded-2xl",onClick:f,children:"Cancel"}),i.jsx("button",{className:"bg-[#161f55] text-white px-8 py-2 rounded-2xl",onClick:x,children:"Save"})]})]})}),s&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-12 rounded-md shadow-md text-center",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Are you sure you want to delete this Schedule?"}),i.jsxs("div",{className:"flex justify-center mt-8 gap-8",children:[i.jsx("button",{className:"bg-[#C9C9C9] text-[#161F55] px-8 py-1 rounded-[20px]",onClick:w,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-8 py-1 rounded-[20px]",onClick:N,children:"Yes"})]})]})}),i.jsx(Ut,{id:"edit-tooltip"}),i.jsx(Ut,{id:"delete-tooltip"})]})},Ci="http://localhost:5000/api",E2=()=>{const[n,e]=C.useState(()=>{const G=localStorage.getItem("sidebarOpen");return G!==null?JSON.parse(G):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(n))},[n]);const[t,s]=C.useState(!1),[r,o]=C.useState(!1),[a,c]=C.useState(!1),u={date:"",description:""},[d,f]=C.useState(u),[m,g]=C.useState(null),[v,w]=C.useState([]),[N,x]=C.useState([]),[I,R]=C.useState(""),[_,P]=C.useState(1),[O,D]=C.useState(10),y=C.useCallback(async()=>{try{const ee=(await ae.get(`${Ci}/holidays`)).data.map(me=>{let oe="";if(me.date)try{const ve=me.date.includes("T")?me.date:`${me.date}T00:00:00`,ke=new Date(ve),Fe=ke.getFullYear(),bt=String(ke.getMonth()+1).padStart(2,"0"),Ge=String(ke.getDate()).padStart(2,"0");oe=`${Fe}-${bt}-${Ge}`}catch(ve){console.error("Error parsing date in fetchHolidays:",me.date,ve),oe=""}return{...me,id:me._id,date:oe}});w(ee)}catch(G){console.error("Error fetching holidays:",G),w([])}},[]);C.useEffect(()=>{y()},[y]),C.useEffect(()=>{let G=v;I.trim()!==""&&(G=v.filter(ke=>ke.description.toLowerCase().includes(I.toLowerCase())||ke.date.includes(I)));const ee=_*O,me=ee-O;x(G.slice(me,ee));const oe=G.length,ve=Math.max(1,Math.ceil(oe/O));_>ve&&P(ve)},[v,I,_,O]);const E=I.trim()!==""?v.filter(G=>G.description.toLowerCase().includes(I.toLowerCase())||G.date.includes(I)).length:v.length,j=Math.max(1,Math.ceil(E/O)),A=G=>{R(G.target.value),P(1)},k=G=>{const ee=parseInt(G.target.value,10);ee>0&&(D(ee),P(1))},S=()=>{_<j&&P(_+1)},V=()=>{_>1&&P(_-1)},L=G=>{G>=1&&G<=j&&P(G)},F=()=>e(G=>!G),B=()=>{f(u),g(null),s(!0)},$=()=>s(!1),W=G=>{f({date:G.date,description:G.description}),g(G.id),o(!0)},K=()=>{o(!1),g(null),f(u)},Z=G=>{g(G),c(!0)},se=()=>{c(!1),g(null)};return{isSidebarOpen:n,isAddModalOpen:t,isEditModalOpen:r,isDeleteModalOpen:a,newHoliday:d,holidays:N,toggleSidebar:F,openAddModal:B,closeAddModal:$,openEditModal:W,closeEditModal:K,handleInputChange:G=>{const{name:ee,value:me}=G.target;f(oe=>({...oe,[ee]:me}))},addHolidays:async()=>{if(!d.date||!d.description){alert("Date and Description cannot be empty.");return}try{await ae.post(`${Ci}/holidays`,d),y(),$()}catch(G){console.error("Error adding holiday:",G);let ee="Could not add holiday. Please try again.";G.response?ee=`Error: ${G.response.data.message||"Server error."} (Status: ${G.response.status})`:G.request?ee="Error: No response from server.":ee=`Error: ${G.message}`,alert(ee)}},updateHolidays:async()=>{if(!m||!d.date||!d.description){alert("Cannot update: Missing data or ID.");return}try{await ae.put(`${Ci}/holidays/${m}`,d),y(),K()}catch(G){console.error("Error updating holiday:",G);let ee="Could not update holiday. Please try again.";G.response?ee=`Error: ${G.response.data.message||"Server error."} (Status: ${G.response.status})`:G.request?ee="Error: No response from server.":ee=`Error: ${G.message}`,alert(ee)}},openDeleteModal:Z,closeDeleteModal:se,confirmDelete:async()=>{if(m)try{await ae.delete(`${Ci}/holidays/${m}`),y(),N.length===1&&_>1&&P(_-1),se()}catch(G){console.error("Error deleting holiday:",G);let ee="Could not delete holiday. Please try again.";G.response?ee=`Error: ${G.response.data.message||"Server error."} (Status: ${G.response.status})`:G.request?ee="Error: No response from server.":ee=`Error: ${G.message}`,alert(ee)}},allHolidaysCount:v.length,totalFilteredEntries:E,searchTerm:I,handleSearchChange:A,currentPage:_,entriesPerPage:O,calculatedTotalPages:j,handleNextPage:S,handlePreviousPage:V,handlePageChange:L,handleEntriesPerPageChange:k}},N2=n=>{if(!n||typeof n!="string")return"";try{const e=n.split("-");if(e.length===3){const[a,c,u]=e;if(a.length===4&&c.length===2&&u.length===2&&!isNaN(parseInt(a))&&!isNaN(parseInt(c))&&!isNaN(parseInt(u)))return`${a}/${c}/${u}`}const t=new Date(n.includes("T")?n:n+"T00:00:00");if(isNaN(t.getTime()))return"Invalid Date";const s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0");return`${s}/${r}/${o}`}catch(e){return console.error("Error formatting date:",e,"Input:",n),"Invalid Date"}},S2=()=>{const{isSidebarOpen:n,isAddModalOpen:e,isEditModalOpen:t,isDeleteModalOpen:s,newHoliday:r,holidays:o,toggleSidebar:a,openAddModal:c,closeAddModal:u,openEditModal:d,closeEditModal:f,handleInputChange:m,addHolidays:g,updateHolidays:v,openDeleteModal:w,closeDeleteModal:N,confirmDelete:x,totalFilteredEntries:I,searchTerm:R,handleSearchChange:_,currentPage:P,entriesPerPage:O,calculatedTotalPages:D,handleNextPage:y,handlePreviousPage:b,handlePageChange:E,handleEntriesPerPageChange:j}=E2(),A=I>0?(P-1)*O+1:0,k=Math.min(P*O,I),S=[];if(D>0)for(let V=1;V<=D;V++)S.push(V);return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`${n?"w-[300px]":"w-[100px]"}`,children:i.jsx(rn,{isSidebarOpen:n})}),i.jsx("div",{className:"flex-1 overflow-y-auto ",children:i.jsxs("main",{className:"h-auto",children:[i.jsx(on,{toggleSidebar:a,isSidebarOpen:n,title:"Holidays Record"}),i.jsxs("section",{className:"min-h-[calc(100vh-160px)] z-10 bg-white p-5 my-5",children:[i.jsxs("div",{className:"bg-[#D9D9D9] h-52 m-4 pt-2 rounded-md",children:[i.jsxs("div",{className:"text-[#161F55] flex justify-between px-3 pt-2 ml-3",children:[i.jsxs("h2",{className:"text-3xl font-bold tracking-[5px] pt-1",children:["LIST OF HOLIDAYS",i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[330px] my-3"})]}),i.jsx("div",{children:i.jsx("button",{className:"bg-[#161F55] text-white px-5 py-1 mt-2 mr-2 rounded-md hover:bg-blue-800",onClick:c,children:"+ ADD"})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-16 ml-4 mr-5",children:[i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px] flex items-center",children:[i.jsx("label",{htmlFor:"show-entries",className:"mr-2",children:"SHOW"}),i.jsxs("select",{id:"show-entries",name:"show-entries",value:O,onChange:j,className:"text-center w-20 p-2 border border-gray-400 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-[#161F55]",children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"15",children:"15"}),i.jsx("option",{value:"20",children:"20"}),i.jsx("option",{value:"25",children:"25"})]}),i.jsx("span",{className:"ml-2",children:"ENTRIES"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{id:"search-holidays",type:"search",value:R,onChange:_,className:"border-[#989898] py-2 bg-white text-[#161F55] pl-10 pr-3 rounded-md focus:outline-none focus:ring-2 focus:ring-[#161F55]",placeholder:"Search"})]})]})]}),i.jsxs("table",{className:"text-[18px] w-[97%] border-collapse text-[#161F55] mt-8 mx-auto",style:{tableLayout:"fixed"},children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-center",children:[i.jsx("th",{className:"border p-5 w-[10%]",children:"NO."}),i.jsx("th",{className:"border p-5 w-[25%]",children:"DATE"}),i.jsx("th",{className:"border p-5 w-[45%]",children:"DESCRIPTION"}),i.jsx("th",{className:"border p-5 w-[20%]",children:"ACTIONS"})]})}),i.jsx("tbody",{children:o.length>0?o.map((V,L)=>i.jsxs("tr",{className:`${L%2===0?"bg-gray-100":""} text-center`,children:[i.jsx("td",{className:"border p-5",children:(P-1)*O+L+1}),i.jsx("td",{className:"border p-5",children:N2(V.date)}),i.jsx("td",{className:"border p-5 text-center",children:V.description}),i.jsx("td",{className:"border p-5",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("div",{"data-tooltip-id":"edit-tooltip","data-tooltip-content":"Edit",className:"bg-[#CF5824] p-2 rounded cursor-pointer hover:bg-orange-700",onClick:()=>d(V),children:i.jsx(oh,{className:"text-white"})}),i.jsx("div",{"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"bg-[#6F6F6F] p-2 rounded cursor-pointer hover:bg-gray-700",onClick:()=>w(V.id),children:i.jsx(Vo,{className:"text-white"})})]})})]},V.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"text-center p-10 text-gray-500",children:R?"No holidays match your search.":"No holidays to display."})})})]}),D>0&&i.jsxs("div",{className:"flex justify-between items-center mt-10 text-[18px] px-4 mx-auto w-[97%]",children:[i.jsxs("span",{className:"text-[#161F55]",children:["SHOWING ",A," TO ",k," OF ",I," ENTRIES"]}),D>1&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:b,disabled:P===1,className:"border px-3 py-1 text-[#161F55] rounded-l-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),S.map(V=>i.jsx("button",{onClick:()=>E(V),className:`border-t border-b px-3 py-1 ${P===V?"bg-[#161F55] text-white":"text-[#161F55] hover:bg-gray-100"}`,children:V},V)),i.jsx("button",{onClick:y,disabled:P===D,className:"border px-3 py-1 text-[#161F55] rounded-r-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),i.jsx(En,{})]})}),e&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-50 z-50",children:i.jsxs("div",{className:"bg-white p-10 sm:p-20 rounded-xl shadow-md w-11/12 max-w-lg",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 uppercase",children:"Add Holiday"}),i.jsx("div",{className:"border-b-2 border-[#F3BC62] w-full max-w-xs my-2"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"add-date",className:"block mb-1",children:"DATE"}),i.jsx("input",{id:"add-date",name:"date",type:"date",value:r.date,onChange:m,className:"border w-full p-2 mb-2"}),i.jsx("label",{htmlFor:"add-description",className:"block mb-1",children:"DESCRIPTION"}),i.jsx("input",{id:"add-description",name:"description",type:"text",value:r.description,onChange:m,placeholder:"Description",className:"border w-full p-2 mb-4"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mt-6",children:[i.jsx("button",{className:" bg-gray-300 text-black px-8 py-2 rounded-2xl w-full sm:w-auto",onClick:u,children:"Cancel"}),i.jsx("button",{className:"bg-[#161f55] text-white px-8 py-2 rounded-2xl w-full sm:w-auto",onClick:g,children:"Add"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-10 sm:p-20 rounded-xl shadow-md w-11/12 max-w-lg",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 uppercase",children:"Update Holiday"}),i.jsx("div",{className:"border-b-2 border-[#F3BC62] w-full max-w-xs my-2"}),i.jsxs("div",{className:"w-full",children:[i.jsx("label",{htmlFor:"edit-date",className:"block mb-1",children:"Date"}),i.jsx("input",{id:"edit-date",name:"date",type:"date",value:r.date,onChange:m,className:"border w-full p-2 mb-2"}),i.jsx("label",{htmlFor:"edit-description",className:"block mb-1",children:"Description"}),i.jsx("input",{id:"edit-description",name:"description",type:"text",value:r.description,onChange:m,placeholder:"Description",className:"border w-full p-2 mb-4"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 sm:gap-10 mt-6",children:[i.jsx("button",{className:"bg-gray-300 text-black px-8 py-2 rounded-2xl w-full sm:w-auto",onClick:f,children:"Cancel"}),i.jsx("button",{className:"bg-[#161f55] text-white px-8 py-2 rounded-2xl w-full sm:w-auto",onClick:v,children:"Save"})]})]})}),s&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-10 rounded-md shadow-md text-center w-11/12 max-w-md",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Are you sure you want to delete this Holiday?"}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-center mt-8 gap-4 sm:gap-10",children:[i.jsx("button",{className:"bg-[#C9C9C9] text-[#161F55] px-6 py-1 rounded-[20px] w-full sm:w-auto",onClick:N,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-6 py-1  rounded-[20px] w-full sm:w-auto",onClick:x,children:"Yes"})]})]})}),i.jsx(Ut,{id:"edit-tooltip"}),i.jsx(Ut,{id:"delete-tooltip"})]})},T2=()=>{const{user:n,updateUser:e}=Lr(),t=g=>n!=null&&n.id?`${g}_${n.id}`:null,[s,r]=C.useState(()=>{const g=t("profileFormData");if(g){const v=localStorage.getItem(g);if(v)return JSON.parse(v)}if(n){const[v,w,N]=(n.name||"").split(" ");return{firstName:v||"",middleName:w||"",lastName:N||"",email:n.email||"",password:""}}return{firstName:"",middleName:"",lastName:"",email:"",password:""}}),[o,a]=C.useState(()=>{const g=t("profileImage");if(g){const v=localStorage.getItem(g);if(v)return v}return(n==null?void 0:n.picture)||(n==null?void 0:n.profilePicture)||null});return C.useEffect(()=>{n!=null&&n.id&&Object.keys(localStorage).forEach(g=>{(g.startsWith("profileFormData_")||g.startsWith("profileImage_"))&&!g.endsWith(n.id)&&localStorage.removeItem(g)})},[n==null?void 0:n.id]),C.useEffect(()=>{const g=t("profileFormData");g&&Object.keys(s).some(v=>s[v])&&localStorage.setItem(g,JSON.stringify(s))},[s,n==null?void 0:n.id]),C.useEffect(()=>{const g=t("profileImage");g&&(o?localStorage.setItem(g,o):localStorage.removeItem(g))},[o,n==null?void 0:n.id]),{formData:s,profileImage:o,handleInputChange:g=>{const{name:v,value:w}=g.target;r(N=>({...N,[v]:w}))},handleImageUpload:async g=>{const v=g.target.files[0];if(v)try{const w=localStorage.getItem("token");if(!w)throw new Error("Authentication token not found. Please sign in again.");const x=(await QE(n.id,v,w)).profilePicture;a(x),e({...n,picture:x,profilePicture:x})}catch(w){throw console.error("Error uploading profile picture:",w),new Error("Failed to upload profile picture. Please try again.")}},handleImageRemove:async()=>{try{const g=localStorage.getItem("token");if(!g)throw new Error("Authentication token not found. Please sign in again.");await e2(n.id,g),a(null),e({...n,picture:null,profilePicture:null})}catch(g){throw console.error("Error removing profile picture:",g),new Error("Failed to remove profile picture. Please try again.")}},clearProfileData:()=>{r({firstName:"",middleName:"",lastName:"",email:"",password:""}),a(null);const g=t("profileFormData"),v=t("profileImage");g&&localStorage.removeItem(g),v&&localStorage.removeItem(v)},handleSubmit:async()=>{const g=[s.firstName,s.middleName,s.lastName].filter(Boolean).join(" ");if(!g.trim())throw new Error("Name is required");try{const v=localStorage.getItem("token");if(!v)throw new Error("Authentication token not found. Please sign in again.");const w={name:g,email:s.email,picture:o,profilePicture:o};if(s.password&&(w.password=s.password),!(n!=null&&n.id))throw new Error("User ID not found. Please sign in again.");const N=await ZE(n.id,w,v);return e({...n,...N.user}),r(x=>({...x,password:""})),N}catch(v){throw console.error("Error updating profile:",v),v}}}},I2=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState(!1),[r,o]=C.useState(null),[a,c]=C.useState(null),{formData:u,profileImage:d,handleInputChange:f,handleImageUpload:m,handleImageRemove:g,handleSubmit:v}=T2(),w=()=>{e(!n)},N=async x=>{x.preventDefault(),o(null),c(null),s(!0);try{console.log("Starting profile update..."),await v(),c("Profile updated successfully!."),setTimeout(()=>{c(null)},5e3)}catch(I){console.error("Profile submission error:",I),o(I.message||"Failed to update profile. Please try signing out and back in.")}finally{s(!1)}};return i.jsxs("div",{className:"relative flex h-screen font-LatoRegular",children:[n&&i.jsx("div",{className:"relative z-20",children:i.jsx(rn,{isSidebarOpen:n})}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:'url("/assets/image/BackGround.png")'},children:i.jsx("div",{className:"absolute inset-0 bg-[#161f55] bg-opacity-80"})}),i.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[i.jsx(on,{toggleSidebar:w,isSidebarOpen:n,title:"Account Profile"}),i.jsx("div",{className:"flex justify-center items-center flex-1 px-4",children:i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-[800px] h-[500px] flex",children:[i.jsxs("div",{className:"flex flex-col items-center w-1/3",children:[i.jsx("div",{className:"w-60 h-60 bg-gray-200 rounded-full flex items-center justify-center border border-gray-300 mb-4 mt-16 overflow-hidden",children:d?i.jsx("img",{src:d,alt:"Profile",className:"w-full h-full object-cover"}):i.jsx("img",{src:"/assets/icons/UploadIcon.svg",alt:"Default Profile",className:"w-8 h-8 object-cover"})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("label",{className:"px-4 py-2 bg-[#161f55] text-white rounded-md text-sm hover:bg-blue-700 transition duration-200 cursor-pointer",children:["Upload",i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async x=>{try{o(null),await m(x),c("Profile picture updated successfully!"),setTimeout(()=>{c(null)},3e3)}catch(I){o(I.message||"Failed to upload profile picture")}}})]}),i.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md text-sm",onClick:async()=>{try{o(null),await g(),c("Profile picture removed successfully!"),setTimeout(()=>{c(null)},3e3)}catch(x){o(x.message||"Failed to remove profile picture")}},children:"Remove"})]})]}),i.jsxs("div",{className:"w-2/3 pl-8",children:[i.jsx("h2",{className:"text-[32px] font-LatoSemiBold text-[#161f55] mb-6",children:"Edit Profile"}),r&&i.jsx("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:r}),a&&i.jsx("div",{className:"mb-4 p-2 bg-green-100 text-green-700 rounded",children:a}),i.jsxs("form",{className:"flex flex-col",onSubmit:N,children:[i.jsxs("div",{className:"mb-4 flex items-center justify-start",children:[i.jsx("label",{className:"block w-[145px] text-left font-LatoSemiBold text-[#161F55] font-medium",children:"First Name:"}),i.jsx("input",{type:"text",name:"firstName",value:u.firstName,onChange:f,className:"ml-4 w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-[#D9D9D9]",required:!0})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-start",children:[i.jsx("label",{className:"block w-[145px] text-left font-LatoSemiBold text-[#161F55]",children:"Middle Name:"}),i.jsx("input",{type:"text",name:"middleName",value:u.middleName,onChange:f,className:"ml-4 w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-[#D9D9D9]"})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-start",children:[i.jsx("label",{className:"block w-[145px] text-left font-LatoSemiBold text-[#161F55] font-medium",children:"Last Name:"}),i.jsx("input",{type:"text",name:"lastName",value:u.lastName,onChange:f,className:"ml-4 w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-[#D9D9D9]",required:!0})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-start",children:[i.jsx("label",{className:"block w-[145px] text-left font-LatoSemiBold text-[#161F55] font-medium",children:"Email Address:"}),i.jsx("input",{type:"email",name:"email",value:u.email,onChange:f,className:"ml-4 w-full border border-gray-300 placeholder:text-[#000] placeholder:opacity-70 bg-[#D9D9D9] p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),i.jsxs("div",{className:"mb-4 flex items-center justify-start",children:[i.jsx("label",{className:"block w-[145px] text-left font-LatoSemiBold text-[#161F55] font-medium",children:"Password:"}),i.jsx("input",{type:"password",name:"password",value:u.password,onChange:f,className:"ml-4 w-full border border-gray-300 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-[#D9D9D9]",placeholder:"Leave blank to keep current password"})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"submit",disabled:t,className:`px-6 py-2 bg-[#161f55] float-right text-white rounded-md text-sm font-medium hover:bg-blue-700 transition duration-200 ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Updating...":"Update"})})]})]})]})}),i.jsx(En,{})]})]})]})},C2=()=>{const[n,e]=C.useState(!1);C.useEffect(()=>{const s=()=>{window.scrollY>300?e(!0):e(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return i.jsx("div",{children:n&&i.jsx("button",{onClick:t,className:"fixed bottom-10 right-10 bg-[#F3BC62] text-[#161f55] p-3 rounded-full shadow-lg hover:bg-[#2A3064] hover:text-white transition z-20",children:i.jsx(Hm,{className:"w-6 h-6"})})})},Xp=({children:n})=>i.jsxs("div",{children:[n,i.jsx(C2,{})]});Xp.propTypes={children:je.node.isRequired};function j2(n){return we({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.801 10A10 10 0 1 1 17 3.335"},child:[]},{tag:"path",attr:{d:"m9 11 3 3L22 4"},child:[]}]})(n)}function A2(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M313.4 479.1c26-5.2 42.9-30.5 37.7-56.5l-2.3-11.4c-5.3-26.7-15.1-52.1-28.8-75.2l144 0c26.5 0 48-21.5 48-48c0-18.5-10.5-34.6-25.9-42.6C497 236.6 504 223.1 504 208c0-23.4-16.8-42.9-38.9-47.1c4.4-7.3 6.9-15.8 6.9-24.9c0-21.3-13.9-39.4-33.1-45.6c.7-3.3 1.1-6.8 1.1-10.4c0-26.5-21.5-48-48-48l-97.5 0c-19 0-37.5 5.6-53.3 16.1L202.7 73.8C176 91.6 160 121.6 160 153.7l0 38.3 0 48 0 24.9c0 29.2 13.3 56.7 36 75l7.4 5.9c26.5 21.2 44.6 51 51.2 84.2l2.3 11.4c5.2 26 30.5 42.9 56.5 37.7zM32 384l64 0c17.7 0 32-14.3 32-32l0-224c0-17.7-14.3-32-32-32L32 96C14.3 96 0 110.3 0 128L0 352c0 17.7 14.3 32 32 32z"},child:[]}]})(n)}function R2(n){return we({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2l144 0c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48l-97.5 0c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3l0-38.3 0-48 0-24.9c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32L0 224c0-17.7 14.3-32 32-32z"},child:[]}]})(n)}const P2=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(!0),[r,o]=C.useState(null),[a,c]=C.useState(""),[u,d]=C.useState("Filter by"),[f,m]=C.useState(10),[g,v]=C.useState(1),[w,N]=C.useState(!1),[x,I]=C.useState(null),[R,_]=C.useState(()=>{const Q=localStorage.getItem("sidebarOpen");return Q!==null?JSON.parse(Q):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(R))},[R]);const P=C.useCallback(()=>{_(Q=>!Q)},[]),O=Q=>{switch(Q){case"PENDING":return"bg-[#F3BC62]";case"APPROVED":return"bg-[#299057]";case"REJECTED":return"bg-[#D52121]";case"COMPLETED":return"bg-[#354CCE]";default:return"bg-gray-500"}},D=Q=>{switch(Q){case"PENDING":return"text-[#F3BC62]";case"APPROVED":return"text-[#299057]";case"REJECTED":return"text-[#D52121]";case"COMPLETED":return"text-[#354CCE]";default:return"text-gray-500"}},y=n.filter(Q=>{var ve,ke,Fe,bt;const G=a.toLowerCase(),ee=((ve=Q.transactionNumber)==null?void 0:ve.toLowerCase().includes(G))||((ke=Q.request)==null?void 0:ke.toLowerCase().includes(G))||((Fe=Q.emailAddress)==null?void 0:Fe.toLowerCase().includes(G));if(u==="Filter by")return ee;const me=((bt=Q.status)==null?void 0:bt.toUpperCase())||"",oe=u.toUpperCase();return ee&&me===oe}),b=y.length,E=Math.ceil(b/f),j=b>0?(g-1)*f+1:0,A=Math.min(g*f,b),k=[];if(E>0)for(let Q=1;Q<=E;Q++)k.push(Q);const S=Q=>{c(Q.target.value),v(1)},V=Q=>{d(Q.target.value),v(1)},L=Q=>{const G=parseInt(Q.target.value);!isNaN(G)&&G>0&&(m(G),v(1))},F=()=>{g<E&&v(g+1)},B=()=>{g>1&&v(g-1)},$=Q=>{v(Q)},W=Q=>{I(Q),N(!0)},K=()=>{I(null),N(!1)},Z=()=>{if(x)try{const Q={...x,archived:!0,archivedDate:new Date().toISOString()};e(n.filter(oe=>oe.id!==x.id));const G=JSON.parse(localStorage.getItem("archivedAppointments")||"[]");G.push(Q),localStorage.setItem("archivedAppointments",JSON.stringify(G));const me=JSON.parse(localStorage.getItem("studentsData")||"[]").filter(oe=>oe.transactionNumber!==x.transactionNumber);localStorage.setItem("studentsData",JSON.stringify(me)),K()}catch(Q){console.error("Error deleting appointment:",Q),alert("Failed to delete appointment. Please try again.")}},se=async(Q,G)=>{try{console.log("Updating status:",{appointment:Q,newStatus:G});const ee=await fetch(`https://appointment-system-backend-n8dk.onrender.com/api/status/status/${Q.transactionNumber}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:G,emailAddress:Q.emailAddress,name:Q.name,appointmentDate:Q.dateOfAppointment,timeSlot:Q.timeSlot})});if(console.log("Response:",await ee.clone().json()),!ee.ok)throw new Error("Failed to update status");e(me=>me.map(oe=>oe.transactionNumber===Q.transactionNumber?{...oe,status:G}:oe))}catch(ee){console.error("Error updating status:",ee),o(ee.message)}},z=Q=>{event==null||event.preventDefault(),se(Q,"APPROVED")},te=Q=>{event==null||event.preventDefault(),se(Q,"REJECTED")},ie=Q=>{event==null||event.preventDefault(),se(Q,"COMPLETED")};return C.useEffect(()=>{const Q=async()=>{s(!0),o(null);try{const ee=await fetch("https://appointment-system-backend-n8dk.onrender.com/api/document-requests/docs-with-details");if(!ee.ok){let ge=`HTTP error! status: ${ee.status}`;try{ge=(await ee.json()).message||ge}catch(qe){console.warn("Could not parse error response:",qe)}throw new Error(ge)}let me;try{if(me=await ee.json(),!Array.isArray(me))throw new Error("Invalid response format: expected an array")}catch(ge){throw console.error("Error parsing students data:",ge),new Error("Failed to parse students data")}const oe=await fetch("https://appointment-system-backend-n8dk.onrender.com/api/status");if(!oe.ok){let ge=`HTTP error! status: ${oe.status}`;try{ge=(await oe.json()).message||ge}catch(qe){console.warn("Could not parse error response:",qe)}throw new Error(ge)}let ve;try{if(ve=await oe.json(),!Array.isArray(ve))throw new Error("Invalid response format: expected an array")}catch(ge){throw console.error("Error parsing status data:",ge),new Error("Failed to parse status data")}const ke=ve.reduce((ge,qe)=>(qe&&qe.transactionNumber&&(ge[qe.transactionNumber]=qe),ge),{}),Fe=JSON.parse(localStorage.getItem("archivedAppointments")||"[]"),bt=new Set(Fe.map(ge=>ge.id)),Ge=me.filter(ge=>ge&&ge.transactionNumber&&!bt.has(ge.transactionNumber)).map(ge=>{const qe=ke[ge.transactionNumber]||{};return{id:ge.transactionNumber,status:qe.status||"PENDING",transactionNumber:ge.transactionNumber,request:ge.request||"No request specified",emailAddress:ge.email||"No email specified",dateOfAppointment:ge.appointmentDate||"Not scheduled",timeSlot:ge.timeSlot||"Not scheduled",dateOfRequest:ge.date||new Date().toISOString().split("T")[0],name:ge.name,lastSY:ge.lastSY,program:ge.program,contact:ge.contact,attachment:ge.attachment}});e(Ge)}catch(ee){console.error("Failed to fetch appointments:",ee),o(ee.message||"An error occurred while fetching data.")}finally{s(!1)}};Q();const G=setInterval(Q,3e4);return()=>clearInterval(G)},[]),{appointments:n,loading:t,error:r,currentPage:g,entriesPerPage:f,totalFilteredEntries:b,calculatedTotalPages:E,startEntry:j,endEntry:A,pageNumbers:k,filteredAppointments:y,handleSearchChange:S,handleFilterChange:V,handleEntriesPerPageChange:L,handleNextPage:F,handlePreviousPage:B,handlePageChange:$,searchTerm:a,selectedFilter:u,isModalOpen:w,selectedAppointment:x,openModal:W,closeModal:K,deleteAppointment:Z,approveAppointment:z,rejectAppointment:te,completeAppointment:ie,getStatusColor:O,getTransactionNumberColor:D,isSidebarOpen:R,toggleSidebar:P}},k2=()=>{const{loading:n,error:e,currentPage:t,entriesPerPage:s,totalFilteredEntries:r,calculatedTotalPages:o,startEntry:a,endEntry:c,pageNumbers:u,filteredAppointments:d,handleSearchChange:f,handleFilterChange:m,handleEntriesPerPageChange:g,handleNextPage:v,handlePreviousPage:w,handlePageChange:N,searchTerm:x,selectedFilter:I,isModalOpen:R,openModal:_,closeModal:P,deleteAppointment:O,approveAppointment:D,rejectAppointment:y,completeAppointment:b,getStatusColor:E,getTransactionNumberColor:j,isSidebarOpen:A,toggleSidebar:k}=P2();return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`${A?"w-[300px]":"w-[100px]"}`,children:i.jsx(rn,{isSidebarOpen:A})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("main",{className:"h-auto",children:[i.jsx(on,{toggleSidebar:k,isSidebarOpen:A,title:"Appointments"}),i.jsx("div",{children:i.jsxs("section",{className:"min-h-[calc(100vh-160px)] z-10 bg-white p-5 my-5",children:[i.jsxs("div",{className:"bg-[#D9D9D9] h-48 m-4",children:[i.jsxs("div",{className:" text-[#161F55] px-3 ml-3 pt-2",children:[i.jsx("h2",{className:"text-3xl font-bold tracking-[5px] pt-1",children:"LIST OF APPOINTMENTS"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[450px] my-3"})]}),i.jsxs("div",{className:"flex justify-between items-center mt-[78px] ml-4 mr-5",children:[i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px]",children:[i.jsx("label",{htmlFor:"show-entries",className:"mr-2",children:"SHOW"}),i.jsxs("select",{id:"show-entries",name:"show-entries",value:s,onChange:g,className:"text-center w-20 p-2 border border-gray-400 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-[#161F55]",children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"15",children:"15"}),i.jsx("option",{value:"20",children:"20"}),i.jsx("option",{value:"25",children:"25"})]}),i.jsx("span",{className:"ml-2",children:"ENTRIES"})]}),i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px] flex gap-4",children:[i.jsx("div",{children:i.jsxs("select",{value:I,onChange:m,className:"bg-white border-2 border-gray-300 px-2 text-gray-400 py-2",children:[i.jsx("option",{value:"Filter by",children:"Filter by"}),i.jsx("option",{value:"Pending",children:"Pending"}),i.jsx("option",{value:"Approved",children:"Approved"}),i.jsx("option",{value:"Rejected",children:"Rejected"}),i.jsx("option",{value:"Completed",children:"Completed"})]})}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{id:"search",type:"search",value:x,onChange:f,className:"border-[#989898] py-2 bg-white text-[#161F55] pl-10 pr-3 rounded-md",placeholder:"Search"})]})]})]})]}),i.jsx("div",{className:"overflow-y-auto m-4 mt-8",children:i.jsxs("table",{className:"text-[18px] w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-center",children:[i.jsx("th",{className:"border p-4",children:"STATUS"}),i.jsxs("th",{className:"border p-4",children:["TRANSACTION",i.jsx("br",{}),"NUMBER"]}),i.jsx("th",{className:"border p-4",children:"REQUEST"}),i.jsxs("th",{className:"border p-4",children:["EMAIL ",i.jsx("br",{}),"ADDRESS"]}),i.jsxs("th",{className:"border p-4",children:["DATE OF",i.jsx("br",{}),"APPOINTMENT"]}),i.jsx("th",{className:"border p-4",children:"TIME SLOT"}),i.jsxs("th",{className:"border p-4",children:["DATE OF",i.jsx("br",{}),"REQUEST"]}),i.jsx("th",{className:"border p-4",children:"ACTIONS"})]})}),i.jsxs("tbody",{children:[n&&i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"text-center p-5",children:"Loading appointments..."})}),e&&i.jsx("tr",{children:i.jsxs("td",{colSpan:"8",className:"text-center p-5 text-red-500",children:["Error: ",e]})}),!n&&!e&&d.slice((t-1)*s,t*s).map((S,V)=>i.jsxs("tr",{className:"even:bg-gray-100",children:[i.jsx("td",{className:"border p-4 text-center",children:i.jsx("span",{className:`inline-block w-[120px] text-center px-2 py-2 rounded text-white ${E(S.status)}`,children:S.status})}),i.jsx("td",{className:"border p-4",children:i.jsx("div",{className:"flex flex-col text-center",children:i.jsx("span",{className:`font-bold ${j(S.status)}`,children:S.transactionNumber})})}),i.jsx("td",{className:"border p-4",children:S.request}),i.jsx("td",{className:"border p-4",children:S.emailAddress}),i.jsx("td",{className:"border p-4",children:S.dateOfAppointment}),i.jsx("td",{className:"border p-4",children:S.timeSlot}),i.jsx("td",{className:"border p-4",children:new Date(S.dateOfRequest).toLocaleDateString()}),i.jsx("td",{className:"border p-4",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[(S.status==="PENDING"||S.status==="REJECTED")&&i.jsx("div",{"data-tooltip-id":"approve-tooltip","data-tooltip-content":"Approve",className:"bg-[#3A993D] p-2 rounded cursor-pointer hover:bg-green-700",onClick:L=>{L.preventDefault(),D(S)},children:i.jsx(R2,{className:"text-white"})}),(S.status==="PENDING"||S.status==="APPROVED")&&i.jsx("div",{"data-tooltip-id":"complete-tooltip","data-tooltip-content":"Complete",className:"bg-[#354CCE] p-2 rounded cursor-pointer hover:bg-blue-700",onClick:L=>{L.preventDefault(),b(S)},children:i.jsx(j2,{className:"text-white"})}),(S.status==="PENDING"||S.status==="APPROVED")&&i.jsx("div",{"data-tooltip-id":"reject-tooltip","data-tooltip-content":"Reject",className:"bg-[#D52121] p-2 rounded cursor-pointer hover:bg-red-700",onClick:L=>{L.preventDefault(),y(S)},children:i.jsx(A2,{className:"text-white transform scale-x-[-1]"})}),i.jsx("div",{"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"bg-[#6F6F6F] p-2 rounded cursor-pointer hover:bg-gray-700",onClick:L=>{L.preventDefault(),_(S)},children:i.jsx(Vo,{className:"text-white"})})]})})]},S.id))]})]})}),o>0&&i.jsxs("div",{className:"flex justify-between items-center mt-10 text-[18px] px-4",children:[i.jsxs("span",{className:"text-[#161F55]",children:["SHOWING ",a," TO ",c," OF ",r," ","ENTRIES"]}),o>1&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:w,disabled:t===1,className:"border px-3 py-1 text-[#161F55] rounded-l-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),u.map(S=>i.jsx("button",{onClick:()=>N(S),className:`border-t border-b px-3 py-1 ${t===S?"bg-[#161F55] text-white":"text-[#161F55] hover:bg-gray-100"}`,children:S},S)),i.jsx("button",{onClick:v,disabled:t===o,className:"border px-3 py-1 text-[#161F55] rounded-r-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),i.jsx(En,{}),R&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Are you sure you want to delete this appointment?"}),i.jsxs("div",{className:"flex justify-center gap-10 mt-10",children:[i.jsx("button",{className:"bg-gray-300 text-[#161F55] px-10 py-2 rounded-2xl",onClick:P,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-10 py-2 rounded-2xl",onClick:O,children:"Yes"})]})]})}),i.jsx(Ut,{id:"approve-tooltip"}),i.jsx(Ut,{id:"complete-tooltip"}),i.jsx(Ut,{id:"reject-tooltip"}),i.jsx(Ut,{id:"delete-tooltip"})]})})]})};function D2(n){return we({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747"},child:[]},{tag:"path",attr:{d:"M20 4v5h-5"},child:[]}]})(n)}function O2(n){return we({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(n)}const L2=()=>{const[n,e]=C.useState(()=>{const re=localStorage.getItem("sidebarOpen");return re!==null?JSON.parse(re):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(n))},[n]);const t=()=>{e(re=>!re)},[s,r]=C.useState(()=>{const re=localStorage.getItem("archivedAppointments");return re?JSON.parse(re):[]}),[o,a]=C.useState(!1),[c,u]=C.useState(!1),[d,f]=C.useState(null),[m,g]=C.useState([]),[v,w]=C.useState(!1),[N,x]=C.useState(!1),[I,R]=C.useState(null),[_,P]=C.useState(!1),[O,D]=C.useState(!1),[y,b]=C.useState(10),[E,j]=C.useState(1),[A,k]=C.useState(""),S=s.filter(re=>{var it,nt,Ae;const Le=A.toLowerCase();return((it=re.transactionNumber)==null?void 0:it.toLowerCase().includes(Le))||((nt=re.request)==null?void 0:nt.toLowerCase().includes(Le))||((Ae=re.emailAddress)==null?void 0:Ae.toLowerCase().includes(Le))}),V=S.length,L=Math.ceil(V/y),F=V>0?(E-1)*y+1:0,B=Math.min(E*y,V),$=[];if(L>0)for(let re=1;re<=L;re++)$.push(re);const W=re=>{const Le=parseInt(re.target.value);!isNaN(Le)&&Le>0&&(b(Le),j(1))},K=()=>{E<L&&j(E+1)},Z=()=>{E>1&&j(E-1)},se=re=>{j(re)},z=re=>{k(re.target.value),j(1)},te=()=>{P(!1)},ie=()=>{D(!1)},Q=async()=>{if(d)try{const re=await fetch(`https://appointment-system-backend-n8dk.onrender.com/api/document-requests/docs/${d.transactionNumber}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!re.ok){const Le=await re.json().catch(()=>({}));throw new Error(Le.message||"Failed to delete appointment")}P(!0),ve(),refreshNotifications&&refreshNotifications()}catch(re){console.error("Error deleting appointment:",re),alert(re.message||"Failed to delete appointment. Please try again.")}},G=()=>{if(I)try{const re=s.filter(De=>De.id!==I.id);r(re),localStorage.setItem("archivedAppointments",JSON.stringify(re));const Le=JSON.parse(localStorage.getItem("appointments")||"[]"),{archived:it,archivedDate:nt,...Ae}=I;Le.push(Ae),localStorage.setItem("appointments",JSON.stringify(Le));const ot=JSON.parse(localStorage.getItem("studentsData")||"[]"),be={transactionNumber:I.transactionNumber,name:I.name,lastSY:I.lastSY,program:I.program,contact:I.contact,email:I.email,attachment:I.attachment,request:I.request,date:I.dateOfRequest};ot.push(be),localStorage.setItem("studentsData",JSON.stringify(ot)),D(!0),me()}catch(re){console.error("Error retrieving appointment:",re),alert("Failed to retrieve appointment. Please try again.")}},ee=re=>{R(re),x(!0)},me=()=>{R(null),x(!1)},oe=re=>{f(re),a(!0)},ve=()=>{f(null),a(!1)},ke=()=>{m.length>0?u(!0):alert("Please select at least one appointment to delete.")},Fe=()=>{u(!1)};return{isSidebarOpen:n,appointments:s,isModalOpen:o,isBulkDeleteModalOpen:c,isRetrieveModalOpen:N,selectedAppointment:d,selectedRows:m,isDropdownOpen:v,toggleSidebar:t,openModal:oe,closeModal:ve,openBulkDeleteModal:ke,closeBulkDeleteModal:Fe,openRetrieveModal:ee,closeRetrieveModal:me,deleteAppointment:Q,deleteBulkAppointments:async()=>{try{const re=s.filter(be=>m.includes(be.id)),Le=re.map(async be=>{const De=await fetch(`https://appointment-system-backend-n8dk.onrender.com/api/document-requests/docs/${be.transactionNumber}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!De.ok){const Nt=await De.json().catch(()=>({}));throw new Error(Nt.message||`Failed to delete appointment ${be.transactionNumber}`)}return De});await Promise.all(Le);const it=s.filter(be=>!m.includes(be.id));r(it),localStorage.setItem("archivedAppointments",JSON.stringify(it));const nt=JSON.parse(localStorage.getItem("studentsData")||"[]"),Ae=re.map(be=>be.transactionNumber),ot=nt.filter(be=>!Ae.includes(be.transactionNumber));localStorage.setItem("studentsData",JSON.stringify(ot)),g([]),Fe(),P(!0)}catch(re){console.error("Error deleting bulk appointments:",re),alert(re.message||"Failed to delete appointments. Please try again.")}},retrieveBulkAppointments:()=>{try{const re=s.filter(Ae=>m.includes(Ae.id)),Le=s.filter(Ae=>!m.includes(Ae.id));r(Le),localStorage.setItem("archivedAppointments",JSON.stringify(Le));const it=JSON.parse(localStorage.getItem("appointments")||"[]");re.forEach(Ae=>{const{archived:ot,archivedDate:be,...De}=Ae;it.push(De)}),localStorage.setItem("appointments",JSON.stringify(it));const nt=JSON.parse(localStorage.getItem("studentsData")||"[]");re.forEach(Ae=>{const ot={transactionNumber:Ae.transactionNumber,name:Ae.name,lastSY:Ae.lastSY,program:Ae.program,contact:Ae.contact,email:Ae.email,attachment:Ae.attachment,request:Ae.request,date:Ae.dateOfRequest};nt.push(ot)}),localStorage.setItem("studentsData",JSON.stringify(nt)),g([]),me(),D(!0)}catch(re){console.error("Error retrieving bulk appointments:",re),alert("Failed to retrieve appointments. Please try again.")}},handleCheckboxChange:re=>{m.includes(re)?g(m.filter(Le=>Le!==re)):g([...m,re])},handleSelectAll:()=>{m.length===s.length?g([]):g(s.map(re=>re.id))},toggleDropdown:()=>{w(!v)},handleDropdownAction:re=>{if(m.length===0){alert("Please select at least one appointment");return}re==="delete"?u(!0):re==="return"&&x(!0),w(!1)},retrieveAppointment:G,showSuccessDelete:_,setShowSuccessDelete:P,showSuccessRetrieve:O,setShowSuccessRetrieve:D,closeSuccessDelete:te,closeSuccessRetrieve:ie,entriesPerPage:y,currentPage:E,totalFilteredEntries:V,calculatedTotalPages:L,startEntry:F,endEntry:B,pageNumbers:$,handleEntriesPerPageChange:W,handleNextPage:K,handlePreviousPage:Z,handlePageChange:se,handleSearchChange:z,searchTerm:A,filteredAppointments:S}},F2=()=>{const{isSidebarOpen:n,appointments:e,isModalOpen:t,isBulkDeleteModalOpen:s,isRetrieveModalOpen:r,selectedRows:o,isDropdownOpen:a,toggleSidebar:c,openModal:u,closeModal:d,closeBulkDeleteModal:f,openRetrieveModal:m,closeRetrieveModal:g,deleteAppointment:v,deleteBulkAppointments:w,handleCheckboxChange:N,handleSelectAll:x,toggleDropdown:I,handleDropdownAction:R,retrieveAppointment:_,showSuccessDelete:P,showSuccessRetrieve:O,closeSuccessDelete:D,closeSuccessRetrieve:y,entriesPerPage:b,currentPage:E,totalFilteredEntries:j,calculatedTotalPages:A,startEntry:k,endEntry:S,pageNumbers:V,handleEntriesPerPageChange:L,handleNextPage:F,handlePreviousPage:B,handlePageChange:$,handleSearchChange:W,searchTerm:K,filteredAppointments:Z,retrieveBulkAppointments:se}=L2();return i.jsxs("div",{className:"flex h-screen font-LatoRegular",children:[i.jsx("div",{className:`${n?"w-[300px]":"w-[100px]"}`,children:i.jsx(rn,{isSidebarOpen:n})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:i.jsxs("main",{className:"h-auto",children:[i.jsx(on,{toggleSidebar:c,isSidebarOpen:n,title:"Archived Appointments"}),i.jsx("div",{children:i.jsxs("section",{className:"h-[1200px] z-10 bg-white p-5 my-5",children:[i.jsxs("div",{className:"bg-[#D9D9D9] h-48 m-4",children:[i.jsxs("div",{className:" text-[#161F55] px-3 ml-3 pt-2",children:[i.jsx("h2",{className:"text-3xl font-bold tracking-[5px] pt-1",children:"LIST OF ARCHIVED APPOINTMENTS"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[650px] my-3"})]}),i.jsxs("div",{className:"flex justify-between items-center mt-[78px] ml-4 mr-5",children:[i.jsxs("div",{className:"text-[#161F55] font-semibold text-[18px]",children:[i.jsx("label",{htmlFor:"show-entries",className:"mr-2",children:"SHOW"}),i.jsxs("select",{id:"show-entries",name:"show-entries",value:b,onChange:L,className:"text-center w-20 p-2 border border-gray-400 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-[#161F55]",children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"15",children:"15"}),i.jsx("option",{value:"20",children:"20"}),i.jsx("option",{value:"25",children:"25"})]}),i.jsx("span",{className:"ml-2",children:"ENTRIES"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{id:"search",type:"search",value:K,onChange:W,className:"border-[#989898] py-2 bg-white text-[#161F55] pl-10 pr-3 rounded-md",placeholder:"Search"})]})]})]}),i.jsx("div",{className:"overflow-y-auto m-4 mt-8",children:i.jsxs("table",{className:"text-[18px] w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-200 text-center",children:[i.jsx("th",{className:"border p-5",children:i.jsxs("div",{className:"flex items-center justify-center pl-4",children:[i.jsx("input",{type:"checkbox",checked:o.length===e.length&&e.length>0,onChange:x,className:"w-5 h-5"}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:I,className:"flex items-center justify-center",children:i.jsx(O2,{className:"text-[#161F55] text-2xl"})}),a&&i.jsxs("div",{className:"absolute top-10 left-0 bg-white border border-gray-200 rounded-lg shadow-lg w-32 z-50",children:[i.jsx("button",{onClick:()=>R("delete"),className:"block w-full text-center px-4 py-2 text-[#161F55] hover:bg-gray-100",children:"Delete"}),i.jsx("button",{onClick:()=>R("return"),className:"block w-full text-center px-4 py-2 text-[#161F55] hover:bg-gray-100",children:"Retrieve"})]})]})]})}),i.jsxs("th",{className:"border p-4 text-center",children:["TRANSACTION ",i.jsx("br",{})," NUMBER"]}),i.jsx("th",{className:"border p-4 text-center",children:"REQUEST"}),i.jsxs("th",{className:"border p-4 text-center",children:["EMAIL ",i.jsx("br",{})," ADDRESS"]}),i.jsxs("th",{className:"border p-4 text-center",children:["DATE OF ",i.jsx("br",{})," APPOINTMENT"]}),i.jsx("th",{className:"border p-4 text-center",children:"TIME SLOT"}),i.jsxs("th",{className:"border p-4 text-center",children:["DATE OF ",i.jsx("br",{})," REQUEST"]}),i.jsx("th",{className:"border p-4 text-center",children:"ACTIONS"})]})}),i.jsx("tbody",{children:Z.slice((E-1)*b,E*b).map(z=>i.jsxs("tr",{className:`text-[18px] ${o.includes(z.id)?"bg-[#C2DBFF] !important":"even:bg-gray-100"}`,children:[i.jsx("td",{className:"border p-4 text-center",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("input",{type:"checkbox",checked:o.includes(z.id),onChange:()=>N(z.id),className:"w-5 h-5"})})}),i.jsx("td",{className:"border p-4 text-center font-bold",children:z.transactionNumber}),i.jsx("td",{className:"border p-4 text-center",children:z.request}),i.jsx("td",{className:"border p-4 text-center",children:z.emailAddress}),i.jsx("td",{className:"border p-4 text-center",children:z.dateOfAppointment}),i.jsx("td",{className:"border p-4 text-center",children:z.timeSlot}),i.jsx("td",{className:"border p-4 text-center",children:z.dateOfRequest}),i.jsx("td",{className:"border p-4 text-center",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("div",{"data-tooltip-id":"retrieve-tooltip","data-tooltip-content":"Retrieve",className:"bg-[#3A993D] p-2 rounded cursor-pointer hover:bg-green-700 transform scale-x-[-1]",onClick:()=>m(z),children:i.jsx(D2,{className:"text-white"})}),i.jsx("div",{"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"bg-[#6F6F6F] p-2 rounded cursor-pointer hover:bg-gray-700",onClick:()=>u(z),children:i.jsx(Vo,{className:"text-white"})})]})})]},z.id))})]})}),A>0&&i.jsxs("div",{className:"flex justify-between items-center mt-10 text-[18px] px-4",children:[i.jsxs("span",{className:"text-[#161F55]",children:["SHOWING ",k," TO ",S," OF ",j," ENTRIES"]}),A>1&&i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:B,disabled:E===1,className:"border px-3 py-1 text-[#161F55] rounded-l-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),V.map(z=>i.jsx("button",{onClick:()=>$(z),className:`border-t border-b px-3 py-1 ${E===z?"bg-[#161F55] text-white":"text-[#161F55] hover:bg-gray-100"}`,children:z},z)),i.jsx("button",{onClick:F,disabled:E===A,className:"border px-3 py-1 text-[#161F55] rounded-r-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),i.jsx(En,{}),t&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Are you sure you want to delete this appointment?"}),i.jsxs("div",{className:"flex justify-center gap-10 mt-10",children:[i.jsx("button",{className:"bg-gray-300 text-[#161F55] px-10 py-2 rounded-2xl",onClick:d,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-10 py-2 rounded-2xl",onClick:v,children:"Yes"})]})]})}),r&&!o.length&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Are you sure you want to retrieve this appointment?"}),i.jsxs("div",{className:"flex justify-center gap-10 mt-10",children:[i.jsx("button",{className:"bg-gray-300 text-[#161F55] px-10 py-2 rounded-2xl",onClick:g,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-10 py-2 rounded-2xl",onClick:_,children:"Yes"})]})]})}),P&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:"/assets/icons/x_icon.svg",alt:"Close",onClick:D,className:"w-10 h-10 absolute -top-6 -right-6 cursor-pointer"}),i.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:"/assets/icons/check_icon.svg",alt:"Check icon",className:"w-20 h-20 mb-8"}),i.jsx("p",{className:"text-xl font-semibold text-center",children:"Appointment has been successfully deleted."})]})})]})}),O&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:"/assets/icons/x_icon.svg",alt:"Close",onClick:y,className:"w-10 h-10 absolute -top-6 -right-6 cursor-pointer"}),i.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("img",{src:"/assets/icons/check_icon.svg",alt:"Check icon",className:"w-20 h-20 mb-8"}),i.jsx("p",{className:"text-xl font-semibold text-center",children:"Appointment has been successfully retrieved."})]})})]})}),s&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Are you sure you want to delete ",o.length," selected appointment",o.length>1?"s":"","?"]}),i.jsxs("div",{className:"flex justify-center gap-10 mt-10",children:[i.jsx("button",{className:"bg-gray-300 text-[#161F55] px-10 py-2 rounded-2xl",onClick:f,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-10 py-2 rounded-2xl",onClick:w,children:"Yes"})]})]})}),r&&o.length>0&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-[#161F55] bg-opacity-70 z-50",children:i.jsxs("div",{className:"bg-white p-20 rounded-xl shadow-md",children:[i.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Are you sure you want to retrieve ",o.length," selected appointment",o.length>1?"s":"","?"]}),i.jsxs("div",{className:"flex justify-center gap-10 mt-10",children:[i.jsx("button",{className:"bg-gray-300 text-[#161F55] px-10 py-2 rounded-2xl",onClick:g,children:"No"}),i.jsx("button",{className:"bg-[#161F55] text-white px-10 py-2 rounded-2xl",onClick:se,children:"Yes"})]})]})}),i.jsx(Ut,{id:"retrieve-tooltip"}),i.jsx(Ut,{id:"delete-tooltip"})]})})]})},Zp=({children:n,delay:e=300})=>{const[t,s]=C.useState(!1),[r,o]=C.useState(!0),a=Ys();return C.useEffect(()=>{o(!0),s(!1);const c=setTimeout(()=>{o(!1),s(!0)},e);return()=>clearTimeout(c)},[a.pathname,e]),i.jsxs("div",{className:"transition-wrapper",children:[r&&i.jsxs("div",{className:"spinner",children:[i.jsx("div",{className:"lds-dual-ring"})," "]}),i.jsx("div",{style:{opacity:t?1:0,transition:`opacity ${e}ms ease-in-out`},children:t&&n})]})};Zp.propTypes={children:je.node,delay:je.number};const M2=()=>{const[n,e]=C.useState(()=>{const E=localStorage.getItem("sidebarOpen");return E!==null?JSON.parse(E):!0});C.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(n))},[n]);const[t,s]=C.useState([]),[r,o]=C.useState(!0),[a,c]=C.useState(null),[u,d]=C.useState(1),[f]=C.useState(6),[m,g]=C.useState("newest"),v=C.useCallback(async()=>{try{o(!0);const E=await fetch(`https://appointment-system-backend-n8dk.onrender.com/api/feedback?sort=${m}`);if(!E.ok)throw new Error("Failed to fetch feedback");const j=await E.json();s(j)}catch(E){c(E.message)}finally{o(!1)}},[m]);C.useEffect(()=>{v()},[v]);const w=()=>{e(!n)},N=t.length,x=Math.ceil(N/f),I=N>0?(u-1)*f+1:0,R=Math.min(u*f,N),_=[];if(x>0)for(let E=1;E<=x;E++)_.push(E);const P=t.slice((u-1)*f,u*f);return{isSidebarOpen:n,toggleSidebar:w,setIsSidebarOpen:e,currentPage:u,totalEntries:N,calculatedTotalPages:x,startEntry:I,endEntry:R,pageNumbers:_,handleNextPage:()=>{u<x&&d(u+1)},handlePreviousPage:()=>{u>1&&d(u-1)},handlePageChange:E=>{d(E)},handleSortChange:E=>{g(E.target.value),d(1)},sortOrder:m,currentFeedback:P,loading:r,error:a}},V2=()=>{const{isSidebarOpen:n,toggleSidebar:e,currentPage:t,calculatedTotalPages:s,pageNumbers:r,handleNextPage:o,handlePreviousPage:a,handlePageChange:c,handleSortChange:u,sortOrder:d,currentFeedback:f,loading:m,error:g}=M2(),v=N=>N.split(" ").map(x=>x[0]).join("").toUpperCase(),w=N=>{const x=["bg-green-500","bg-blue-500","bg-red-500","bg-purple-500","bg-yellow-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500"],I=N.split("").reduce((R,_)=>R+_.charCodeAt(0),0);return x[I%x.length]};return i.jsx("div",{className:"flex h-screen font-LatoRegular",children:i.jsxs("main",{className:"flex-1 flex flex-row",children:[i.jsx("div",{className:`${n?"w-[300px]":"w-[100px]"} z-10`,children:i.jsx(rn,{isSidebarOpen:n})}),i.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:'url("/assets/image/BackGround.png")'},children:i.jsx("div",{className:"absolute inset-0 bg-[#161f55] bg-opacity-90"})}),i.jsxs("div",{className:"flex-1 overflow-y-auto z-10 ",children:[i.jsxs("div",{className:"h-auto ",children:[i.jsx(on,{toggleSidebar:e,isSidebarOpen:n,title:"User Feedback"}),i.jsxs("section",{className:"min-h-[calc(100vh-160px)] z-10 rounded-md shadow-md max-w-[1600px] mx-auto",children:[i.jsxs("div",{className:"bg-white my-6 rounded-md py-10 p-6",style:{minHeight:"120px"},children:[i.jsxs("div",{className:"text-[#161F55] mb-6",children:[i.jsx("h2",{className:"text-3xl tracking-[5px] mb-2",children:"User Feedback"}),i.jsx("div",{className:"border-b-4 border-[#F3BC62] w-[260px]"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{htmlFor:"sort",className:"text-sm text-[#000]",children:"Sort by:"}),i.jsxs("select",{id:"sort",value:d,onChange:u,className:"text-sm border border-[#000] rounded-sm text-[#000]",children:[i.jsx("option",{value:"newest",children:"Newest"}),i.jsx("option",{value:"oldest",children:"Oldest"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{onClick:a,disabled:t===1,className:"border px-3 py-1 text-[#161F55] rounded-l-md hover:bg-gray-100 disabled:opacity-50",children:"Previous"}),r.map(N=>i.jsx("button",{onClick:()=>c(N),className:`border-t border-b px-3 py-1 ${t===N?"bg-[#161F55] text-white":"text-[#161F55] hover:bg-gray-100"}`,children:N},N)),i.jsx("button",{onClick:o,disabled:t===s,className:"border px-3 py-1 text-[#161F55] rounded-r-md hover:bg-gray-100 disabled:opacity-50",children:"Next"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg mb-8",children:[i.jsx("div",{className:"p-6 min-h-[400px] flex flex-col",children:m?i.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:"Loading feedback..."}):g?i.jsx("div",{className:"text-center text-red-500 flex-1 flex items-center justify-center",children:g}):f.length===0?i.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:"No feedback available"}):i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map(N=>i.jsx("div",{className:"border border-gray-200 rounded-xl p-6 bg-white shadow-sm max-w-xl mx-auto",children:i.jsxs("div",{className:"flex items-center justify-center gap-6",children:[i.jsx("div",{className:`w-16 h-16 flex items-center justify-center rounded-full text-white text-xl font-bold ${w(N.name)}`,children:v(N.name)}),i.jsxs("div",{className:"text-[#1A2341] font-semibold text-base leading-5 text-center whitespace-nowrap",children:[i.jsx("div",{children:N.name.split(" ")[0]}),i.jsx("div",{children:N.name.split(" ").slice(1).join(" ")})]}),i.jsx("div",{className:"border-l-4 border-[#F3BC62] h-16"}),i.jsx("div",{className:"flex flex-col gap-2",children:Object.entries(N.ratings).map(([x,I])=>{const R=x.replace(/([A-Z])/g," $1").replace(/^./,_=>_.toUpperCase());return i.jsxs("div",{className:"flex items-center gap-2 justify-center whitespace-nowrap",children:[i.jsx("span",{className:"text-[#1A2341] text-sm w-28 text-right",children:R}),i.jsx("div",{className:"flex gap-[2px]",children:[...Array(5)].map((_,P)=>i.jsx(Jm,{className:`text-sm ${P<I?"text-[#2B4EFF]":"text-gray-300"}`},P))})]},x)})})]})},N._id))})}),i.jsx("div",{className:"flex justify-end items-center p-4 border-t",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:a,disabled:t===1,className:"p-2 text-white bg-[#161F55] hover:bg-blue-500 rounded-full disabled:cursor-not-allowed",children:i.jsx(Q_,{className:"text-2xl"})}),i.jsx("button",{onClick:o,disabled:t===s,className:"p-2 text-white bg-[#161F55] hover:bg-blue-500 rounded-full disabled:cursor-not-allowed",children:i.jsx(X_,{className:"text-2xl"})})]})})]})]})]}),i.jsx(En,{})]})]})})},B2=()=>i.jsx(sh,{children:i.jsx(_m,{children:i.jsx(U2,{})})}),U2=()=>{const n=Ys(),t=!["/","/appointmentForm","/students","/signin","/signup","/forgot-password","/new-password","/registrarHome","/events","/schedule","/holidays","/profile","/appointments","/archived","/feedback"].includes(n.pathname);return i.jsx(i.Fragment,{children:i.jsx(Xp,{children:i.jsxs(Zp,{delay:200,children:[t&&i.jsx(Rm,{}),i.jsxs(Em,{children:[i.jsx(Pe,{path:"/",element:i.jsx(sg,{})}),i.jsxs(Pe,{path:"/home",element:i.jsx(J_,{}),children:[i.jsx(Pe,{index:!0,element:i.jsx(ea,{})}),i.jsx(Pe,{path:"announcement",element:i.jsx(ea,{})}),i.jsx(Pe,{path:"hta",element:i.jsx(Md,{})}),i.jsx(Pe,{path:"guidelines",element:i.jsx(Wc,{})})]}),i.jsx(Pe,{path:"/about",element:i.jsx(Kc,{})}),i.jsx(Pe,{path:"/faqs",element:i.jsx(ld,{})}),i.jsx(Pe,{path:"/contact",element:i.jsx(cd,{})}),i.jsx(Pe,{path:"/appointmentForm",element:i.jsx(Y_,{})}),i.jsx(Pe,{path:"/announcement",element:i.jsx(ea,{})}),i.jsx(Pe,{path:"/hta",element:i.jsx(Md,{})}),i.jsx(Pe,{path:"/guidelines",element:i.jsx(Wc,{})}),i.jsx(Pe,{path:"/about",element:i.jsx(Kc,{})}),i.jsx(Pe,{path:"/faqs",element:i.jsx(ld,{})}),i.jsx(Pe,{path:"/contact",element:i.jsx(cd,{})}),i.jsx(Pe,{path:"/students",element:i.jsx(a2,{})}),i.jsx(Pe,{path:"/signin",element:i.jsx(c2,{})}),i.jsx(Pe,{path:"/signup",element:i.jsx(d2,{})}),i.jsx(Pe,{path:"/forgot-password",element:i.jsx(h2,{})}),i.jsx(Pe,{path:"/new-password",element:i.jsx(m2,{})}),i.jsx(Pe,{path:"/registrarHome",element:i.jsx(y2,{})}),i.jsx(Pe,{path:"/events",element:i.jsx(b2,{})}),i.jsx(Pe,{path:"/schedule",element:i.jsx(_2,{})}),i.jsx(Pe,{path:"/holidays",element:i.jsx(S2,{})}),i.jsx(Pe,{path:"/profile",element:i.jsx(I2,{})}),i.jsx(Pe,{path:"/appointments",element:i.jsx(k2,{})}),i.jsx(Pe,{path:"/archived",element:i.jsx(F2,{})}),i.jsx(Pe,{path:"/feedback",element:i.jsx(V2,{})}),i.jsx(Pe,{path:"/attachment",element:i.jsx(Kl,{})}),i.jsx(Pe,{path:"/app-schedule",element:i.jsx(Jl,{})})]}),t&&i.jsx(Um,{})]})})})};Im.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(B2,{})}));
